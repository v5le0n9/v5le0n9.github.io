<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.ico">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-2}},"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"content.json"};
  </script>

  <meta name="description" content="这个笔记配合计算机网络微课堂食用效果更佳，这位老师的PPT做得真的好，讲得也特别简单易懂，力推！">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络">
<meta property="og:url" content="http://example.com/posts/e255a10a.html">
<meta property="og:site_name" content="v5le0n9&#39;s garden">
<meta property="og:description" content="这个笔记配合计算机网络微课堂食用效果更佳，这位老师的PPT做得真的好，讲得也特别简单易懂，力推！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.6.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.6.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.1.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/1.7.1.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.4.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.4.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.4.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.5.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.5.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/2.5.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.2.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.2.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.2.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.2.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.4.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.4.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.4.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.4.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.15.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.2.16.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.3.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.3.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.3.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.2.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.15.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.16.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.17.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.18.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.19.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.20.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.21.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.22.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.23.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.24.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.25.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.26.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.27.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.28.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.5.4.3.29.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.1.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.2.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.2.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.3.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.3.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.3.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.8.3.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.4.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.4.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.9.4.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.10.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.11.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.11.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.11.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.11.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/3.12.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.1.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.2.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.15.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.16.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.17.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.18.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.19.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.20.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.21.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.3.22.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.4.15.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.15.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.16.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.17.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.18.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.19.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.20.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.21.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.6.22.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.7.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.8.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/4.9.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.1.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.2.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.2.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.2.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.2.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.3.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.3.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.3.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.4.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.4.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.4.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.5.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.6.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.6.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.6.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.6.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.6.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.6.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.7.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.8.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.9.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/5.9.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.1.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.2.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.2.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.3.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.4.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.5.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.5.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.5.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.6.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.1.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.2.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.3.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.4.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.5.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.6.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.7.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.8.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.9.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.10.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.11.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.12.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.13.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.14.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.15.png">
<meta property="og:image" content="http://example.com/posts/e255a10a/6.7.16.png">
<meta property="article:published_time" content="2022-04-22T11:24:40.879Z">
<meta property="article:modified_time" content="2022-05-15T02:35:58.389Z">
<meta property="article:author" content="v5le0n9">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/posts/e255a10a/1.1.png">

<link rel="canonical" href="http://example.com/posts/e255a10a.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>计算机网络 | v5le0n9's garden</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="v5le0n9's garden" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">v5le0n9's garden</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">小凉的秘密基地</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/v5le0n9" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/posts/e255a10a.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="v5le0n9">
      <meta itemprop="description" content="v5le0n9's garden">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="v5le0n9's garden">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-22 19:24:40" itemprop="dateCreated datePublished" datetime="2022-04-22T19:24:40+08:00">2022-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-15 10:35:58" itemprop="dateModified" datetime="2022-05-15T10:35:58+08:00">2022-05-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">基础知识</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>48k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>43 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>这个笔记配合<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1c4411d7jb">计算机网络微课堂</a>食用效果更佳，这位老师的PPT做得真的好，讲得也特别简单易懂，力推！</p>
<span id="more"></span>
<h1 id="1-计算机网络概述"><a href="#1-计算机网络概述" class="headerlink" title="1. 计算机网络概述"></a>1. 计算机网络概述</h1><h2 id="1-1-网络、互连网-互联网-和因特网"><a href="#1-1-网络、互连网-互联网-和因特网" class="headerlink" title="1.1 网络、互连网(互联网)和因特网"></a>1.1 网络、互连网(互联网)和因特网</h2><p>网络(Network)由若干结点(Node)和连接这些结点的链路(Link)组成。</p>
<p>多个网络还可以通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互联网(或互连网)。因此，互联网是“网络的网络(Netwrok of Networks)”。</p>
<p>因特网(Internet)是世界上最大的互连网络(用户数以亿计，互连的网络数以百万计)。</p>
<p>internet与lnternet的区别：</p>
<ul>
<li>internet(互联网或互连网)是一个通用名词，它泛指由多个计算机网络互连而成的网络。在这些网络之间的通信协议可以是任意的。</li>
<li>Internet(因特网) 则是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用TCP/IP协议族作为通信的规则，其前身是美国的ARPANET。</li>
</ul>
<h2 id="1-2-因特网发展的三个阶段"><a href="#1-2-因特网发展的三个阶段" class="headerlink" title="1.2 因特网发展的三个阶段"></a>1.2 因特网发展的三个阶段</h2><img src="/posts/e255a10a/1.1.png" class="" title="因特网发展的三个阶段">
<p>因特网服务提供者ISP(Internet Service Provider)：提供给用户IP地址的角色，每个用户通过ISP提供的IP地址使用互联网，没有IP地址不可以使用互联网。我国主要的ISP是我们熟悉的中国电信、中国联通和中国移动这三大电信运营商。</p>
<img src="/posts/e255a10a/1.2.png" class="" title="基于ISP的三级结构互联网">
<h2 id="1-3-因特网的组成"><a href="#1-3-因特网的组成" class="headerlink" title="1.3 因特网的组成"></a>1.3 因特网的组成</h2><p>因特网由边缘部分和核心部分组成。</p>
<ol>
<li><p>边缘部分<br>由所有连接在因特网上的主机组成。这部分是用户直接使用的，用来进行通信(传送数据、音频或视频)和资源共享</p>
</li>
<li><p>核心部分<br>由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的(提供连通性和交换)</p>
</li>
</ol>
<h2 id="1-4-计算机网络三种数据交换方式"><a href="#1-4-计算机网络三种数据交换方式" class="headerlink" title="1.4 计算机网络三种数据交换方式"></a>1.4 计算机网络三种数据交换方式</h2><h3 id="1-4-1-电路交换"><a href="#1-4-1-电路交换" class="headerlink" title="1.4.1 电路交换"></a>1.4.1 电路交换</h3><p>电话交换机接通电话线的方式称为电路交换。</p>
<p>从通信资源的分配角度来看，交换(Switching)就是按照某种方式动态地分配传输线路的资源。</p>
<p>电路交换的三个步骤：</p>
<ol>
<li>建立连接（分配通信资源)</li>
<li>通话（一直占用通信资源)</li>
<li>释放连接（归还通信资源)</li>
</ol>
<p>在建立后不论通信资源有没有使用，都不会进行中断，除非用户中断。当使用电路交换来传送计算机数据时, 其线路的传输效率往往很低。</p>
<h3 id="1-4-2-分组交换"><a href="#1-4-2-分组交换" class="headerlink" title="1.4.2 分组交换"></a>1.4.2 分组交换</h3><p>把整块数据/信息分为多个数据段(相对于报文传输而言)，数据段分开传输。在数据段前面加上首部后，成为一个分组。以分组为单位传输。</p>
<p>各个分组交换机会把分组先存储下来，然后根据其头部信息中的目的地址，发送给下一个交换机。各个交换机进行对分组信息的储存转发后，最终到达接收方。接收方处理及再去除分组首部，还原出报文。传输完成。</p>
<p>在转发过程中有两个特点：</p>
<ol>
<li>各分组从发送方到达接收方可以经过不同的交换机。</li>
<li>各分组到达接收方的顺序不定，可能出现乱序。</li>
</ol>
<p>在分组传输中各个角色主要功能：</p>
<ul>
<li>发送方：构造分组，发送分组</li>
<li>路由器：缓存分组，转发分组</li>
<li>接收方：接受分组，还原报文</li>
</ul>
<h3 id="1-4-3-报文交换"><a href="#1-4-3-报文交换" class="headerlink" title="1.4.3 报文交换"></a>1.4.3 报文交换</h3><p>每一个结点接收整个报文，检查目标结点地址，然后根据网络中的通信情况在适当的时候转发到下一个结点。经过多次存储转发，最后到达目标，因而这样的网络叫存储转发网络。其中的交换结点要有足够大的存储空间(一般是磁盘)，用以缓冲收到的长报文。 </p>
<p>报文交换主要用于早期的电报通信网，现在较少使用，通常被较先进的分组交换方式所取代。</p>
<h3 id="1-4-4-三种交换方式的对比"><a href="#1-4-4-三种交换方式的对比" class="headerlink" title="1.4.4 三种交换方式的对比"></a>1.4.4 三种交换方式的对比</h3><img src="/posts/e255a10a/1.4.4.png" class="" title="三种交换方式的对比">
<h2 id="1-5-计算机网络的定义和分类"><a href="#1-5-计算机网络的定义和分类" class="headerlink" title="1.5 计算机网络的定义和分类"></a>1.5 计算机网络的定义和分类</h2><p>计算机网络主要是一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的的，这些可编程的硬件能够用来传送多种不同类型的数据(如音频、数据等)，这些可编程的软件能支持广泛和日益增长的应用。</p>
<ol>
<li><p>按照交换技术分类</p>
<ul>
<li>电路交换网络</li>
<li>报文交换网络</li>
<li>分组交换网络</li>
</ul>
</li>
<li><p>按使用者分类</p>
<ul>
<li>公用网：电信公司构建的大型网络，面对公众开放，只要交钱既可使用，又叫公众网</li>
<li>专用网：某个部门为本单位的特殊业务工作需要而建造的网络。例如铁路部门、电信部门专门为自己构建的，不对外开放的网络</li>
</ul>
</li>
<li><p>按照传输介质分类</p>
<ul>
<li>有线网：双绞线(日常使用网线)、光纤</li>
<li>无线网：WIFI</li>
</ul>
</li>
<li><p>按覆盖范围分类</p>
<ul>
<li>广域网 WAN：覆盖面积通常为几十公里到几千公里，可以覆盖国家范围、洲际范围，有时也称为远程网。负责互连分布在不同区域的城域网和局域网，是最大范围的网络。</li>
<li>城域网 MAN：覆盖范围一般是一个城市。作用距离为5到50公里。通常作为城市骨干网，互连大量企业、机构、学校。</li>
<li>局域网 LAN：局域网一般是微信计算机或工作站通过告诉线路相连，范围一般是一个实验室、一栋楼或一个校园。覆盖范围1公里左右，通常由某个单位单独拥有、使用和维护。</li>
<li>个域网 PAN：个人区域网络。非用来连接普通计算机，而是在个人工作的地方把个人使用的电子设备，鼠标、键盘、耳机等用无线的方式连接起来形成的个人网络系统。覆盖范围10米左右。</li>
</ul>
</li>
<li><p>按拓扑结构分类</p>
<ul>
<li><p>总线型网络：总线型网络用单根传输线把计算机连接起来。</p>
<p>优点是建网容易，增减节点方便，节省线路。</p>
<p>缺点是重负载时通信效率不高，任意一处出现故障后全网瘫痪。</p>
</li>
<li><p>星型网络：星型网络是将每个计算机都以单独的线路与中央设备相连。中央设备现在一般是交换机或路由器。</p>
<p>优点：便于网络的集中控制和管理。</p>
<p>缺点：成本高，中央设备对故障敏感。</p>
</li>
<li><p>环型网络：环形网络是将所有计算机网络接口连接成一个环。环可以是单环或者双环，环中信号是单向传输的。</p>
</li>
<li><p>网状型网络：在网状结构中，每个节点至少由两条路径与其他节点相连接，多用在广域网中。</p>
<p>优点：可靠性高。</p>
<p>缺点：控制复杂，线路成本高。</p>
</li>
</ul>
</li>
</ol>
<p>以上四种结构中可以任意组合形成更加复杂的网络。</p>
<h2 id="1-6-计算机网络的性能指标"><a href="#1-6-计算机网络的性能指标" class="headerlink" title="1.6 计算机网络的性能指标"></a>1.6 计算机网络的性能指标</h2><h3 id="1-6-1-速率"><a href="#1-6-1-速率" class="headerlink" title="1.6.1 速率"></a>1.6.1 速率</h3><img src="/posts/e255a10a/1.6.png" class="" title="速率">
<h3 id="1-6-2-带宽"><a href="#1-6-2-带宽" class="headerlink" title="1.6.2 带宽"></a>1.6.2 带宽</h3><p>用来表示网络的通信线路所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一个点所能通过的“最高数据率”。</p>
<p>单位：b/s(kb/s, Mb/s, Gb/s, Tb/s)，与速率相同。</p>
<h3 id="1-6-3-吞吐量"><a href="#1-6-3-吞吐量" class="headerlink" title="1.6.3 吞吐量"></a>1.6.3 吞吐量</h3><p>吞吐量表示在单位时间内通过某个网络(或信道、接口)的数据量。</p>
<p>吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</p>
<p>吞吐量受网络的带宽或额定速率的限制。</p>
<h3 id="1-6-4-时延"><a href="#1-6-4-时延" class="headerlink" title="1.6.4 时延"></a>1.6.4 时延</h3><script type="math/tex; mode=display">
网络时延=发送时延+传播时延+处理时延</script><p><strong>发送时延</strong></p>
<script type="math/tex; mode=display">
发送时延=\frac{分组长度(b)}{发送速率(b/s)}</script><p>发送速率受网卡的发送速率、信道带宽、接口速率影响。发送效率遵循木桶原理，由速率最低的模块决定，所以在选择网线、路由器等设备时，要考虑到整体的速率平衡问题。</p>
<p>发送速率 = min[网卡发送速率，信道带宽，交换机或路由器的接口速率]</p>
<p><strong>传播时延</strong></p>
<script type="math/tex; mode=display">
传播时延=\frac{信道长度(m)}{电磁波传播速率(m/s)}</script><p>电磁波在自由空间的传播速率：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="15.44ex" height="2.52ex" role="img" focusable="false" viewBox="0 -864 6824.6 1114"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(762.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1818.6,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g><g data-mml-node="mo" transform="translate(2540.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="msup" transform="translate(3541,0)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mn" transform="translate(1033,393.1) scale(0.707)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g></g><g data-mml-node="mi" transform="translate(4977.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(5855.6,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(6355.6,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g></g></svg></mjx-container></p>
<p>在铜线中：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="17.2ex" height="2.52ex" role="img" focusable="false" viewBox="0 -864 7602.6 1114"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(762.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1818.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(3318.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="msup" transform="translate(4319,0)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mn" transform="translate(1033,393.1) scale(0.707)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g></g><g data-mml-node="mi" transform="translate(5755.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(6633.6,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(7133.6,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g></g></svg></mjx-container></p>
<p>在光纤中：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="17.2ex" height="2.52ex" role="img" focusable="false" viewBox="0 -864 7602.6 1114"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(762.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1818.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(3318.8,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="msup" transform="translate(4319,0)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mn" transform="translate(1033,393.1) scale(0.707)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g></g><g data-mml-node="mi" transform="translate(5755.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(6633.6,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(7133.6,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g></g></svg></mjx-container></p>
<p>要计算传播时延，先确定传播媒体，进而可以确定电磁波在该传输媒体中的传输速率。</p>
<p><strong>处理时延</strong></p>
<p>处理时延是路由器收到分组后对其进行存储转发产生的时延。不方便计算。排队时延也归到处理时延中。</p>
<p>在题目中，一般会写“处理时延忽略不计”。发送时延占主导还是传播时延占主导，要根据具体例子实际分析。</p>
<img src="/posts/e255a10a/1.6.4.png" class="" title="例题">
<img src="/posts/e255a10a/1.6.5.png" class="" title="总结">
<h3 id="1-6-5-时延带宽积"><a href="#1-6-5-时延带宽积" class="headerlink" title="1.6.5 时延带宽积"></a>1.6.5 时延带宽积</h3><script type="math/tex; mode=display">
时延带宽积=传播时延×带宽</script><p>若发送端连续发送数据，则在所发送的第一个比特即将到达终点时，发送端就已经发送了时延带宽积个比特。</p>
<p>链路的时延带宽积又称为以比特为单位的链路长度。</p>
<h3 id="1-6-6-往返时间-RTT"><a href="#1-6-6-往返时间-RTT" class="headerlink" title="1.6.6 往返时间(RTT)"></a>1.6.6 往返时间(RTT)</h3><p>从发送端发送信息开始，到发送端接收到来自接收端发送的确认信息，称为往返时间(RTT)。</p>
<p>在许多情况下，因特网上的信息不仅仅单方向传输，而是双向交互。我们有时很需要知道双向交互一次所需的时间，因此，往返时间(RTT，Round-Trip Time)是一个重要的性能指标。</p>
<h3 id="1-6-7-利用率"><a href="#1-6-7-利用率" class="headerlink" title="1.6.7 利用率"></a>1.6.7 利用率</h3><p>利用率分为信道利用率和网络利用率。</p>
<ul>
<li>信道利用率：用来表示某信道有百分之几的时间是被利用的(有数据通过)</li>
<li>网络利用率：全网络的信道利用率的加权平均</li>
</ul>
<p>根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加。</p>
<p>如果令：</p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex" xmlns="http://www.w3.org/2000/svg" width="2.861ex" height="1.92ex" role="img" focusable="false" viewBox="0 -683 1264.6 848.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g></svg></mjx-container>：网络空闲时延</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.873ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 828 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g></g></g></svg></mjx-container>：网络当前时延</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.735ex" height="1.595ex" role="img" focusable="false" viewBox="0 -683 767 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g></g></g></svg></mjx-container>：利用率</li>
</ul>
<p>那么则有下列关系：</p>
<script type="math/tex; mode=display">
D=\frac{D_0}{1-U}</script><ul>
<li>当网络的利用率达到50%时，时延就要加倍</li>
<li>当网络的利用率超过50%时，时延急剧增大</li>
<li>当网络的利用率接近100%时，时延就趋于无穷大</li>
</ul>
<p>因此，一些拥有较大主干网的ISP通常会控制它们的信道利用率不超过50%。如果超过了，就要准备扩容，增大线路的带宽。也不能使信道利用率太低，这会使宝贵的通信资源被白白浪费。应该使用一些机制，可以根据情况动态调整输入到网络中的通信量，使网络利用率保持在合理范围内。</p>
<h3 id="1-6-8-丢包率"><a href="#1-6-8-丢包率" class="headerlink" title="1.6.8 丢包率"></a>1.6.8 丢包率</h3><ol>
<li>丢包率即分组丢失率，是指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率。</li>
<li>丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等。</li>
<li>丢包率是网络运维人员非常关心的一个网络性能指标，但对于普通用户来说往往并不关心这个指标，因为他们通常意识不到网络丢包。</li>
<li>分组丢失主要有两种情况：<ul>
<li>分组在传输过程中出现误码，被结点丢弃；</li>
<li>分组到达一台队列已满的分组交换机时被丢弃；在通信量较大时就可能造成网络拥塞。</li>
</ul>
</li>
<li>因此，丢包率反映了网络的拥塞情况：<ul>
<li>无拥塞时路径丢包率为0</li>
<li>轻度拥塞时路径丢包率为1%~4%</li>
<li>严重拥塞时路径丢包率为5%~15%</li>
</ul>
</li>
</ol>
<h2 id="1-7-计算机网络体系结构"><a href="#1-7-计算机网络体系结构" class="headerlink" title="1.7 计算机网络体系结构"></a>1.7 计算机网络体系结构</h2><img src="/posts/e255a10a/1.7.1.png" class="" title="计算机网络体系结构">
<img src="/posts/e255a10a/1.7.2.png" class="" title="计算机网络体系结构">
<img src="/posts/e255a10a/1.7.4.png" class="" title="OSI模型的各层的作用">
<img src="/posts/e255a10a/1.7.3.png" class="" title="五层体系结构各层的作用">
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1c4411d7jb?p=9">必看！计算机网络体系结构的分层思想</a>，这个PPT做得真的绝了。</p>
<h3 id="1-7-1-计算机网络体系结构中的专用术语"><a href="#1-7-1-计算机网络体系结构中的专用术语" class="headerlink" title="1.7.1 计算机网络体系结构中的专用术语"></a>1.7.1 计算机网络体系结构中的专用术语</h3><h4 id="1-7-1-1-实体"><a href="#1-7-1-1-实体" class="headerlink" title="1.7.1.1 实体"></a>1.7.1.1 实体</h4><p>实体：任何可发送或接受信息的硬件或软件进程。</p>
<p>对等实体：收发双方相同层次中的实体。</p>
<img src="/posts/e255a10a/1.7.1.1.png" class="" title="实体">
<h4 id="1-7-1-2-协议"><a href="#1-7-1-2-协议" class="headerlink" title="1.7.1.2 协议"></a>1.7.1.2 协议</h4><p>协议：控制两个对等实体进行逻辑通信的规则的集合。</p>
<p>协议的三要素：语法、语义、同步</p>
<ul>
<li>语法：定义所交换信息的格式</li>
<li>语义：定义收发双方所要完成的操作</li>
<li>同步：定义收发双方的时序关系</li>
</ul>
<h4 id="1-7-1-3-服务"><a href="#1-7-1-3-服务" class="headerlink" title="1.7.1.3 服务"></a>1.7.1.3 服务</h4><p>在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务。</p>
<p>要实现本层协议，还需要使用下面一层所提供的服务。</p>
<p>协议是“水平的”，服务是“垂直的”。</p>
<p>实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议。也就是说，下面的协议对上面的实体是“透明”的。</p>
<img src="/posts/e255a10a/1.7.1.2.png" class="" title="服务">
<p>服务访问点：在同一系统中相邻两层的实体交换信息的逻辑接口，用于区分不同的服务类型。</p>
<ul>
<li>数据链路层的服务访问点为帧的“类型”字段。</li>
<li>网络层的服务访问点为IP数据报首部中的“协议字段”。</li>
<li>运输层的服务访问点为“端口号”。</li>
</ul>
<p>服务原语：上层使用下层所提供的服务必须通过与下层交换一些命令。</p>
<p>协议数据单元PDU：对等层次之间传送的数据包称为该层的协议数据单元。</p>
<p>服务数据单元SDU：同一系统内，层与层之间交换的数据包。</p>
<p>多个SDU可以合成为一个PDU；一个SDU也可划分为几个PDU。</p>
<img src="/posts/e255a10a/1.7.1.3.png" class="" title="服务">
<h1 id="2-物理层"><a href="#2-物理层" class="headerlink" title="2. 物理层"></a>2. 物理层</h1><h2 id="2-1-基本概念"><a href="#2-1-基本概念" class="headerlink" title="2.1 基本概念"></a>2.1 基本概念</h2><p>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流。</p>
<p>物理层为数据链路层屏蔽了各种传输媒体的差异，使数据链路层只需要考虑如何完成本层的协议和服务，而不必考虑网络具体的传输媒体是什么。</p>
<p>传输媒体不属于任何一层，如果一定要分类，则属于物理层。</p>
<script type="math/tex; mode=display">
传输媒体\begin{cases}导引型传输媒体：同轴电缆
、双绞线、
光纤\\\\非导引型传输媒体：微波通信\end{cases}</script><p>物理层协议的主要任务：</p>
<ul>
<li>机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置。</li>
<li>电气特性：指明在接口电缆的各条线上出现的电压的范围。</li>
<li>功能特性：指明某条线上出现的某一电平的电压表示何种意义。</li>
<li>过程特性：指明对于不同功能的各种可能事件的出现顺序。</li>
</ul>
<p>由于传输媒体种类众多(双绞线、光纤等)，物理连接方式也很多(点对点连接、广播连接等)，因此物理协议有很多种，但是每一种都需要包括以上四个特性。</p>
<h2 id="2-2-物理层下面的传输媒体"><a href="#2-2-物理层下面的传输媒体" class="headerlink" title="2.2 物理层下面的传输媒体"></a>2.2 物理层下面的传输媒体</h2><h3 id="2-2-1-导引型传输媒体"><a href="#2-2-1-导引型传输媒体" class="headerlink" title="2.2.1 导引型传输媒体"></a>2.2.1 导引型传输媒体</h3><p>在导引型传输媒体中，电磁波被导引沿着固体传播媒体传播。</p>
<p>常见的导引型传输媒体有：</p>
<ul>
<li><p>同轴电缆：生活中最常见的就是电视线。用于模拟传输。价格较贵，布线不够灵活方便。</p>
</li>
<li><p>双绞线：双绞线是最古老又常用的传输媒体。也就是生活中最常见的网线。双绞线的构成就是把两个互相绝缘的铜导线并排放在一起，按照一定规则绞合起来，因此称为双绞线。</p>
<p>绞合的作用：①抵御部分来自外界的电磁波干扰；②减少来自相邻导线的电磁干扰。</p>
</li>
<li><p>光纤：每一根光纤是非常细的，因此需要将它做成很结实的光缆，一根光缆少则只有一根光纤，多则可能有数十根甚至数百根光纤。 光纤的芯非常细。</p>
<p>优点：①通信容量大；②传输损耗小，远距离传输时更加经济；③抗雷电和电磁干扰性能好，在大电流脉冲干扰的环境下尤为重要；④无串音干扰，保密性好，不易被窃听；⑤体积小，重量轻。</p>
<p>缺点：①割接需要专用设备；②光电接口价格较贵。</p>
</li>
<li><p>电力线：电力线是一种比较古老的技术。应用电力线传输信号的实例最早是电力线电话。但是在目前，以电力线构建局域网已不能满足需求。</p>
</li>
</ul>
<h3 id="2-2-2-非导引型传输媒体"><a href="#2-2-2-非导引型传输媒体" class="headerlink" title="2.2.2 非导引型传输媒体"></a>2.2.2 非导引型传输媒体</h3><p>非导引型的传播媒体是自由空间。</p>
<img src="/posts/e255a10a/2.2.2.png" class="" title="电磁波频率谱">
<p>电磁波频率过大对人体有害，因此一般使用介于无线电波到红外的频率来进行信息传播。</p>
<p>常见的非导引型传输媒体有：</p>
<ul>
<li>无线电波：无线电波用于国际广播、海事和航空通讯等。无线电波中的低频和中频端主要以地面波形式传播。高频和甚高频主要用电离层的反射传播。</li>
<li>微波：微波用于无线电话、无线网络、雷达、人造卫星接收等。在数据通信中占有重要地位。微波在空间中主要以直线传播，其传播距离一般只有50公里左右。传统的微波通信主要有地面微波接力通信和卫星通信。</li>
<li>红外线：利用红外线传输数据，例如电视遥控等。红外通信属于点对点无线传输。不能越障，传输距离短，传输速率低。</li>
<li>可见光：LIFI可以实现使用可见光通信，但是目前还在实验阶段，所以暂时无法取代WIFI。</li>
</ul>
<h2 id="2-3-物理层的传输方式"><a href="#2-3-物理层的传输方式" class="headerlink" title="2.3 物理层的传输方式"></a>2.3 物理层的传输方式</h2><h3 id="2-3-1-串行传输和并行传输"><a href="#2-3-1-串行传输和并行传输" class="headerlink" title="2.3.1 串行传输和并行传输"></a>2.3.1 串行传输和并行传输</h3><p>串行传输：指数据是一个比特一个比特依次发送的，只需要一条传输链路。数据在进行远距离传输的时候用的是串行传输，不是并行传输。</p>
<p>并行传输：指一次发送n个比特而不是一个比特，为此在发送端和接收端之间需要有n条传输线路。并行传输的优点是速度为串行传输的n倍。缺点是成本高。计算机内部数据的传输一般使用并行传输。</p>
<h3 id="2-3-2-同步传输和异步传输"><a href="#2-3-2-同步传输和异步传输" class="headerlink" title="2.3.2 同步传输和异步传输"></a>2.3.2 同步传输和异步传输</h3><p>同步传输：数据库以稳定的比特流形式传输，字节之间没有间隔。接收端在每个比特信号的中间时刻进行检测，以判别接收到的是比特0还是比特1。由于不同设备的时钟周期存在差异，不能做到完全相同，在传输大量数据的过程中判别时刻的累计误差会导致接收端对比特信号的判别位置错位，因此需要采取方法使收发双方的时钟保持同步。</p>
<p>异步传输：使用异步传输方式时，以字节为独立的传输单位，字节之间的间隔时间不固定的(因此称为异步传输)。接收端仅在每个字节的起始处对字节内的比特实现同步。为此，通常要在每个字节的前后分别加上起始位和结束位。异步指的是字节之间异步。字节之间的时间间隔不固定。但是，字节中的每个比特依旧要同步，各个比特的持续时间要相同。</p>
<img src="/posts/e255a10a/2.3.2.png" class="" title="同步传输和异步传输">
<h3 id="2-3-3-单工、半双工、全双工通信"><a href="#2-3-3-单工、半双工、全双工通信" class="headerlink" title="2.3.3 单工、半双工、全双工通信"></a>2.3.3 单工、半双工、全双工通信</h3><p>单工通信：通信双方只有一个数据传输方向，只需要一条信道。例如无线电、广播。</p>
<p>半双工通信：通信双方有两个数据传输方向，但是不可以同时通信。需要两条信道。例如对讲机就是这种通信方式。</p>
<p>全双工通信：通信双方有两个数据传输方向，可以进行同时通信。需要两条信道。例如实时电话就是这种通信方式。</p>
<h2 id="2-4-编码与调制"><a href="#2-4-编码与调制" class="headerlink" title="2.4 编码与调制"></a>2.4 编码与调制</h2><img src="/posts/e255a10a/2.4.1.png" class="" title="编码与调制">
<p>编码：编码就是在不改变信号性质的情况下仅对数字基带信号的波形进行变换。编码后产生的信号仍为数字信号。可以在数字信道中传输。</p>
<p>调制：把数据基带信号的频率范围，搬移到较高的频段，并转换为模拟信号，称为调制。调制后产生模拟信号，在模拟信道中传输。</p>
<p>码元：构成信号的一段波形。</p>
<h3 id="2-4-1-常用编码"><a href="#2-4-1-常用编码" class="headerlink" title="2.4.1 常用编码"></a>2.4.1 常用编码</h3><img src="/posts/e255a10a/2.4.2.png" class="" title="常用编码">
<ul>
<li>不归零编码(NRZ)：在整个码元时间内，不会出现零电平。为了辨别码元个数，在发送信号时需要发送方和接收方做到严格的同步。一般需要额外一根传输线来传输时钟信号，实现同步的目的。接收方按照时钟信号的节拍来逐个接收码元。但是额外一根线资源造成浪费，在计算机网络中的数据传输一般不采用这类编码。</li>
<li>归零编码(RZ)：在传输过程中，每个码元传输结束后都要“归零”。因此接收方只要在信号归零后进行采样，而不需要单独的时钟信号。归零编码相当于把时钟信号用“归零”的方式放在了数据之内，看作一种自同步的信号。但是在传输过程中，大部分的数据带宽都用来传输零电平数据，造成资源浪费。编码效率低。</li>
<li>反向不归零编码(NRZI)：在码元时间内不会出现零电平。若后一个码元时间内所持续的电平与前一个码元时间内所持续的电平不同(也称为电平反转)则表示0，若电平保持不变则表示1。</li>
<li>曼彻斯特编码：在码元中间时刻会产生跳变，跳变的含义可以自己定义。例如由低电平到高电平代表1(或0)信号，由高电平到低电平代表0(或1)信号。码元中间时刻的跳变既代表时钟，又代表数据。传统以太网使用的就是曼彻斯特编码。</li>
<li>差分曼彻斯特编码：在差分曼彻斯特编码中间也有跳变，但是此跳变只代表时钟信号。具体的数据由码元开始处电平是否变化来表示。例如在码元结束和码元开始的时候电平做对比，有变化代表0(或1)，无变化代表1(或0)。</li>
</ul>
<h3 id="2-4-2-基本调制"><a href="#2-4-2-基本调制" class="headerlink" title="2.4.2 基本调制"></a>2.4.2 基本调制</h3><img src="/posts/e255a10a/2.4.3.png" class="" title="基本调制">
<ul>
<li>调幅：对基带信号的波幅进行调整，例如将上图的1信号波幅进行改变，在接收方读取时有载波输出为1。</li>
<li>调频：对基带信号频率进行调整，例如将0信号调制为频率f1，1信号调制为频率f2。</li>
<li>调相：对基带信号相位进行调制，例如将0信号的初相位调整为0度，1信号的初相位调整为180度。</li>
</ul>
<p>但是在以上基本调制方法中，1个码元只能包含1个比特信息。</p>
<h3 id="2-4-3-混合调制"><a href="#2-4-3-混合调制" class="headerlink" title="2.4.3 混合调制"></a>2.4.3 混合调制</h3><p>如果频率和相位混合调制，因为频率和相位是相关的，即频率是相位随时间的变化率。所以一次只能调制频率和相位两个中的一个。</p>
<p>通常情况下，相位和振幅可以结合起来一起调制，称为正交振幅调制QAM。</p>
<p>比如QAM-16，在QAM-16中有12种相位，每种相位有1或2种振幅可选择。</p>
<img src="/posts/e255a10a/2.4.5.png" class="" title="混合调制">
<p>由于此调制方法可以调制出16种码元，要完整的表示这16种情况，码元内是二进制数据，因此至少需要4个二进制数，也就是4个比特数据，因此在QAM-16调制方法中，每个码元可以表示4个比特数据。为了防止传输出错导致错误，相邻码元之间的对应关系使用格雷码(相邻二进制数只有一位不同)。</p>
<img src="/posts/e255a10a/2.4.4.png" class="" title="混合调制">
<h2 id="2-5-信道的极限容量"><a href="#2-5-信道的极限容量" class="headerlink" title="2.5 信道的极限容量"></a>2.5 信道的极限容量</h2><img src="/posts/e255a10a/2.5.1.png" class="" title="信号失真">
<p>在实际传输过程中由于通信质量的问题会导致传输信号被干扰，导致信号波形失去了码元之间的清晰界限，这种现象叫码间串扰。</p>
<h3 id="2-5-1-奈氏准则"><a href="#2-5-1-奈氏准则" class="headerlink" title="2.5.1 奈氏准则"></a>2.5.1 奈氏准则</h3><p>为了防止信道数据过大导致码间串扰，因此做出了信号极限容量的预测。其中最著名的就是奈氏准则。</p>
<p>奈氏准则：在假定的理想条件下，为了避免码间串扰，码元传输速率时有上限的。</p>
<img src="/posts/e255a10a/2.5.2.png" class="" title="奈氏准则">
<p><strong>奈氏准则计算公式</strong></p>
<p>理想低通(无噪声)信道下极限数据传输速率：</p>
<script type="math/tex; mode=display">
C=2W\log_2{V}</script><p>其中，C是数据传输速率（bit/s），W是信道带宽（Hz），V是信号状态数（可调制的不同波形的数量）。</p>
<h3 id="2-5-2-香农公式"><a href="#2-5-2-香农公式" class="headerlink" title="2.5.2 香农公式"></a>2.5.2 香农公式</h3><p>香农公式：带宽受限且有高斯白噪声干扰的信道的极限信息传输速率。</p>
<img src="/posts/e255a10a/2.5.3.png" class="" title="香农公式">
<p>在信道带宽一定的情况下，根据奈氏准则和香农公式，要想提高信息的传输速率就必须采用多元制(更好的调制方法)和努力提高信道中的信噪比。</p>
<script type="math/tex; mode=display">
数据传输速率(比特/秒)=波特率(码元传输速率，码元/秒)×每个码元携带的信息量(比特/码元)</script><h1 id="3-数据链路层"><a href="#3-数据链路层" class="headerlink" title="3. 数据链路层"></a>3. 数据链路层</h1><h2 id="3-1-数据链路层概述"><a href="#3-1-数据链路层概述" class="headerlink" title="3.1 数据链路层概述"></a>3.1 数据链路层概述</h2><p>数据链路层的功能：实现数据在一个网络之间的传输。</p>
<p>链路：从一个节点到一个相邻节点的一段物理线路，而中间没有任何其他交换节点。</p>
<p>数据链路：数据链路是把实现通信协议的硬件和软件加到链路上构成的。</p>
<p>数据链路以帧为单位传输和处理数据。</p>
<img src="/posts/e255a10a/3.1.1.png" class="" title="数据链路层的传输">
<h2 id="3-2-数据链路层的三个重要问题"><a href="#3-2-数据链路层的三个重要问题" class="headerlink" title="3.2 数据链路层的三个重要问题"></a>3.2 数据链路层的三个重要问题</h2><h3 id="3-2-1-封装成帧"><a href="#3-2-1-封装成帧" class="headerlink" title="3.2.1 封装成帧"></a>3.2.1 封装成帧</h3><img src="/posts/e255a10a/3.2.1.png" class="" title="封装成帧">
<p>封装成帧是把网络层交付的协议数据单元，添加帧头和帧尾的操作，称为封装成帧。主要目的是为了在链路上以帧为单元传输数据，从而实现数据链路层本身的功能。</p>
<p>封装后的MAC帧格式：</p>
<img src="/posts/e255a10a/3.2.2.png" class="" title="帧的格式">
<h3 id="3-2-2-差错检测"><a href="#3-2-2-差错检测" class="headerlink" title="3.2.2 差错检测"></a>3.2.2 差错检测</h3><p>差错检测：接收方主机收到帧后，通过检错码和检错算法，就可以判断出帧在传输过程中是否出现了误码。</p>
<p>在传输过程中可能会产生比特差错：1 可能会变成 0， 而 0 也可能变成 1。</p>
<img src="/posts/e255a10a/3.2.3.png" class="" title="差错检测">
<ol>
<li>发送方会基于发送的数据和检错算法计算出检错码，并放在帧尾。</li>
<li>接收方主机根据数据链路层放在帧尾的检错码和检错算法来判断传输过程是否有错误。</li>
<li>若接收方主机收到有误码的帧后，将该帧丢弃。</li>
</ol>
<h3 id="3-2-3-可靠传输"><a href="#3-2-3-可靠传输" class="headerlink" title="3.2.3 可靠传输"></a>3.2.3 可靠传输</h3><p>如果数据链路层向其上层提供的是不可靠服务，丢弃就丢弃了，不会有更多措施；如果数据链路层向其上层提供的是可靠服务，就还需要其它措施，确保接收方主机还可以重新收到被丢弃的这个帧的正确副本。</p>
<p>可靠传输是数据链路层中最基本、最重要的问题。</p>
<p>以上三个问题都是使用点对点信道的数据链路层来举例的。如果使用广播信道的数据链路层除了包含上面三个问题外，还有一些问题要解决：</p>
<ol>
<li><p>在发送信号过程中，如何识别是否发送的是给目的主机？</p>
<img src="/posts/e255a10a/3.2.4.png" class="" title="广播信道">
<p>在发送数据过程中，信号是以广播的形式发送，因此数据中需要带有发送主机和目的主机地址，来实现识别主机的目的。常用的解决方法是编址：将帧的目的地址添加在帧中一起传输。</p>
<img src="/posts/e255a10a/3.2.5.png" class="" title="MAC编址的帧">
</li>
<li><p>数据碰撞：在数据发送过程中可能出现有两个主机同时发送数据，就会造成数据碰撞。</p>
<img src="/posts/e255a10a/3.2.6.png" class="" title="数据碰撞">
<p>常用的解决方法就是控制协议：CSMA/CD。</p>
</li>
</ol>
<p>随着技术的发展，交换技术的成熟，在有线（局域网）领域使用点对点链路和链路层交换机的交换式局域网取代了共享式局域网，在无线局域网中仍然使用的是共享信道技术。</p>
<h2 id="3-3-封装成帧"><a href="#3-3-封装成帧" class="headerlink" title="3.3 封装成帧"></a>3.3 封装成帧</h2><p>(看3.2.1)</p>
<p>在物理层中会将构成帧的各比特，转换成电信号交给传输媒体，为了便于接收方数据链路层从物理层交付比特流中提取出一个一个的帧，因此需要帧头跟帧尾来做一个帧定界，来实现从比特流中提取出一个一个的帧。</p>
<img src="/posts/e255a10a/3.3.1.png" class="" title="PPP帧格式">
<p>例如在ppp帧的格式中，在帧头和帧尾各有一个帧定界标志，由1子节组成，其01111110和01111110所包裹的数据就是一个帧，数据链路层可以识别这个帧定界从而提取出一个帧。</p>
<p>但是也存在没有帧定界标志的数据链路层协议：比如MAC帧，该帧的提取由物理层添加的前导码来识别开始，并且按照稳定的时钟周期，在每一帧的结束会有96比特发送时间的间隔，以此来识别一个帧的结束。</p>
<p>前导码由两部分组成：前同步码，作用是使接收方的时钟同步；帧开始定界符，表明其后面紧跟着的就是MAC帧。</p>
<h3 id="3-3-1-透明传输"><a href="#3-3-1-透明传输" class="headerlink" title="3.3.1 透明传输"></a>3.3.1 透明传输</h3><p>透明传输：是指数据链路层对上层交付的传输数据没有任何限制，就好像数据链路层不存在一样。</p>
<img src="/posts/e255a10a/3.3.2.png" class="" title="透明传输">
<p>在传输数据过程中可能会出现数据比特流与帧定界标志符一样的情况，造成误读定界标志导致传输错误。在这种情况下，说明数据链路层对于数据有了一个要求：不能存在与定界符一样的数据编码。这就代表着对上层交付的数据有了限制，就不是透明传输了。因此为了实现透明传输，需要在数据链路层对数据进行处理。</p>
<p>在数据链路层中会对数据的处理来实现透明传输功能，例如：字节填充、比特填充，主要思路是在每一个传输数据中出现的定界符进行转义，防止误读。</p>
<p><strong>字节填充</strong>：在面向字节的物理链路中适用。主要步骤：</p>
<ol>
<li>通过在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(其十六进制编码是1B)。</li>
<li>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。</li>
<li>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。</li>
</ol>
<p><strong>比特填充</strong>：适用于面向比特传输的物理链路。主要步骤：</p>
<ol>
<li>在数据链路层中发送帧前扫描帧的数据部分，若出现连续的5个1，将在5个1后插入1个0(因为帧定界标志符为01111110)。</li>
<li>在接收方数据链路层接收帧时，将帧的数据部分中的每5个1后面的0剔除即可。</li>
</ol>
<p>为了提高帧的传输效率，应当使帧的数据部分的长度尽可能大些。但考虑到差错控制等多种因素，每一种数据链路层协议都规定了帧的数据部分的长度上限，即最大传送单元(MTU，Maxinum Transfer Unit)。</p>
<h2 id="3-4-差错检测"><a href="#3-4-差错检测" class="headerlink" title="3.4 差错检测"></a>3.4 差错检测</h2><p>(看3.2.2)</p>
<p>比特差错：实际的通信链路都不是理想的，比特在传输过程中可能会产生差错: 1可能会变成0，而0也可能变成1。</p>
<p>误码率(BER)：在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率(BER，Bit Error Rate)</p>
<p>差错检测码(FCS)：使用差错检测码来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一。</p>
<h3 id="3-4-1-奇偶校验"><a href="#3-4-1-奇偶校验" class="headerlink" title="3.4.1 奇偶校验"></a>3.4.1 奇偶校验</h3><img src="/posts/e255a10a/3.4.1.png" class="" title="奇偶校验">
<p>由于奇偶校验的漏检率比较高，因此一般在数据链路层中不使用。</p>
<h3 id="3-4-2-循环冗余校验-CRC，Cyclic-Redundancy-Check"><a href="#3-4-2-循环冗余校验-CRC，Cyclic-Redundancy-Check" class="headerlink" title="3.4.2 循环冗余校验(CRC，Cyclic Redundancy Check)"></a>3.4.2 循环冗余校验(CRC，Cyclic Redundancy Check)</h3><p>循环冗余检验是一种可靠性非常高的校验方法。</p>
<img src="/posts/e255a10a/3.4.2.png" class="" title="CRC">
<img src="/posts/e255a10a/3.4.3.png" class="" title="CRC">
<img src="/posts/e255a10a/3.4.5.png" class="" title="CRC">
<img src="/posts/e255a10a/3.4.4.png" class="" title="CRC">
<img src="/posts/e255a10a/3.4.6.png" class="" title="CRC">
<h2 id="3-5-可靠传输"><a href="#3-5-可靠传输" class="headerlink" title="3.5 可靠传输"></a>3.5 可靠传输</h2><p>(看3.2.3)</p>
<h3 id="3-5-1-可靠传输基本概念"><a href="#3-5-1-可靠传输基本概念" class="headerlink" title="3.5.1 可靠传输基本概念"></a>3.5.1 可靠传输基本概念</h3><p>使用差错检测技术(例如循环冗余校验CRC)，接收方的数据链路层就可检测出帧在传输过程中是否产生了误码(比特错误)。</p>
<p>数据链路层向上层提供的服务类型：</p>
<ul>
<li>不可靠传输服务：仅仅丢弃有误码的帧，其他什么也不做；</li>
<li>可靠传输服务：想办法实现发送端发送什么，接收端就收到什么。</li>
</ul>
<p>一般情况下，有线链路的误码率比较低，为了减小开销，并不要求数据链路层向上提供可靠传输服务。即使出现了误码，可靠传输的问题由其上层处理。无线链路易受干扰，误码率比较高，因此要求数据链路层必须向上层提供可靠传输服务。</p>
<p>比特差错只是传输差错中的一种。从整个计算机网络体系结构来看，传输差错还包括分组丢失、分组失序以及分组重复。</p>
<ul>
<li>分组丢失：路由器输入队列由于空间不足，主动丢弃收到的分组，造成分组丢失。</li>
<li>分组失序：由于传输过程中选择失序的问题，接收方实际收到的数据与发送方发送的分组顺序不同造成分组失序。</li>
<li>分组重复：分组在传输过程中由于某种原因在线路中滞留，导致一定时间内没有到达接收方，触发发送方超时重传机制，最终导致接收方收到了两个相同分组，造成分组重复。</li>
</ul>
<p>分组丢失、分组失序以及分组重复这些传输差错，一般不会出现在数据链路层，而会出现在其上层。因此可靠传输服务并不仅局限于数据链路层，其它各层均可选择实现可靠传输。</p>
<img src="/posts/e255a10a/3.5.1.png" class="" title="可靠传输">
<p>TCP/IP体系结构中的以太网便不要求数据链路层实现可靠传输。</p>
<p>可靠传输的实现比较复杂，开销也比较大，是否使用可靠传输取决于应用需求。</p>
<h3 id="3-5-2-三种可靠传输实现机制"><a href="#3-5-2-三种可靠传输实现机制" class="headerlink" title="3.5.2 三种可靠传输实现机制"></a>3.5.2 三种可靠传输实现机制</h3><p>可靠传输服务并不局限于数据链路层，在其他各层协议均可选择实现。</p>
<h4 id="3-5-2-1-停止-等待协议-SW，Stop-and-Wait"><a href="#3-5-2-1-停止-等待协议-SW，Stop-and-Wait" class="headerlink" title="3.5.2.1 停止-等待协议(SW，Stop and Wait)"></a>3.5.2.1 停止-等待协议(SW，Stop and Wait)</h4><p>停止-等待协议：发送方每发送一个分组，就停止发送并等待接收方的确认分组。当收到接收方的确认分组后，才能发送下一个数据分组，如此反复进行。</p>
<p>停止-等待协议有4个最基本原则：</p>
<img src="/posts/e255a10a/3.5.2.1.png" class="" title="停止-等待协议">
<ol>
<li><p>确认与否认。在每个数据发送后，接收方接到后会发送ACK(确认)信号确认无误收到，发送方收到ACK信号后便开始发送下一个数据。</p>
<p>接收方检测收到数据出现误码后，会发送NAK(否认)信号，发送方接收到NAK信号后会重新发送缓存区中的数据。</p>
<p>因此，在此过程中，发送方与接收方一直处于一种停止等待对方的过程，在此过程中要进行确认与否认，这也是停止-等待协议的最基本原则。</p>
</li>
<li><p>超时重传。此原则可以避免当数据传输过程中出现丢失，导致接收方一直等不到数据传送到达，而发送方又在等待接收方发送确认信号，系统处于互等的请况。</p>
<p>为解决该问题，可以在发送方发送完一个数据分组时，启动一个超时计时器。若到了超时计时器所设置的重传时间而发送方仍收不到接收方的任何ACK或NAK，则重传原来的数据分组，这就叫超时重传。</p>
<p>一般可将重传时间选为略大于“从发送方到接收方的平均往返时间”。</p>
</li>
<li><p>确认丢失。此原则可以避免接收方发送ACK信号后，由于传输问题出现ACK信号丢失，导致发送方没收到确认信号，重传分组，此时接收方重新接收到一样的分组，造成分组重复错误。</p>
<p>为避免分组重复这种传输错误，必须给每个分组带上序号。对于停止-等待协议，由于每发送一个数据分组就停止等待，只要保证发送一个新的数据分组，其发送序号与上次发送的数据分组序号不同即可，因此用一个比特来编号就足够了。</p>
</li>
<li><p>确认迟到。此原则可以避免接收方发送ACK信号后，由于传输问题出现ACK信号迟到，导致发送方没收到确认信号，重传分组，下一时刻ACK到达，开始传输下一个分组，但是此时超时重传的分组已经发送出去，接收方接收到后会发送一个一样的ACK信号。</p>
<p>所以同样需要给ACK或NAK信号编号。但在点对点通信中，传输的时钟周期比较固定，很少出现确认迟到的情况，可以不用给确认分组编号。</p>
</li>
</ol>
<p><strong>注意事项</strong>：</p>
<ul>
<li>接收端检测到数据分组有误码时，将其丢弃并等待发送方的超时重传。但对于误码率较高的点对点链路，为使发送方尽早重传，也可给发送方发送NAK分组。</li>
<li>为了让接收方能够判断所收到的数据分组是否是重复的，需要给数据分组编号。由于停止-等待协议的停等特性，只需1个比特编号就够了，即编号0和1。</li>
<li>为了让发送方能够判断所收到的ACK分组是否是重复的，需要给ACK分组编号，所用比特数量与数据分组编号所用比特数量一样。</li>
<li>点对点信道的数据链路层一般不会出现ACK分组迟到的情况，因此在数据链路层实现停止-等待协议可以不用给ACK分组编号。</li>
<li>超时计时器设置的重传时间应仔细选择。一般可将重传时间选为略大于“从发送方到接收方的平均往返时间”。<ul>
<li>在数据链路层点对点的往返时间比较确定，重传时间比较好设定。</li>
<li>然而在运输层，由于端到端往返时间非常不确定，设置合适的重传时间有时并不容易。</li>
</ul>
</li>
</ul>
<p><strong>停止-等待协议的信道利用率</strong></p>
<p>信道利用率就是发送方发送时延占据整个事件比例。</p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="2.834ex" height="1.871ex" role="img" focusable="false" viewBox="0 -677 1252.5 827"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g></g></g></g></svg></mjx-container>：数组分组的发送时延</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.345ex" xmlns="http://www.w3.org/2000/svg" width="2.709ex" height="1.877ex" role="img" focusable="false" viewBox="0 -677 1197.3 829.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(617,-152.7) scale(0.707)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g></g></g></g></svg></mjx-container>：接收方主机的处理时延</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.048ex" xmlns="http://www.w3.org/2000/svg" width="4.903ex" height="1.593ex" role="img" focusable="false" viewBox="0 -683 2167 704"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mi" transform="translate(759,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(1463,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g></g></svg></mjx-container>：往返时延</li>
</ul>
<p>则停止-等待协议的信道利用率计算公式<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="1.735ex" height="1.595ex" role="img" focusable="false" viewBox="0 -683 767 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g></g></g></svg></mjx-container>为：</p>
<script type="math/tex; mode=display">
U=\frac{T_D}{T_D+RTT+T_A}</script><img src="/posts/e255a10a/3.5.2.2.png" class="" title="信道利用率">
<p>当往返时延RTT远大于数据帧发送时延TD时(卫星链路)，信道利用率非常低。若出现超市重传，信道利用率更低，因此就出现了另外两种协议：回退N帧协议GBN、选择重传协议SR。</p>
<h4 id="3-5-2-2-回退N帧协议-GBN，Go-Back-N"><a href="#3-5-2-2-回退N帧协议-GBN，Go-Back-N" class="headerlink" title="3.5.2.2 回退N帧协议(GBN，Go-Back-N)"></a>3.5.2.2 回退N帧协议(GBN，Go-Back-N)</h4><p>回退N帧协议可以理解为停止等待协议的一种优化，在相同的时间内，使用停止-等待协议的发送方只能发送一个数据分组，而采用流水线传输的发送方，可以发送多个数据分组。</p>
<img src="/posts/e255a10a/3.5.2.3.png" class="" title="回退N帧协议">
<p>回退N帧协议在流水线传输的基础上，利用发送窗口限制发送方可连续发送数据分组的个数。</p>
<ol>
<li>使用3个比特给分组编序号，0~7</li>
<li>发送窗口的尺寸<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="3.45ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 1524.8 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g></g></g></svg></mjx-container>取值：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="16.631ex" height="2.224ex" role="img" focusable="false" viewBox="0 -833.2 7350.9 983.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="msub" transform="translate(1833.6,0)"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mo" transform="translate(3636.1,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="msup" transform="translate(4691.9,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(533,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(5850.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(6850.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container>，本例取<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="7.598ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 3358.4 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mo" transform="translate(1802.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2858.4,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g></g></g></svg></mjx-container></li>
<li>接收窗口<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.373ex" xmlns="http://www.w3.org/2000/svg" width="3.538ex" height="1.918ex" role="img" focusable="false" viewBox="0 -683 1563.7 847.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g></g></g></g></svg></mjx-container>的取值：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.373ex" xmlns="http://www.w3.org/2000/svg" width="7.686ex" height="1.918ex" role="img" focusable="false" viewBox="0 -683 3397.2 847.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g></g><g data-mml-node="mo" transform="translate(1841.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2897.2,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container></li>
</ol>
<p>当<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="7.598ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 3358.4 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mo" transform="translate(1802.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2858.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container>为停止-等待协议SW。 </p>
<p><strong>对于发送过程无差错情况</strong>：</p>
<img src="/posts/e255a10a/3.5.2.4.png" class="" title="无差错情况">
<p>发送方将序号落在发送窗口内的0~4号数据分组，依次连续发送出去。分组经过互联网传输正确到达接收方，没有乱序和误码，接收方按序接收它们，每接收一个，接收窗口就向前滑动一个位置，并给发送方发送针对所接收分组的确认分组，在通过互联网的传输正确到达了发送方。发送方每接收一个，发送窗口就向前滑动一个位置，这样就有新的序号落入发送窗口，发送方可以将收到确认的数据分组从缓存中删除了，而接收方可以择机将已接收的数据分组交付上层处理。</p>
<p>累计确认：接收方不一定要对收到的数据分组逐个发送确认，而可以在收到几个数据分组后(由具体实现)，对按序到达的最后一个数据分组发送确认，ACKn表示序号为n及以前的所有数据分组都已正确接收。比如即使 ACK1丢失了，也有ACK4来确认，发送方也可能不必重传。</p>
<ul>
<li>累计确认的优点：减少接收方的开销，减少对网络资源的占用。</li>
<li>累计确认的缺点：不能向发送方及时发送接收方正确接受数据分组的信息。</li>
</ul>
<p><strong>对于有差错情况</strong>：</p>
<img src="/posts/e255a10a/3.5.2.5.png" class="" title="有差错情况">
<img src="/posts/e255a10a/3.5.2.6.png" class="" title="有差错情况">
<p>在传输过程中，5号数据分组出现错误，接收方在接收5号分组时通过其检错码发现了错误，于是丢弃该分组。而后续到达的分组通过对比序号发现序号不匹配，接收方就选择不接受它们，将它们丢弃，并且回传按序接受的最后一个正确数据分组，发送ACK4，每丢弃一个分组就发送一个最后正确数据分组信号。</p>
<img src="/posts/e255a10a/3.5.2.7.png" class="" title="有差错情况">
<p>在本例中，尽管序号为6,7,0,1的数据分组正确到达接收方，但由于5号数据分组误码不被接受，它们也“受到牵连”而不被接受。发送方还要重传这些数据分组，这就是所谓的 Go-back-N (回退N帧)。可见，当通信线路质量不好时，回退N帧协议的信道利用率并不比停止-等待协议高。</p>
<p>回退N帧协议在流水线传输的基础上利用发送窗口来限制发送方连续发送数据分组的数量，是一种连续自动重传请求(ARQ，Automatic Repeat-reQuest)协议。在协议的工作过程中发送窗口和接收窗口不断向前滑动，因此这类协议又称为滑动窗口协议。</p>
<img src="/posts/e255a10a/3.5.2.8.png" class="" title="超过Wt范围上限">
<p>在实际传输过程中，假设所有的分组都被接收，此时发送一个ACK7，但是ACK7在传输过程中丢失。此时发送方到一定时间后触发超时重传机制，重新发送0~7编号分组。此时接送方接收到后，会比对分组序号，发现分组序号符合当前窗口选择接收。但是此时0~7分组实际上已经接收过了，出现了分组重复差错。</p>
<img src="/posts/e255a10a/3.5.2.9.png" class="" title="GBN">
<p>回退N帧协议的缺点：一个数据分组的误码就会导致其后续多个数据分组不能被接收方接收而丢弃，尽管它们没有误码。这必然会导致发送方对这些数据分组的超时重传，对通信资源造成极大浪费。基于此，为了进一步提高传输性能，就提出了选择重传协议SR。</p>
<h4 id="3-5-2-3-选择重传协议-SR，Selective-Request"><a href="#3-5-2-3-选择重传协议-SR，Selective-Request" class="headerlink" title="3.5.2.3 选择重传协议(SR，Selective Request)"></a>3.5.2.3 选择重传协议(SR，Selective Request)</h4><p>为了进一步提高性能，可设法只重传出现误码的数据分组。因此，接收窗口的尺寸<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.373ex" xmlns="http://www.w3.org/2000/svg" width="3.538ex" height="1.918ex" role="img" focusable="false" viewBox="0 -683 1563.7 847.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g></g></g></g></svg></mjx-container>不应再等于1(而应大于1)，以便接收方先收下失序到达但无误码并且序号落在接收窗口内的那些数据分组，等到所缺分组收齐后再一并送交上层。这就是选择重传协议。</p>
<p>注意：选择重传协议为了使发送方仅重传出现差错的分组，接收方不再采用累计确认，而需要对每个正确接收到的数据分组进行逐一确认。</p>
<ol>
<li>使用3个比特给分组编序号，0~7</li>
<li>发送窗口的尺寸<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="3.45ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 1524.8 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g></g></g></svg></mjx-container>取值：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="16.631ex" height="2.224ex" role="img" focusable="false" viewBox="0 -833.2 7350.9 983.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="3C" d="M694 -11T694 -19T688 -33T678 -40Q671 -40 524 29T234 166L90 235Q83 240 83 250Q83 261 91 266Q664 540 678 540Q681 540 687 534T694 519T687 505Q686 504 417 376L151 250L417 124Q686 -4 687 -5Q694 -11 694 -19Z"></path></g><g data-mml-node="msub" transform="translate(1833.6,0)"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mo" transform="translate(3636.1,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="msup" transform="translate(4691.9,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(533,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(5850.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(6850.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container>，本例取<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="7.598ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 3358.4 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mo" transform="translate(1802.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2858.4,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g></g></g></svg></mjx-container></li>
<li>接收窗口<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.373ex" xmlns="http://www.w3.org/2000/svg" width="3.538ex" height="1.918ex" role="img" focusable="false" viewBox="0 -683 1563.7 847.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g></g></g></g></svg></mjx-container>的取值：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.373ex" xmlns="http://www.w3.org/2000/svg" width="14.153ex" height="1.918ex" role="img" focusable="false" viewBox="0 -683 6255.6 847.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g></g><g data-mml-node="mo" transform="translate(1841.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(2897.2,0)"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g><g data-mml-node="mo" transform="translate(4699.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5755.6,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g></g></g></svg></mjx-container></li>
</ol>
<p>选择重传协议的基本流程：</p>
<ol>
<li><p>发送方将发送窗口内分组0123发送给接收方，且此时2号分组出现丢失。</p>
<img src="/posts/e255a10a/3.5.2.10.png" class="" title="SR">
</li>
<li><p>接收方能正确接收0，1序号分组，并且发送ACK0，ACK1。并且此时接收窗口向前滑动。</p>
<img src="/posts/e255a10a/3.5.2.11.png" class="" title="SR">
</li>
<li><p>接收方接收3号数据分组，并且发送ACK3，但是由于此时2号分组没有收到，不能向后滑动窗口，只能继续接收剩余窗口。此时发送方会对发送窗口中的3号数据做已确认标记，防止超时重发。</p>
<img src="/posts/e255a10a/3.5.2.12.png" class="" title="SR">
</li>
<li><p>此时发送方收到ACK0，ACK1将窗口向后滑动，并且将4，5号数据发送出去。</p>
</li>
<li><p>接收方接收到4，5号分组后，回传ACK4，ACK5。</p>
<img src="/posts/e255a10a/3.5.2.13.png" class="" title="SR">
</li>
<li><p>2号数据触发超时重传机制，此时将2号数据发送过去，接收方接收到后回传ACK2，并且此接收方有序并且已确认分组已经连续，向后滑动窗口。</p>
</li>
<li><p>发送方接收到ACK2信号后，所有发送窗口都满足确认，并且已经连续，发送窗口也向后滑动。</p>
</li>
<li><p>重复上述过程，直至完成所有分组的传输。</p>
</li>
</ol>
<p>如果发送窗口和接收窗口超过了取值范围，就会使接收方无法区分新、旧数据分组，进而出现分组重复这种差错。</p>
<img src="/posts/e255a10a/3.5.2.15.png" class="" title="分组重复">
<img src="/posts/e255a10a/3.5.2.16.png" class="" title="SR总结">
<h2 id="3-6-点对点协议-PPP"><a href="#3-6-点对点协议-PPP" class="headerlink" title="3.6 点对点协议(PPP)"></a>3.6 点对点协议(PPP)</h2><p>点对点协议(PPP，Point-to-Point Protocol)是目前使用最广泛的点对点数据链路层协议。</p>
<p>PPP协议是数据链路层使用的一种协议，它的特点是：简单；只检测差错，而不是纠正差错；不使用序号，也不进行流量控制；可同时支持多种网络层协议。</p>
<p>PPP协议为在点对点链路传输各种协议数据报提供了一个标准方法，主要由以下三部分构成：</p>
<ul>
<li>对各种协议数据报的封装方法(封装成帧)</li>
<li>链路控制协议(LCP)：用于建立、配置以及测试数据链路的连接</li>
<li>一套网络控制协议(NCPs)：其中的每一个协议支持不同的网络层协议</li>
</ul>
<h3 id="3-6-1-PPP的帧格式"><a href="#3-6-1-PPP的帧格式" class="headerlink" title="3.6.1 PPP的帧格式"></a>3.6.1 PPP的帧格式</h3><img src="/posts/e255a10a/3.5.3.1.png" class="" title="PPP的帧格式">
<h3 id="3-6-2-点对点协议透明传输"><a href="#3-6-2-点对点协议透明传输" class="headerlink" title="3.6.2 点对点协议透明传输"></a>3.6.2 点对点协议透明传输</h3><p>PPP实现透明传输的两种方法：</p>
<ul>
<li>面向字节的异步链路采用插入转义字符的字节填充法</li>
<li>面向比特的同步链路采用插入比特 0 的比特填充法</li>
</ul>
<img src="/posts/e255a10a/3.5.3.2.png" class="" title="异步链路透明传输">
<img src="/posts/e255a10a/3.5.3.3.png" class="" title="同步链路透明传输">
<h3 id="3-6-3-差错检测"><a href="#3-6-3-差错检测" class="headerlink" title="3.6.3 差错检测"></a>3.6.3 差错检测</h3><img src="/posts/e255a10a/3.5.3.4.png" class="" title="差错检测">
<h3 id="3-6-4-工作状态"><a href="#3-6-4-工作状态" class="headerlink" title="3.6.4 工作状态"></a>3.6.4 工作状态</h3><img src="/posts/e255a10a/3.5.3.5.png" class="" title="工作状态">
<h2 id="3-7-媒体接入控制-MAC"><a href="#3-7-媒体接入控制-MAC" class="headerlink" title="3.7 媒体接入控制(MAC)"></a>3.7 媒体接入控制(MAC)</h2><h3 id="3-7-1-基本概念"><a href="#3-7-1-基本概念" class="headerlink" title="3.7.1 基本概念"></a>3.7.1 基本概念</h3><p>数据媒体接入控制(MAC，Medium Access Control)，其要着重考虑的问题就是如何协调多个发送和接收站对一个个共享传输媒体的占用，也就是解决冲突的问题。</p>
<img src="/posts/e255a10a/3.5.4.1.png" class="" title="MAC">
<p>随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在有线领域已完全取代了共享式局域网，但由于无线信道的广播天性，无线局域网仍然使用的是共享媒体技术。</p>
<h3 id="3-7-2-静态划分信道"><a href="#3-7-2-静态划分信道" class="headerlink" title="3.7.2 静态划分信道"></a>3.7.2 静态划分信道</h3><p>预先固定分配好信道，这类方法非常不灵活，对于突发性数据传输信道利用率会很低。通常在无线网络的物理层中使用，而不是在数据链路层中使用。</p>
<p>复用是通信技术中的一个重要概念，复用就是通过一条物理线路同时传输多路用户的信号。当网络中传输媒体的传输容量大于多条单一信道的总通信量时，就可以利用复用技术在一条物理线路上建立多条通信信道来充分利用传输媒体的带宽。</p>
<p>常用的复用技术有4种：频分复用FDM、时分复用TDM、波分复用WDM、码分复用CDM。</p>
<h4 id="3-7-2-1-频分复用FDM"><a href="#3-7-2-1-频分复用FDM" class="headerlink" title="3.7.2.1 频分复用FDM"></a>3.7.2.1 频分复用FDM</h4><p>频分复用FDM：将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。</p>
<p>频分复用的所有用户在同样的时间占用不同的带宽资源（注意，这里的“带宽”是频率带宽而不是数据的发送速率）。</p>
<p>接收端通过相应的分用器通过滤波将各路信号分开。将合成的复用信号恢复成原始的多路信号。</p>
<img src="/posts/e255a10a/3.5.4.2.1.png" class="" title="频分复用FDM">
<h4 id="3-7-2-2-时分复用TDM"><a href="#3-7-2-2-时分复用TDM" class="headerlink" title="3.7.2.2 时分复用TDM"></a>3.7.2.2 时分复用TDM</h4><ul>
<li>将时间划分成一个个的时间间隙。</li>
<li>时分复用技术将传输线路的带宽资源按一个个的时间间隙轮流分配给不同的用户。</li>
<li>每个用户只在所分配的时隙里使用线路传输数据。</li>
</ul>
<img src="/posts/e255a10a/3.5.4.2.2.png" class="" title="时分复用TDM">
<ul>
<li>时分复用是将时间划分为一段段等长的时分复用帧（TDM帧）。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。</li>
<li>每一个用户所占用的时隙是周期性地出现（其周期就是TDM帧的长度）的。</li>
<li>TDM 信号也称为等时 (isochronous) 信号。</li>
<li>时分复用的所有用户在不同的时间占用同样的频带宽度。</li>
</ul>
<h4 id="3-7-2-3-波分复用WDM"><a href="#3-7-2-3-波分复用WDM" class="headerlink" title="3.7.2.3 波分复用WDM"></a>3.7.2.3 波分复用WDM</h4><p>波分复用就是光的频分复用。</p>
<p>光信号传输一段距离后会衰减，所以要用掺铒光纤放大器放大光信号。</p>
<img src="/posts/e255a10a/3.5.4.2.3.png" class="" title="波分复用WDM">
<h4 id="3-7-2-4-码分复用CDM"><a href="#3-7-2-4-码分复用CDM" class="headerlink" title="3.7.2.4 码分复用CDM"></a>3.7.2.4 码分复用CDM</h4><p>码分复用，由于该技术主要用于多址接入，人们更常用的名词时码分多址CDMA（Code Division Multiple Access）</p>
<p>同理：频分复用（FDM）和时分复用（TDM）都可用于多址接入，相应的名词是频分多址（FDMA）和时分多址（TMDA）。</p>
<p>复用和多址的区别：</p>
<img src="/posts/e255a10a/3.5.4.2.4.png" class="" title="复用和多址的区别">
<p>与FDM和TDM不同，CDM的每一个用户可以在同样的时间使用同样的频带进行通信。</p>
<p>由于各用户经过特殊挑选的不同码型，因此个用户之间不会造成干扰。</p>
<p>CDM最初是用于军事通信的，因此这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易于被敌人发现。随着技术的进步，CDMA设备的价格和体积都大幅度下降，因为现在已广泛用于民用的移动通信中。</p>
<p>在CDMA中，每一个比特时间再划分为m个短的间隔，称为码片(Chip)。通常m=64或128。为了简单起见，在后续的举例中，假设m为8。(注意：1个比特时间是指发送1个比特所花费的时间)</p>
<p>使用CDMA的每一个站被指派一个唯一的m bit码片序列(Chip Sequence)。</p>
<ul>
<li>一个站如果要发送比特1，则发送它自己的m bit码片序列</li>
<li>一个站如果要发送比特0，则发送它自己的m bit码片序列的二进制反码</li>
</ul>
<img src="/posts/e255a10a/3.5.4.2.5.png" class="" title="码片举例">
<p>这种通信方式称为序列扩频DSSS。</p>
<p>码片序列的挑选原则如下:</p>
<ul>
<li><p>分配给每个站的码片序列必须各不相同，实际常采用伪随机码序列。</p>
</li>
<li><p>分配给每个站的码片序列必须相互正交(规格化内积为0)。</p>
<p>令向量 S 表示站 S 的码片序列，令向量 T 表示其他任何站的码片序列</p>
<p>两个不同站 S 和 T 的码片序列正交，就是向量 S 和 T 的规格化内积为 0</p>
<script type="math/tex; mode=display">
S·T\equiv\frac 1m\sum_{i=1}^mS_iT_i=0\\
S·\overline T\equiv\frac1m\sum_{i=1}^mS_i\overline T_i=0\\
S·S\equiv\frac1m\sum_{i=1}^mS_iS_i=\frac1m\sum_{i=1}^mS_i^2=\frac1m\sum_{i=1}^m(±1)^2=1\\
S·\overline S\equiv\frac1m\sum_{i=1}^mS_i\overline S_i=-1</script></li>
</ul>
<img src="/posts/e255a10a/3.5.4.2.6.png" class="" title="习题1">
<img src="/posts/e255a10a/3.5.4.2.7.png" class="" title="习题2">
<img src="/posts/e255a10a/3.5.4.2.8.png" class="" title="习题2">
<img src="/posts/e255a10a/3.5.4.2.9.png" class="" title="习题3">
<h3 id="3-7-3-动态接入控制"><a href="#3-7-3-动态接入控制" class="headerlink" title="3.7.3 动态接入控制"></a>3.7.3 动态接入控制</h3><p>对于动态接入控制，我们主要关注随机接入。</p>
<p>最初的以太网是将许多计算机都连接到一根总线上。易于实现广播通信。当初认为这样的连接方法既简单又可靠，因为总线上没有源器件。</p>
<img src="/posts/e255a10a/3.5.4.3.1.png" class="" title="碰撞">
<p>但是在多个主机共用一个总线时，避免不了会出现碰撞的问题。如何协调总线各个主机的工作，尽量避免碰撞是一个必须解决的重要问题。因此就出现了载波监听多址接入/碰撞检测 CSMA/CD协议，用于解决碰撞问题。</p>
<p>随机接入分为总线型局域网和无线型局域网。总线型局域网使用的是CSMA/CD协议。无线型局域网使用的是CSMA/CA协议。</p>
<h4 id="3-7-3-1-CSMA-CD协议"><a href="#3-7-3-1-CSMA-CD协议" class="headerlink" title="3.7.3.1 CSMA/CD协议"></a>3.7.3.1 CSMA/CD协议</h4><p>载波监听多址接入/碰撞检测(CSMA/CD，Carrier Sense Multiple Access/Collision Detection)</p>
<ol>
<li><p>多址接入(MA)：多个站连接在一条总线上，竞争使用总线</p>
</li>
<li><p>载波监听(CS)：每一个站在发送帧之前先要检测一下总线上是否有其它站点在发送帧（“先听后说”）</p>
<ul>
<li>若检测到总线空闲 96 比特时间，则发送这个帧</li>
<li>若检测到总线忙，则继续检测并等待总线转为空闲 96 比特时间，然后发送这个帧</li>
</ul>
<p>其中，96比特时间是发送96比特需要的时间(帧间最小间隔)，其作用是可以检测出一个帧的结束。</p>
<img src="/posts/e255a10a/3.5.4.3.2.png" class="" title="载波监听">
<p>但是实际上，总线上并没有什么“载波”。因此， “载波监听”就是用电子技术检测总线上有没有其它计算机发送的数据信号。</p>
</li>
<li><p>碰撞检测(CD)：每一个正在发送帧的站边发送边检测碰撞（“边说边听”）</p>
<ul>
<li>一旦发现总线上出现碰撞，则立即停止发送，退避一段随机时间后再次发送(“一旦冲突，立即停说，等待时机，重新再说”)</li>
</ul>
<img src="/posts/e255a10a/3.5.4.3.3.png" class="" title="碰撞检测">
<p>“碰撞检测”就是计算机边发送数据边检测信道上的信号电压大小。当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大(互相叠加)。当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞。所谓“碰撞”就是发生了冲突。因此碰撞检测也称冲突检测。在发生碰撞时，总线上传输的信号产生了严重的失真，无法从中恢复出有用的信息来。</p>
</li>
</ol>
<p><strong>争用期(碰撞窗口)</strong></p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.029ex" xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></g></g></g></svg></mjx-container>：以太网单程端到端传播时延。</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex" xmlns="http://www.w3.org/2000/svg" width="1.005ex" height="1.645ex" role="img" focusable="false" viewBox="0 -717 444 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path></g></g></g></svg></mjx-container>：站发送数据到站检测到碰撞所经历的一段时间。</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="0.817ex" height="1.441ex" role="img" focusable="false" viewBox="0 -626 361 637"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g></g></svg></mjx-container>：纵轴向下，时间的正向进行。</li>
<li>电磁波在 1km 电缆传播时延约等于 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex" xmlns="http://www.w3.org/2000/svg" width="2.495ex" height="1.995ex" role="img" focusable="false" viewBox="0 -666 1103 882"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></g></g></g></svg></mjx-container>s</li>
</ul>
<img src="/posts/e255a10a/3.5.4.3.4.png" class="" title="碰撞窗口">
<p>由图可以看出，当发生碰撞时，最长需要<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.029ex" xmlns="http://www.w3.org/2000/svg" width="2.301ex" height="1.536ex" role="img" focusable="false" viewBox="0 -666 1017 679"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></g></g></g></svg></mjx-container>的时间就能检测到本次是否发生碰撞（也就是碰撞点在最远端）。因此，以太网中，端到端的往返传播时延<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.029ex" xmlns="http://www.w3.org/2000/svg" width="2.301ex" height="1.536ex" role="img" focusable="false" viewBox="0 -666 1017 679"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></g></g></g></svg></mjx-container>称为争用期或碰撞窗口。也就是说在这段时间才有可能发生碰撞，若这段时间没有发生碰撞，则不再会发生碰撞。</p>
<p>每一个主机在自己发送帧之后的一小段时间内，存在着遭遇碰撞的可能性。这一小段时间是不确定的。它取决于另一个发送帧的主机到本主机的距离，但不会超过总线的端到端往返传播时延，即一个争用期时间。</p>
<p>显然，在以太网中发送帧的主机越多，端到端往返传播时延越大，发生碰撞的概率就越大。因此，共享式以太网不能连接太多的主机，使用的总线也不能太长。</p>
<ul>
<li>10Mb/s以太网把争用期定为 512 比特发送时间，即<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex" xmlns="http://www.w3.org/2000/svg" width="6.448ex" height="1.995ex" role="img" focusable="false" viewBox="0 -666 2850 882"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(1000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1278,0)"></path></g><g data-mml-node="mi" transform="translate(1778,0)"><path data-c="1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></g><g data-mml-node="mi" transform="translate(2381,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g></g></svg></mjx-container>，因此其总线长度不能超过 5120m，但考虑到其他一些因素，如信号衰减等，以太网规定总线长度不能超过 2500m。</li>
</ul>
<p><strong>最小帧长</strong></p>
<img src="/posts/e255a10a/3.5.4.3.5.png" class="" title="最小帧长">
<p>A站发送一个帧完毕后，不再针对该帧进行碰撞检测，而这时候C站检测到信道空闲时间 96 bit，发送帧，将产生碰撞。D站收到碰撞过后有差错的帧，将该帧丢弃。A站不知道已发送完毕的帧遭遇碰撞，所以不进行重传。显然，以太网的帧长不能太短！</p>
<ul>
<li>以太网规定最小帧长为64字节，即512比特（512比特时间即为争用期）<ul>
<li>如果要发送的数据非常少，那么必须加入一些填充字节，使帧长不小于64字节。</li>
</ul>
</li>
<li>以太网的最小帧长确保了主机可在帧发送完成之前就检测到该帧的发送过程中是否遭遇了碰撞<ul>
<li>如果在争用期（共发送64字节）没有检测到碰撞，那么后续发送的数据就一定不会发生碰撞；</li>
<li>如果在争用期内检测到碰撞，就立即中止发送，这时已经发送出去的数据一定小于64字节，因此凡长度小于64字节的帧都是由于碰撞而异常中止的无效帧。</li>
</ul>
</li>
</ul>
<p>最小帧长的计算：</p>
<script type="math/tex; mode=display">
最小帧长=争用期×数据传输速率</script><p><strong>最大帧长</strong></p>
<img src="/posts/e255a10a/3.5.4.3.6.png" class="" title="最大帧长">
<p>在此传输情况中，A发送了一个很长的帧，占用了大量时间，造成B、C无法传输数据，并且可能会造成某一端的缓冲区满的情况。因此便提出了最大帧长的概念。</p>
<p><strong>截断二进制指数退避算法</strong></p>
<img src="/posts/e255a10a/3.5.4.3.7.png" class="" title="截断二进制指数退避算法">
<p><strong>信道利用率</strong></p>
<p>一般信道利用率：</p>
<img src="/posts/e255a10a/3.5.4.3.8.png" class="" title="一般信道利用率">
<p>极限信道利用率：</p>
<img src="/posts/e255a10a/3.5.4.3.9.png" class="" title="极限信道利用率">
<p>参数a的值尽量小，以提高信道利用率。因此以太网端到端的距离应受到限制，以太网帧的长度应尽量长些。</p>
<p><strong>帧发送流程</strong></p>
<img src="/posts/e255a10a/3.5.4.3.10.png" class="" title="帧发送流程">
<p><strong>帧接收流程</strong></p>
<img src="/posts/e255a10a/3.5.4.3.11.png" class="" title="帧接收流程">
<p>CSMA/CD协议曾经用于各种总线结构以太网和双绞线以太网的早期版本中，现在的以太网基于交换机和全双工连接，不会有碰撞，因此没有必要使用CSMA/CD协议。</p>
<img src="/posts/e255a10a/3.5.4.3.12.png" class="" title="习题一">
<img src="/posts/e255a10a/3.5.4.3.13.png" class="" title="习题二">
<img src="/posts/e255a10a/3.5.4.3.14.png" class="" title="习题二">
<img src="/posts/e255a10a/3.5.4.3.15.png" class="" title="习题二">
<h4 id="3-7-3-2-CSMA-CA协议"><a href="#3-7-3-2-CSMA-CA协议" class="headerlink" title="3.7.3.2 CSMA/CA协议"></a>3.7.3.2 CSMA/CA协议</h4><p>载波监听多址接入/碰撞避免协议 CSMA/CA(Carrier Sense Multiple Access / Collosion Acoidance)</p>
<img src="/posts/e255a10a/3.5.4.3.16.png" class="" title="在无线网使用CSMA/CD协议">
<img src="/posts/e255a10a/3.5.4.3.17.png" class="" title="在无线网使用CSMA/CD协议">
<img src="/posts/e255a10a/3.5.4.3.18.png" class="" title="在无线网使用CSMA/CA协议">
<img src="/posts/e255a10a/3.5.4.3.19.png" class="" title="帧间间隔">
<p><strong>CSMA/CA协议的工作原理</strong>：</p>
<img src="/posts/e255a10a/3.5.4.3.20.png" class="" title="CSMA/CA工作原理">
<ol>
<li><p>源站为什么在检测到信道空闲后还要再等待DIFS帧间间隔时间？</p>
<p>因为要考虑到可能有其它的站有高优先级的帧要发送。若有，就要让高优先级帧先发送。</p>
</li>
<li><p>目的站为什么正确接收数据帧后还要等待一段时间SIFS才能发送ACK帧？</p>
<p>SIFS是最短的帧间间隔，用来分隔属于一次对话的各帧。在这段时间内，一个站点应当能够从发送方式切换到接收方式。</p>
</li>
</ol>
<p>对于发送过程中其他信道检测到信道忙：</p>
<img src="/posts/e255a10a/3.5.4.3.21.png" class="" title="信道忙状态">
<img src="/posts/e255a10a/3.5.4.3.22.png" class="" title="使用退避时间">
<img src="/posts/e255a10a/3.5.4.3.23.png" class="" title="退避算法">
<img src="/posts/e255a10a/3.5.4.3.24.png" class="" title="退避算法图解">
<p><strong>信道预约机制</strong>：为了尽可能减少碰撞的概率和降低碰撞的影响，802.11标准允许要发送数据得站点对信道进行预约。</p>
<p>对于一次信道预约要进行的过程：</p>
<ol>
<li>源站在发送数据帧之前先发送一个短的控制帧，称为请求发送RTS(Request To Send)，它包括源地址、目的地址以及这次通信(包括相应的确认帧)所需的持续时间。</li>
<li>若目的站正确收到源站发来的RTS帧，且媒体空闲，就发送一个响应控制帧，称为允许发送CTS(Clear To Send)，它也包括这次通信所需的持续时间(从RTS帧中将此持续时间复制到CTS帧中)。</li>
<li>源站收到CTS帧后，再等待一段时间SIFS后，就可发送其数据帧。</li>
<li>若目的站正确收到了源站发来的数据帧，在等待时间SIFS后，就向源站发送确认帧ACK。</li>
</ol>
<img src="/posts/e255a10a/3.5.4.3.25.png" class="" title="预约过程图解">
<img src="/posts/e255a10a/3.5.4.3.26.png" class="" title="预约过程">
<p><strong>虚拟载波监听机制</strong>：除RTS帧和CTS帧会携带通信需要持续的时间，数据帧也能携带通信需要持续的时间。</p>
<img src="/posts/e255a10a/3.5.4.3.27.png" class="" title="虚拟载波监听机制">
<p>此时，C知道信道将被占用多长时间，在这段时间内C不能发送帧，即A给B发送数据帧时不会受到C的干扰。</p>
<img src="/posts/e255a10a/3.5.4.3.28.png" class="" title="习题一">
<img src="/posts/e255a10a/3.5.4.3.29.png" class="" title="习题二">
<h2 id="3-8-MAC地址、IP地址及ARP协议"><a href="#3-8-MAC地址、IP地址及ARP协议" class="headerlink" title="3.8 MAC地址、IP地址及ARP协议"></a>3.8 MAC地址、IP地址及ARP协议</h2><ul>
<li>MAC地址是以太网的MAC子层所使用的地址，属于数据链路层。</li>
<li>IP地址是TCP/IP体系结构网际层所使用的地址。</li>
<li>ARP协议属于TCP/IP体系结构的网际层，其作用是已知设备所分配到的IP地址，使用ARP协议可以通过该IP地址获取到设备的MAC地址。</li>
</ul>
<h3 id="3-8-1-MAC地址"><a href="#3-8-1-MAC地址" class="headerlink" title="3.8.1 MAC地址"></a>3.8.1 MAC地址</h3><p>使用点对点信道的数据链路层不需要使用地址；使用广播信道的数据链路层必须使用地址来区分各主机。</p>
<img src="/posts/e255a10a/3.8.1.1.png" class="" title="MAC地址">
<p>MAC地址一般被固化在网卡(网络适配器)的电可擦可编程只读存储器(EEPROM)中，因此MAC地址也被称为硬件地址。MAC地址有时也被称为物理地址，但这并不意味着MAC地址属于网络体系结构中的物理层。</p>
<img src="/posts/e255a10a/3.8.1.2.png" class="" title="MAC地址">
<p>一般情况下，用户主机会包含两个网络适配器：有线局域网适配器(有线网卡)和无线局域网适配器(无线网卡)。每个网络适配器都有一个全球唯一的MAC地址。而交换机和路由器往往拥有更多的网络接口，所以会拥有更多的MAC地址。综上所述，MAC地址是对网络上各接口的唯一标识，而不是对网络上各设备的唯一标识。</p>
<img src="/posts/e255a10a/3.8.1.3.png" class="" title="MAC地址格式">
<img src="/posts/e255a10a/3.8.1.4.png" class="" title="MAC地址格式">
<p>字节发送顺序：第一字节 -&gt; 第六字节</p>
<p>字节内比特发送顺序：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex" xmlns="http://www.w3.org/2000/svg" width="1.958ex" height="1.945ex" role="img" focusable="false" viewBox="0 -694 865.6 859.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(462,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g></svg></mjx-container> -&gt;  <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex" xmlns="http://www.w3.org/2000/svg" width="1.958ex" height="1.945ex" role="img" focusable="false" viewBox="0 -694 865.6 859.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(462,-150) scale(0.707)"><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path></g></g></g></g></svg></mjx-container></p>
<p><strong>单播MAC地址举例</strong>：</p>

<ol>
<li><p>主机B给主机C发送单播帧，主机B首先要构建该单播帧，在帧首部中的目的地址字段填入主机C的MAC地址，源地址字段填入自己的MAC地址，再加上帧首部的其他字段、数据载荷以及帧尾部，就构成了该单播帧。</p>
</li>
<li><p>将该帧发送给出去。</p>
<img src="/posts/e255a10a/3.8.1.9.png" class="" title="单播MAC地址">
</li>
<li><p>此时A接收该单播帧，发现该单播帧的目的MAC地址与自己的MAC地址不匹配，丢弃该帧；C接收该单播帧，发现该单播帧的目的MAC地址与自己的MAC地址匹配，接受该帧，并将该帧交给其上层处理。</p>
</li>
</ol>
<p><strong>广播MAC地址举例</strong>：</p>
<img src="/posts/e255a10a/3.8.1.10.png" class="" title="广播MAC地址">
<ol>
<li><p>主机B首先要构建该广播帧，在帧首部中的目的地址字段填入广播地址，也就是十六进制的全F，源地址字段填入自己的MAC地址，再加上帧首部中的其他字段、数据载荷以及帧尾部，就构成了该广播帧。</p>
</li>
<li><p>发送该广播帧。</p>
<img src="/posts/e255a10a/3.8.1.11.png" class="" title="广播MAC地址">
</li>
<li><p>主机A和C都会收到该广播帧，发现该帧首部中的目的地址字段的内容是广播地址，就知道该帧是广播帧，主机A和主机C都接受该帧，并将该帧交给上层处理。</p>
</li>
</ol>
<p><strong>多播MAC地址举例</strong>：</p>
<p>主机A发送含有多播地址的多播帧，其他主机根据自己的多播组列表，判断是否接收帧。</p>
<img src="/posts/e255a10a/3.8.1.12.png" class="" title="多播MAC地址">
<p>主机A要发送多播帧给该多播地址。将该多播地址的左起第一个字节写成8个比特，第一个字节的最低比特位是1，表明该地址是多播地址。快速判断地址是不是多播地址，就是上图所示箭头所指的第十六进制数不能整除2（1,3,5,7,9,B,D,F），则该地址是多播地址。</p>
<ol>
<li><p>构建该多播帧，在帧首部中的目的地址字段填入该多播地址，源地址字段填入自己的MAC地址，再加上帧首部中的其他字段、数据载荷以及帧尾部，就构成了该多播帧。</p>
</li>
<li><p>将该多播帧发送出去，主机B、C、D都会收到该多播帧，各用户给自己主机配置多播组列表如图所示：</p>
<img src="/posts/e255a10a/3.8.1.13.png" class="" title="多播MAC地址">
<p>可以看出主机B属于两个多播组，主机C也属于两个多播组，而主机D不属于任何多播组。</p>
<img src="/posts/e255a10a/3.8.1.14.png" class="" title="多播MAC地址">
</li>
<li><p>主机B和C发现该多播帧的目的MAC地址在自己的多播组列表中，主机B和C都会接受该帧。主机D发现该多播帧的目的MAC地址不在自己得多播组列表中，则丢弃该多播帧。</p>
</li>
</ol>
<h3 id="3-8-2-IP地址"><a href="#3-8-2-IP地址" class="headerlink" title="3.8.2 IP地址"></a>3.8.2 IP地址</h3><img src="/posts/e255a10a/3.8.2.1.png" class="" title="IP地址">
<img src="/posts/e255a10a/3.8.2.2.png" class="" title="IP地址与MAC地址">
<img src="/posts/e255a10a/3.8.2.3.png" class="" title="IP地址与MAC地址的变化情况">
<img src="/posts/e255a10a/3.8.2.4.png" class="" title="IP地址与MAC地址的变化情况">
<h3 id="3-8-3-ARP协议"><a href="#3-8-3-ARP协议" class="headerlink" title="3.8.3 ARP协议"></a>3.8.3 ARP协议</h3><p>ARP协议(地址解析协议)可以实现IP地址到MAC地址的相互转换。</p>
<img src="/posts/e255a10a/3.8.3.2.png" class="" title="ARP地址">
<p>在每一个主机中都有一个高速缓存表，可以记录IP地址和MAC地址的对应信息。</p>
<img src="/posts/e255a10a/3.8.3.3.png" class="" title="ARP高速缓存表">
<img src="/posts/e255a10a/3.8.3.4.png" class="" title="ARP请求报文">
<img src="/posts/e255a10a/3.8.3.1.png" class="" title="ARP请求报文">
<img src="/posts/e255a10a/3.8.3.5.png" class="" title="ARP响应报文">
<img src="/posts/e255a10a/3.8.3.6.png" class="" title="主机B保存C的MAC地址">
<p>ARP的作用范围：逐段链路或逐个网络使用。</p>
<p>ARP没有安全验证机制，存在ARP欺骗(攻击)问题。</p>
<h2 id="3-9-集线器与交换机的区别"><a href="#3-9-集线器与交换机的区别" class="headerlink" title="3.9 集线器与交换机的区别"></a>3.9 集线器与交换机的区别</h2><p>早期的计算机网络中，常用的是总线型以太网。传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线。但是随着网络的发展被逐渐淘汰，出现了两种新型以太网结构：使用双绞线和集线器(HUB)的星型以太网、使用集线器(HUB)在物理层扩展以太网。</p>
<h3 id="3-9-1-使用双绞线和集线器HUB的星型以太网"><a href="#3-9-1-使用双绞线和集线器HUB的星型以太网" class="headerlink" title="3.9.1 使用双绞线和集线器HUB的星型以太网"></a>3.9.1 使用双绞线和集线器HUB的星型以太网</h3><p>采用双绞线的以太网采用星型拓扑，在星型的中心则增加了一种可靠性非常高的设备，叫做集线器 (hub)。</p>
<img src="/posts/e255a10a/3.9.1.1.png" class="" title="使用双绞线和集线器HUB的星型以太网">
<p>集线器的以太网在逻辑上仍是个总线网，需要使用CSMA/CD协议来协调各主机争用总线，只能工作在半双工模式，收发帧不能同时进行。</p>
<h3 id="3-9-2-使用集线器-HUB-在物理层扩展以太网"><a href="#3-9-2-使用集线器-HUB-在物理层扩展以太网" class="headerlink" title="3.9.2 使用集线器(HUB)在物理层扩展以太网"></a>3.9.2 使用集线器(HUB)在物理层扩展以太网</h3><p>使用集线器扩展：将多个以太网段连成更大的、多级星型结构的以太网，会扩大广播域和碰撞域。</p>
<img src="/posts/e255a10a/3.9.2.1.png" class="" title="使用集线器(HUB)在物理层扩展以太网">
<h3 id="3-9-3-以太网交换机"><a href="#3-9-3-以太网交换机" class="headerlink" title="3.9.3 以太网交换机"></a>3.9.3 以太网交换机</h3><p>以太网交换机是在数据链路层扩展以太网。</p>
<img src="/posts/e255a10a/3.9.3.1.png" class="" title="集线器与交换机">
<p>在集线器中，数据是以广播的形式发送，而在交换机中，会发送到目的主机，因此其效率要高很多。</p>
<img src="/posts/e255a10a/3.9.3.2.png" class="" title="以太网交换机">
<h3 id="3-9-4-集线器与交换机的对比"><a href="#3-9-4-集线器与交换机的对比" class="headerlink" title="3.9.4 集线器与交换机的对比"></a>3.9.4 集线器与交换机的对比</h3><img src="/posts/e255a10a/3.9.4.1.png" class="" title="集线器与交换机">
<ol>
<li>在单播情况下，集线器会像总线型一样把信号全部转发出去，而交换机只会发送给目标主机。</li>
<li>在广播情况下，二者无明显区别。</li>
</ol>
<p>当网络中多台主机同时给另一台主机发送单播帧，对于使用集线器的共享总线型以太网，必然会产生碰撞，遭遇碰撞的帧会传播到总线上的各主机；对于使用交换机的交换式以太网，交换机收到多个帧时，将它们缓存起来，然后逐个转发给目的主机，不会产生碰撞。</p>
<img src="/posts/e255a10a/3.9.4.2.png" class="" title="集线器与交换机">
<img src="/posts/e255a10a/3.9.4.3.png" class="" title="集线器与交换机">
<img src="/posts/e255a10a/3.9.4.4.png" class="" title="集线器与交换机">
<img src="/posts/e255a10a/3.9.4.5.png" class="" title="集线器与交换机">
<h2 id="3-10-以太网交换机自学习和转换帧的流程"><a href="#3-10-以太网交换机自学习和转换帧的流程" class="headerlink" title="3.10 以太网交换机自学习和转换帧的流程"></a>3.10 以太网交换机自学习和转换帧的流程</h2><ul>
<li>以太网交换机工作在数据链路层（也包括物理层）</li>
<li>在以太网交换机中，有一个帧交换表。其中记录了帧的目的MAC地址对应的接口号。</li>
<li>以太网交换机是一种即插即用设备，刚上电启动时其内部的帧交换表是空的。随着网络中各主机间的通信，以太网交换机通过自学习算法自动逐渐建立起帧交换表。</li>
</ul>
<img src="/posts/e255a10a/3.10.1.png" class="" title="以太网交换机自学习和转换帧">
<p>每条记录都有自己的有效时间，到期自动删除。这是因为MAC地址与交换机接口的对应关系并不是永久性的，比如更换主机、更换网卡等导致MAC地址改变。</p>
<p>PDU(Protocol Data Unit)的意思是协议数据单元，它是计算机网络体系结构中对等实体间逻辑通信的对象。</p>
<p>以太网交换机工作在数据链路层(也包括物理层)，它接收并转发的PDU通常称为帧。以太网交换机收到帧后，在帧交换表中查找帧的目的MAC地址所对应的接口号，然后通过该接口转发帧。</p>
<h2 id="3-11-以太网交换机的生成树协议-STP"><a href="#3-11-以太网交换机的生成树协议-STP" class="headerlink" title="3.11 以太网交换机的生成树协议(STP)"></a>3.11 以太网交换机的生成树协议(STP)</h2><p>由于在实际使用过程中，可能会出现线路故障导致无法通信。若A与B之间的线路故障会导致B与A、C之间无法通信。</p>
<img src="/posts/e255a10a/3.11.2.png" class="" title="链路故障">
<img src="/posts/e255a10a/3.11.1.png" class="" title="如何提高以太网的可靠性">
<p>以太网交换机使用生成树协议(Spanning Tree Protocol，STP)，可以在增加冗余链路来提高网络可靠性的同时又避免网络环路带来的各种问题。</p>
<ul>
<li>不论交换机之间采用怎样的物理连接，交换机都能够自动计算并构建一个逻辑上没有环路的网络，其逻辑拓扑结构必须是树型的(无逻辑环路)；</li>
<li>最终生成的树型逻辑拓扑要确保连通整个网络；</li>
<li>当首次连接交换机或网络物理拓扑发生变化时(有可能是人为改变或故障)，交换机都将进行生成树的重新计算。</li>
</ul>
<img src="/posts/e255a10a/3.11.3.png" class="" title="生成树协议">
<h2 id="3-12-虚拟局域网-VLAN"><a href="#3-12-虚拟局域网-VLAN" class="headerlink" title="3.12 虚拟局域网(VLAN)"></a>3.12 虚拟局域网(VLAN)</h2><img src="/posts/e255a10a/3.12.1.png" class="" title="巨大广播域带来的问题">
<p>广播风暴会浪费网络资源和各主机的CPU资源。</p>
<img src="/posts/e255a10a/3.11.4.png" class="" title="网络中频繁出现广播信息">
<img src="/posts/e255a10a/3.12.2.png" class="" title="分割广播域的方法">
<p>虚拟局域网VLAN（Virtual Local Area Network）是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术，这些逻辑组具有某些共同的需求。</p>
<img src="/posts/e255a10a/3.12.3.png" class="" title="划分虚拟局域网">
<h3 id="3-12-1-VLAN的实现机制"><a href="#3-12-1-VLAN的实现机制" class="headerlink" title="3.12.1 VLAN的实现机制"></a>3.12.1 VLAN的实现机制</h3><p>虚拟局域网VLAN技术是在交换机上实现的，需要交换机能够实现以下功能：</p>
<ul>
<li>能够处理带有VLAN标记的帧——IEEE 802.1Q帧</li>
<li>交换机的各端口可以支持不同的端口类型，不同端口类型的端口对帧的处理方式有所不同</li>
</ul>
<h4 id="3-12-1-1-IEEE-802-1Q帧"><a href="#3-12-1-1-IEEE-802-1Q帧" class="headerlink" title="3.12.1.1 IEEE 802.1Q帧"></a>3.12.1.1 IEEE 802.1Q帧</h4><img src="/posts/e255a10a/3.12.4.png" class="" title="IEEE 802.1Q帧">
<h4 id="3-12-1-2-交换机的端口类型"><a href="#3-12-1-2-交换机的端口类型" class="headerlink" title="3.12.1.2 交换机的端口类型"></a>3.12.1.2 交换机的端口类型</h4><ul>
<li>交换机的端口类型有以下三种：<ul>
<li>Access</li>
<li>Trunk</li>
<li>Hybrid(思科交换机没有此端口)</li>
</ul>
</li>
<li>交换机各端口的缺省VLAN ID<ul>
<li>在思科交换机上称为 Native VLAN，即本征VLAN。</li>
<li>在华为交换机上称为 Port VLAN ID，即端口VLAN ID，简记为PVID。</li>
</ul>
</li>
</ul>
<h5 id="3-12-1-2-1-Access端口"><a href="#3-12-1-2-1-Access端口" class="headerlink" title="3.12.1.2.1 Access端口"></a>3.12.1.2.1 Access端口</h5><p>Access端口主要用于交换机与用户计算机之间的互连。</p>
<img src="/posts/e255a10a/3.12.5.png" class="" title="Access端口">
<p>对于VLAN的实现，可以通过划分VLAN后，修改Access端口的PVID：</p>
<img src="/posts/e255a10a/3.12.6.png" class="" title="VLAN">
<p>从而可以实现广播域的划分。</p>
<h5 id="3-12-1-2-2-Trunk端口"><a href="#3-12-1-2-2-Trunk端口" class="headerlink" title="3.12.1.2.2 Trunk端口"></a>3.12.1.2.2 Trunk端口</h5><ul>
<li>Trunk端口一般用于交换机之间或交换机与路由器之间的互连。</li>
<li>Trunk端口可以属于多个VLAN。</li>
<li>用户可以设置Trunk端口的PVID值。默认情况下，Trunk端口的PVID值为1。</li>
<li><p>Trunk端口发送处理方法：</p>
<ul>
<li><p>对 VID等于PVID的帧，“去标签” 再转发</p>
</li>
<li><p>对 VID不等于PVID的帧，直接转发</p>
</li>
</ul>
</li>
<li><p>Trunk端口接收处理方法：</p>
<ul>
<li>接收 “未打标签” 的帧，根据接收帧的端口的PVID给帧 “打标签”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等</li>
</ul>
</li>
<li>接收 “已打标签” 的帧</li>
</ul>
<img src="/posts/e255a10a/3.12.7.png" class="" title="Trunk端口">
<img src="/posts/e255a10a/3.12.8.png" class="" title="Trunk端口">
<h5 id="3-12-1-2-3-Hybrid端口"><a href="#3-12-1-2-3-Hybrid端口" class="headerlink" title="3.12.1.2.3 Hybrid端口"></a>3.12.1.2.3 Hybrid端口</h5><img src="/posts/e255a10a/3.12.9.png" class="" title="Hybrid端口">
<h1 id="4-网络层"><a href="#4-网络层" class="headerlink" title="4. 网络层"></a>4. 网络层</h1><h2 id="4-1-网络层概述"><a href="#4-1-网络层概述" class="headerlink" title="4.1 网络层概述"></a>4.1 网络层概述</h2><ul>
<li>网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输。</li>
<li>TCP/IP参考模型的网络层提供的是无连接、不可靠的数据报服务。</li>
<li>要实现网络层任务，需要解决以下主要问题：<ul>
<li>网络层向运输层提供怎样的服务（“可靠传输” 还是 “不可靠传输”）</li>
<li>网络层寻址问题</li>
<li>路由选择问题</li>
</ul>
</li>
</ul>
<img src="/posts/e255a10a/4.1.1.png" class="" title="互联网">
<p>每一个路由器都有一个路由表，路由表中记录了目的网络以及各级跳的路由器端口，以此来选择走哪个路由器到达端口。</p>
<p>路由记录表的记录有两种情况生成：</p>
<ol>
<li>由用户或网络管理员进行人工配置。这种方法只适用于规模较小且网络拓扑不改变的小型互联网。</li>
<li>实现各种路由选择协议，由路由器执行路由选择协议中所规定的路由选择算法，而自动得出路由表中的路由记录，这种方法更适合规模较大且网络拓扑经常改变的大型互联网。</li>
</ol>
<p>因特网是目前全世界用户数量最多的互联网，它使用TCP/IP协议栈。由于TCP/IP协议栈的网络层使用网际协议IP，它是整个协议栈的核心协议，因此在TCP/IP协议栈中网络层常称为网际层。</p>
<img src="/posts/e255a10a/4.1.2.png" class="" title="TCP/IP协议栈">
<h2 id="4-2-网络层提供的两种服务"><a href="#4-2-网络层提供的两种服务" class="headerlink" title="4.2 网络层提供的两种服务"></a>4.2 网络层提供的两种服务</h2><h3 id="4-2-1-面向连接的虚电路服务"><a href="#4-2-1-面向连接的虚电路服务" class="headerlink" title="4.2.1 面向连接的虚电路服务"></a>4.2.1 面向连接的虚电路服务</h3><ul>
<li>可靠通信由网络来保证</li>
<li>必须建立网络层的连接——虚电路VC(Virtual Circuit）</li>
<li>通信双方沿着已建立的虚电路发送分组</li>
<li>目的主机的地址仅在连接建立阶段使用，之后每个分组的首部只需携带一条虚电路的编号（构成虚电路的每一段链路都有一个虚电路编号）。</li>
<li>这种通信方式如果再使用可靠传输的网络协议，就可使所发送的分组最终正确到达接收方（无差错按序到达、不丢失、不重复）</li>
<li>通信结束后，需要释放之前所建立的虚电路。</li>
<li>很多广域分组交换网都使用面向连接的虚电路服务。例如，曾经的X.25和逐渐过时的帧中继FR、异步传输模式ATM等。</li>
</ul>
<img src="/posts/e255a10a/4.2.1.png" class="" title="面向连接的虚电路服务">
<h3 id="4-2-2-面向无连接的数据报服务"><a href="#4-2-2-面向无连接的数据报服务" class="headerlink" title="4.2.2 面向无连接的数据报服务"></a>4.2.2 面向无连接的数据报服务</h3><ul>
<li>可靠通信应当由用户主机来保证</li>
<li>不需要建立网络层连接</li>
<li>每个分组可走不同的路径</li>
<li>每个分组的首部必须携带目的主机的完整地址</li>
<li>这种通信方式所传送的分组可能误码、丢失、重复和失序。</li>
<li>由于网络本身不提供端到端的可靠传输服务，这就使网络中的路由器可以做得比较简单，而且价格低廉（与电信网的交换机相比较）。</li>
<li>因特网采用了这种设计思想，也就是将复杂的网络处理功能置于因特网的边缘（用户主机和其内部的运输层），而将相对简单的尽最大努力的分组交付功能置于因特网核心。</li>
</ul>
<img src="/posts/e255a10a/4.2.2.png" class="" title="面向无连接的数据报服务">
<img src="/posts/e255a10a/4.2.3.png" class="" title="两种对比">
<h2 id="4-3-IPv4地址"><a href="#4-3-IPv4地址" class="headerlink" title="4.3 IPv4地址"></a>4.3 IPv4地址</h2><h3 id="4-3-1-IPv4地址概述"><a href="#4-3-1-IPv4地址概述" class="headerlink" title="4.3.1 IPv4地址概述"></a>4.3.1 IPv4地址概述</h3><ul>
<li><p>在TCP/IP体系中，IP地址是一个最基本的概念，我们必须把它弄清楚。</p>
</li>
<li><p>IPv4地址就是给因特网（Internet）上的每一台主机（或路由器）的每一个接口分配一个在全世界范围内是唯一的32比特的标识符。</p>
</li>
<li><p>IP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配。</p>
<ul>
<li>我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址， 需要缴费。</li>
<li>2011年2月3日，互联网号码分配管理局IANA（由ICANN行使职能）宣布，IPv4地址已经分配完毕。</li>
<li>我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址。同时全面开展商用部署IPv6。</li>
</ul>
</li>
<li><p>IPv4地址的编址方法经历了如下三个历史阶段：</p>
<img src="/posts/e255a10a/4.3.1.png" class="" title="IPv4三个历史阶段">
</li>
<li><p>32比特的IPv4地址不方便阅读、记录以及输入等，因此IPv4地址采用点分十进制表示方法以方便用户使用。</p>
<img src="/posts/e255a10a/4.3.2.png" class="" title="IPv4地址表示方法">
</li>
</ul>
<h3 id="4-3-2-分类编址的IPv4地址"><a href="#4-3-2-分类编址的IPv4地址" class="headerlink" title="4.3.2 分类编址的IPv4地址"></a>4.3.2 分类编址的IPv4地址</h3><p>分类的IPv4地址共分为 5 类：A类地址、B类地址、C类地址、D类地址、E类地址。</p>
<img src="/posts/e255a10a/4.3.3.png" class="" title="分类编址的IPv4">
<h4 id="4-3-2-1-A类地址"><a href="#4-3-2-1-A类地址" class="headerlink" title="4.3.2.1 A类地址"></a>4.3.2.1 A类地址</h4><ul>
<li>最小网络号 0，保留不指派</li>
<li>第一个可指派的网络号为 1，网络地址为 1.0.0.0</li>
<li>最大网络号 127，作为本地环回测试地址，不指派<ul>
<li>最小的本地环回测试地址为 127.0.0.1</li>
<li>最大的本地环回测试地址为 127.255.255.254</li>
</ul>
</li>
<li>最后一个可指派的网络号为 126，网络地址为 126.0.0.0</li>
<li>可指派的网络数量为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="14.471ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 6396.2 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1278,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g><g data-mml-node="mo" transform="translate(2062.5,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3062.7,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(3840.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(4896.2,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(500,0)"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(1000,0)"></path></g></g></g></svg></mjx-container>（减2的原因是除去最小网络号0和最大网络号127）</li>
<li>每个网络中可分配的IP地址数量为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="18.883ex" height="2.09ex" role="img" focusable="false" viewBox="0 -841.7 8346.1 923.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(500,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2512.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(3290.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(4346.1,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1000,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1500,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(2000,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(2500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(3000,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(3500,0)"></path></g></g></g></svg></mjx-container>（减2的原因是除去主机号为全 0 的网络地址和全 1 的广播地址）</li>
</ul>
<img src="/posts/e255a10a/4.3.4.png" class="" title="A类地址">
<h4 id="4-3-2-2-B类地址"><a href="#4-3-2-2-B类地址" class="headerlink" title="4.3.2.2 B类地址"></a>4.3.2.2 B类地址</h4><ul>
<li>最小网络号也是第一个可指派的网络号 128.0<br>网络地址为 128.0.0.0</li>
<li>最大网络号也是最后一一个可指派的网络号 191.255<br>网络地址为 191.255.0.0</li>
<li>可指派的网络数量为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="13.637ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 6027.3 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(1000,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1778,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g><g data-mml-node="mo" transform="translate(2471.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(3527.3,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"></path><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(1000,0)"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(1500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(2000,0)"></path></g></g></g></svg></mjx-container></li>
<li>每个网络中可分配的IP地址数量为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="15.489ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 6846.1 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2512.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(3290.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(4346.1,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(500,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"></path><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(1500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(2000,0)"></path></g></g></g></svg></mjx-container>（减2的原因是除去主机号为全 0 的网络地址和全1的广播地址）</li>
</ul>
<img src="/posts/e255a10a/4.3.5.png" class="" title="B类地址">
<h4 id="4-3-2-3-C类地址"><a href="#4-3-2-3-C类地址" class="headerlink" title="4.3.2.3 C类地址"></a>4.3.2.3 C类地址</h4><ul>
<li>最小网络号也是第一个可指派的网络号 192.0.0<br>网络地址为 192.0.0.0</li>
<li>最大网络号也是最后一一个可指派的网络号 223.255.255<br>网络地址为 223.255.255.0</li>
<li>可指派的网络数量为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="15.899ex" height="2.09ex" role="img" focusable="false" viewBox="0 -841.7 7027.3 923.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(1000,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1778,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g><g data-mml-node="mo" transform="translate(2471.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(3527.3,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z" transform="translate(1000,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(2000,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(2500,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(3000,0)"></path></g></g></g></svg></mjx-container></li>
<li>每个网络中可分配的IP地址数量为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="12.427ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 5492.6 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(533,363) scale(0.707)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g></g><g data-mml-node="mo" transform="translate(1158.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2159,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(2936.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(3992.6,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(1000,0)"></path></g></g></g></svg></mjx-container>（减2的原因是除去主机号为全 0 的网络地址和全 1 的广播地址）</li>
</ul>
<img src="/posts/e255a10a/4.3.6.png" class="" title="C类地址">
<h4 id="4-3-2-4-一般不使用的特殊IP地址"><a href="#4-3-2-4-一般不使用的特殊IP地址" class="headerlink" title="4.3.2.4 一般不使用的特殊IP地址"></a>4.3.2.4 一般不使用的特殊IP地址</h4><img src="/posts/e255a10a/4.3.7.png" class="" title="一般不使用的特殊IP地址">
<h3 id="4-3-3-划分子网的IPv4地址"><a href="#4-3-3-划分子网的IPv4地址" class="headerlink" title="4.3.3 划分子网的IPv4地址"></a>4.3.3 划分子网的IPv4地址</h3><p>首先先明确为何要引出划分子网的概念：在 ARPANET 的早期，IP 地址的设计确实不够合理：</p>
<ol>
<li>IP 地址空间的利用率有时很低。</li>
<li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。</li>
<li>两级的 IP 地址不够灵活。</li>
</ol>
<p>例如：某一个大型局域网需要连接到因特网：</p>
<img src="/posts/e255a10a/4.3.8.png" class="" title="例子">
<ul>
<li>此时由于C类地址不够存放所有主机，选择可分配主机数为65534个的B类地址，但是很明显此时会有很多主机地址没有被利用。</li>
<li>但是对于剩余的IP地址只能由该单位的同一个网络使用，其他网络不得使用。</li>
</ul>
<p>随着单位的发展，该单位需要将原来的网络划分成三个独立的网络。此时只能选择为子网申请新的网络号，但是申请新的网络号会带来以下弊端：</p>
<ul>
<li>需要等待时间和花费更多的费用</li>
<li>会增加其它路由器中路由表记录的数量</li>
<li>浪费原有网络中剩余的大量IP地址</li>
</ul>
<p>因此提出了一种解决办法：从多余的主机号中借用一部分作为子网号，而不用申请新的网络地址。</p>
<img src="/posts/e255a10a/4.3.9.png" class="" title="例子">
<p>但是此时出现了一个新的问题：计算机要如何知道分类地址中有多少比特被用作子网号了呢？这就提出了一个子网掩码的概念。</p>
<p>32bit子网掩码可以表明分类IP地址的主机号部分被借用了几个比特作为子网号。</p>
<ul>
<li>子网掩码用连续的比特1来对应网络号和子网号。</li>
<li>子网掩码用连续的比特0来对应主机号。</li>
<li>将划分子网的<strong>IPv4地址</strong>与其<strong>相应的子网掩码进行逻辑与运算</strong>就可以得到IPv4地址<strong>所在的子网的网络地址</strong>。</li>
</ul>
<img src="/posts/e255a10a/4.3.10.png" class="" title="子网掩码计算">
<img src="/posts/e255a10a/4.3.11.png" class="" title="习题一">
<img src="/posts/e255a10a/4.3.12.png" class="" title="习题一">
<img src="/posts/e255a10a/4.3.13.png" class="" title="默认子网掩码">
<h3 id="4-3-4-无分类编址的IPv4地址"><a href="#4-3-4-无分类编址的IPv4地址" class="headerlink" title="4.3.4 无分类编址的IPv4地址"></a>4.3.4 无分类编址的IPv4地址</h3><p>划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是数量巨大的C类网因为其地址（主机地址）空间太小没有得到充分使用，而因特网的IP地址仍在加速消耗，整个IPv4地址空间面临全部耗尽的威胁。</p>
<p>因此因特网工程任务组IETF又提出了无分址编址方式来解决地址紧张的问题。</p>
<p>1993年，IETF发布了无分类域间路由选择（Classless Inter-Domain Routing，CIDR），其主要的特点：</p>
<ul>
<li>CIDR消除了传统的A类、B类和C类地址，以及划分子网的概念。</li>
<li>CIDR可以更加有效分配IPv4的地址空间（使地址空间分配不再被主机号所限制，做到自由的根据主机规模分配），并且可以在新的IPv6使用之前允许因特网的规模继续增长。</li>
<li>CIDR使用各种长度的网络前缀(network-prefix)来代替分类地址中的网络号和子网号。</li>
</ul>
<p>CIDR使用斜线记法，或称之为CIDR记法。即在IPv4地址前面加上斜线“/”，在斜线后面写上网络前缀所占比特数量（就是分类地址中的网络号和子网号）。</p>
<img src="/posts/e255a10a/4.3.14.png" class="" title="举例">
<p>CIDR实际上使将网络前缀都相同的连续IP地址组成一个“CIDR地址块”。我们只要知道CIDR地址块中的任何一个地址就可以知道该地址块的全部细节，例如：</p>
<ul>
<li>地址块的最小地址</li>
<li>地址块的最大地址</li>
<li>地址块中的地址数量</li>
<li>地址块聚合某类网络(A类、B类、C类)的数量</li>
<li>地址掩码(也可继续称为子网掩码)</li>
</ul>
<img src="/posts/e255a10a/4.3.15.png" class="" title="举例">
<p>这里就出现了一个聚合的概念。其实聚合就是将多个小的网络连接起来，一起用一个大的网络分配给它们，向因特网只申请一个大的网络号，而不用申请多个小的网络号，因此形成了多个小网络聚合成一个大网络，减少了网络号的消耗。</p>
<img src="/posts/e255a10a/4.3.16.png" class="" title="路由聚合">
<h3 id="4-3-5-IPv4地址的应用规划"><a href="#4-3-5-IPv4地址的应用规划" class="headerlink" title="4.3.5 IPv4地址的应用规划"></a>4.3.5 IPv4地址的应用规划</h3><p>IPv4地址的应用规划考虑的是给定一个IPv4地址块，如何将其划分成几个更小的地址块（来满足多子网划分），并将这些地址块分配给互联网中不同网络，进而可以给各网络中的主机和路由器接口分配IPv4地址。</p>
<p>IPv4的应用规划有两种：</p>
<ul>
<li><p>定长子网掩码（FLSM，Fixed Length Subnet Mask）</p>
<p>使用同一个子网掩码来划分子网</p>
<p>每个子网所分配的IP地址数量相同，造成IP地址浪费</p>
</li>
<li><p>变长子网掩码（VLSM，Variable Length Subnet Mask）</p>
<p>使用不同的子网掩码来划分子网</p>
<p>每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费</p>
</li>
</ul>
<img src="/posts/e255a10a/4.3.17.png" class="" title="例子">
<img src="/posts/e255a10a/4.3.18.png" class="" title="使用定长子网掩码划分子网">
<img src="/posts/e255a10a/4.3.19.png" class="" title="使用定长子网掩码划分子网">
<img src="/posts/e255a10a/4.3.20.png" class="" title="使用定长子网掩码划分子网">
<img src="/posts/e255a10a/4.3.21.png" class="" title="使用变长子网掩码划分子网">
<p>在地址块的分配原则中，每个子块的起点位置不能随意选取，只能选取块整数倍的地址作为起点，也就是比特位置上<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="2.279ex" height="1.528ex" role="img" focusable="false" viewBox="0 -675.5 1007.3 675.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></svg></mjx-container>的位置。最好是先给大的子块分配子网。</p>
<img src="/posts/e255a10a/4.3.22.png" class="" title="使用变长子网掩码划分子网">
<h2 id="4-4-IP数据报的发送和转发过程"><a href="#4-4-IP数据报的发送和转发过程" class="headerlink" title="4.4 IP数据报的发送和转发过程"></a>4.4 IP数据报的发送和转发过程</h2><p>IP数据包的发送和转发过程包含两个部分：</p>
<ul>
<li><p>主机发送IP数据报</p>
<p>判断目的主机是否与自己在同一个网络：</p>
<ul>
<li>若在同一个网络，则属于直接交付</li>
<li>若不在同一个网络，则属于间接交付，传输给主机所在网络的默认网关（路由器），由默认网关帮忙转发</li>
</ul>
<img src="/posts/e255a10a/4.4.1.png" class="" title="判断目的主机是否与自己在同一个网络">
<img src="/posts/e255a10a/4.4.2.png" class="" title="主机C如何知道路由器R的存在">
</li>
<li><p>路由器转发IP数据报</p>
<ol>
<li>检查IP数据报首部是否出错：<ul>
<li>若出错，则直接丢弃该IP数据报并告诉源主机</li>
<li>若没有出错，则进行转发</li>
</ul>
</li>
<li>根据IP数据报的目的地址在路由表中查找匹配的条目：<ul>
<li>若找到匹配的条目，则转发给条目中指示的下一跳</li>
<li>若找不到，则丢弃该IP数据报并告诉源主机</li>
</ul>
</li>
</ol>
<img src="/posts/e255a10a/4.4.3.png" class="" title="在路由表中查找匹配的条目">
<img src="/posts/e255a10a/4.4.4.png" class="" title="路由器隔离广播域">
</li>
</ul>
<img src="/posts/e255a10a/4.4.5.png" class="" title="习题一">
<img src="/posts/e255a10a/4.4.6.png" class="" title="习题二">
<h2 id="4-5-静态路由配置及其可能产生的路由环路问题"><a href="#4-5-静态路由配置及其可能产生的路由环路问题" class="headerlink" title="4.5 静态路由配置及其可能产生的路由环路问题"></a>4.5 静态路由配置及其可能产生的路由环路问题</h2><p>静态路由配置是指用户或网络管理员使用路由器的相关命令给路由器人工配置路由表。</p>
<ul>
<li>这种人工配置方式简单、开销小。但不能及时适应网络状态(流量、拓扑等)的变化。</li>
<li>一般只在小规模网络中采用。</li>
</ul>
<p>使用静态路由配置可能出现以下问题导致产生路由环路的错误。</p>
<ul>
<li>配置错误</li>
<li>聚合了不存在的网络</li>
<li>网络故障</li>
</ul>
<img src="/posts/e255a10a/4.4.7.png" class="" title="静态路由配置">
<p>对于有多个网络存在时，如连接到因特网，对每个网络都进行静态配置显然是不现实的，因此就引出了默认路由的概念。</p>
<img src="/posts/e255a10a/4.4.8.png" class="" title="默认路由">
<img src="/posts/e255a10a/4.4.9.png" class="" title="特定主机路由">
<p>静态路由配置错误导致路由环路问题：</p>
<img src="/posts/e255a10a/4.4.10.png" class="" title="静态路由配置错误导致路由环路">
<p>聚合了不存在的网络而导致路由环路问题：</p>
<img src="/posts/e255a10a/4.4.11.png" class="" title="路由聚合">
<img src="/posts/e255a10a/4.4.12.png" class="" title="聚合了不存在的网络而导致路由环路">
<img src="/posts/e255a10a/4.4.13.png" class="" title="聚合了不存在的网络而导致路由环路">
<p>网络故障而导致路由环路问题：</p>
<p>假设路由器R1检测到其接口0所直连的网络出现了故障而不可达，就会自动在其路由表中删除该直连网络的路由条目。</p>
<img src="/posts/e255a10a/4.4.14.png" class="" title="网络故障而导致路由环路">
<img src="/posts/e255a10a/4.4.15.png" class="" title="网络故障而导致路由环路">
<p>假设一段时间后，之前的故障被修复好了，则R1又自动地得出了其接口0的直连网络的路由条目，并将之前人工配置的针对该直连网络的黑洞路由条目设置为失效状态。假设该直连网络又出现故障而不可达，就会自动在其路由表中删除该直连网络的路由条目，并将该直连网络的黑洞路由条目设置为生效状态。</p>
<h2 id="4-6-路由选择协议"><a href="#4-6-路由选择协议" class="headerlink" title="4.6 路由选择协议"></a>4.6 路由选择协议</h2><h3 id="4-6-1-路由选择协议概述"><a href="#4-6-1-路由选择协议概述" class="headerlink" title="4.6.1 路由选择协议概述"></a>4.6.1 路由选择协议概述</h3><p>路由器的选择协议分为两种：静态路由选择和动态路由选择。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>静态路由选择</th>
<th>动态路由选择</th>
</tr>
</thead>
<tbody>
<tr>
<td>由人工配置的网络路由、默认路由、特定主机路由、黑洞路由等都属于静态路由</td>
<td>路由器通过路由选择协议自动获取路由信息</td>
</tr>
<tr>
<td>这种人工配置方式简单、开销小<br>但是不能及时适应网络状态（流量、拓扑等）的变化</td>
<td>比较复杂、开销比较大<br>能较好的适应网络状态的变化</td>
</tr>
<tr>
<td>一般只在小规模网络中采用</td>
<td>适用于大规模网络</td>
</tr>
</tbody>
</table>
</div>
<p>因特网所采用的路由选择协议的主要特点：</p>
<ol>
<li>自适应：采用动态路由选择，能较好的适应网络状态的变化</li>
<li>分布式：路由器之间通过相互之间的信息交互，交换路由信息</li>
<li>分层次：将整个因特网划分为许多较小的自治系统AS（Autonomous System），例如，一个较大的因特网服务提供商（电信）就可以划分成一个自治系统，对于自治系统内部和自治系统外部，分别采用不同类别的路由选择协议进行路由选择。</li>
</ol>
<p>因特网采用分层次的路由选择协议，自治系统之间称为域间路由选择，自治系统内称为域内路由选择。自治系统之间称为外部网关协议EGP(也可称为外部路由协议ERP)，自治系统内称为内部网关协议IGP(也可称为内部路由协议IRP)。此处的网关就是路由器，只不过是路由器早期的名称。</p>
<p>注意：路由协议只是一个名称，并不是一个具体的协议。</p>
<img src="/posts/e255a10a/4.6.1.png" class="" title="路由协议">
<h4 id="4-6-1-1-常见的路由选择协议"><a href="#4-6-1-1-常见的路由选择协议" class="headerlink" title="4.6.1.1 常见的路由选择协议"></a>4.6.1.1 常见的路由选择协议</h4><img src="/posts/e255a10a/4.6.2.png" class="" title="常见的路由选择协议">
<h4 id="4-6-1-2-路由器的基本结构"><a href="#4-6-1-2-路由器的基本结构" class="headerlink" title="4.6.1.2 路由器的基本结构"></a>4.6.1.2 路由器的基本结构</h4><p>路由器是具有多个输入端口和输出端口的专用计算机，其任务是转发分组。</p>
<p>路由器主要由两部分组成：</p>
<ul>
<li>路由选择部分：<br>核心构件是路由选择处理机，根据路由器选择协议，周期性的和其他路由器进行路由信息交互，构建路由表。</li>
<li>分组转发部分：<br>分组转发部分主要有三部分组成：交换结构、一组输入端口和一组输出端口。</li>
</ul>
<img src="/posts/e255a10a/4.6.3.png" class="" title="路由器的基本结构">
<p>路由表与转发表：</p>
<ul>
<li>路由表一般仅包含从目的网络到下一跳的映射。</li>
<li>路由表需要对网络拓扑变化的计算最优化。</li>
<li>转发表是从路由表得出的。</li>
<li>转发表的结构应当使查找过程最优化。</li>
<li>ps：一般不严格区分路由表和转发表。</li>
</ul>
<p>路由器还具有输入缓冲区、输出缓冲区。输入缓冲区用于存储新进入路由器但还来不及处理的分组。输出缓冲区用来存储已经处理完毕但是还来不及发送的分组。</p>
<h4 id="4-6-1-3-路由器的基本工作过程"><a href="#4-6-1-3-路由器的基本工作过程" class="headerlink" title="4.6.1.3 路由器的基本工作过程"></a>4.6.1.3 路由器的基本工作过程</h4><ol>
<li>某IP数据报进入路由器输入端口后处理过程：①物理层将其信号转变成比特流，送交数据链路层处理；②数据链路层从比特流中识别出帧，去掉帧头和帧尾后送交网络层处理；③网络层中接收后判断其分组类型，若是普通的数据分组，会将其发送到分组处理机中；若是路由之间交换路由信息的路由报文，则会将该路由报文转发给路由处理机，路由处理机根据分组报文更新自己的路由表。</li>
<li>某数据报进入分组处理机构后处理过程：分组处理机会根据其分组首部中的目的地址进行查表转发，若找不到目的地址，则丢弃该分组，否则转发到下一个对应端口。</li>
<li>某IP数据报进入路由器输出端口后处理过程：①输出端口网络层会更新数据分组首部中某些字段的值，例如将数据分组生存时间(TTL)-1，然后送交数据链路层处理；②数据链路层封装成帧，交给物理层处理；③物理层将帧转为对应的比特流，在转换成电信号进行发送。</li>
</ol>
<h3 id="4-6-2-路由信息协议-RIP-的基本工作原理"><a href="#4-6-2-路由信息协议-RIP-的基本工作原理" class="headerlink" title="4.6.2 路由信息协议(RIP)的基本工作原理"></a>4.6.2 路由信息协议(RIP)的基本工作原理</h3><img src="/posts/e255a10a/4.6.4.png" class="" title="RIP概述">
<p>RIP协议认为好的路由就是“距离短”的路由，就是所通过路由器数量最少的路由。</p>
<p>当到达同一目的网络有多条 “距离相等” 的路由时，可以进行等价负载均衡，就是将通信量均衡地分布到多条等价的路由上。</p>
<p>RIP包含以下三个要点：</p>
<ul>
<li>和谁交换信息：仅和相邻路由器交换信息</li>
<li>交换什么信息：自己的路由表</li>
<li>何时交换信息：周期性交换（例如每30秒）</li>
</ul>
<h4 id="4-6-2-1-RIP基本工作过程"><a href="#4-6-2-1-RIP基本工作过程" class="headerlink" title="4.6.2.1 RIP基本工作过程"></a>4.6.2.1 RIP基本工作过程</h4><img src="/posts/e255a10a/4.6.5.png" class="" title="RIP概述">
<h4 id="4-6-2-2-RIP的路由条目的更新规则"><a href="#4-6-2-2-RIP的路由条目的更新规则" class="headerlink" title="4.6.2.2 RIP的路由条目的更新规则"></a>4.6.2.2 RIP的路由条目的更新规则</h4><img src="/posts/e255a10a/4.6.6.png" class="" title="RIP的路由条目的更新规则">
<h4 id="4-6-2-3-RIP协议存在“坏消息传得慢”的问题"><a href="#4-6-2-3-RIP协议存在“坏消息传得慢”的问题" class="headerlink" title="4.6.2.3 RIP协议存在“坏消息传得慢”的问题"></a>4.6.2.3 RIP协议存在“坏消息传得慢”的问题</h4><img src="/posts/e255a10a/4.6.7.png" class="" title="RIP协议存在“坏消息传得慢”的问题">
<p>由于N1出现故障，R1路由器将N1的距离设置为16（16认为不可达）。</p>
<p>此时R2根据以前RIP协议获得的路由器情况，发送更新请求给R1，而此时R1的更新情况还没发给R2。</p>
<img src="/posts/e255a10a/4.6.8.png" class="" title="RIP协议存在“坏消息传得慢”的问题">
<p>此时R1的路由器表先收到R2的路由器表后会根据上面说的更新规则进行更新，将N1到R2的距离更新为3。此时数据就是被谣言误导的。此后，两路由器之间会一直以被误导的数据进行循环更新路由数据，直到双方距离达到16（认为不可达）时，才会选择放弃传输。</p>
<p>在此过程中，就会出现路由环路，导致路由器间被占用长达数分钟的时间。</p>
<p>“坏消息传播得慢” 又称为路由环路或距离无穷计数问题，这是距离向量算法的一个固有问题。可以采取多种措施减少出现该问题的概率或减小该问题带来的危害。比如：</p>
<ul>
<li>限制最大路径距离为15（16表示不可达）</li>
<li>当路由表发生变化时就立即发送更新报文（即 “触发更新”），而不仅是周期性发送</li>
<li>让路由器记录收到某特定路由信息的接口，而不让同一路由信息再通过此接口向反方向传送（即 “水平分割”）</li>
</ul>
<p>但是，就算采取了上述措施，由于向量计算算法的本质决定，“坏消息传得慢”问题还是有可能会出现。</p>
<h3 id="4-6-3-开放最短路径优先-OSPF-的基本工作原理"><a href="#4-6-3-开放最短路径优先-OSPF-的基本工作原理" class="headerlink" title="4.6.3 开放最短路径优先(OSPF)的基本工作原理"></a>4.6.3 开放最短路径优先(OSPF)的基本工作原理</h3><ul>
<li><p>开放最短路径优先OSPF，是为了克服RIP的缺点在1989年开发出来的。</p>
<ul>
<li>“开放”表明OSPF协议不是受某一家厂商控制，而是公开发表的</li>
<li>“最短路径优先”，是因为使用了迪杰斯特拉的最短路径算法SPF（最小生成树）</li>
</ul>
</li>
<li><p>OSPF是基于链路状态的，而不是像RIP那样基于距离向量的。</p>
</li>
<li>OSPF采用SPF算法计算路由，从算法上保证了不会产生路由环路。</li>
<li>OSPF不限制网络规模，更新效率高，收敛速度快。</li>
<li>链路状态是指本路由器都和哪些路由器相连，以及相应链路的代价。<ul>
<li>代价用来表示费用、距离、时延、带宽等等。代价的计算方法由网络管理人员来决定的，没有统一</li>
</ul>
</li>
</ul>
<img src="/posts/e255a10a/4.6.9.png" class="" title="计算邻居的代价">
<img src="/posts/e255a10a/4.6.10.png" class="" title="判断邻居路由器不可达的方法">
<img src="/posts/e255a10a/4.6.11.png" class="" title="LSA概述">
<img src="/posts/e255a10a/4.6.12.png" class="" title="LSDB">
<img src="/posts/e255a10a/4.6.13.png" class="" title="OSPF">
<h4 id="4-6-3-1-五种OSPF分组类型"><a href="#4-6-3-1-五种OSPF分组类型" class="headerlink" title="4.6.3.1 五种OSPF分组类型"></a>4.6.3.1 五种OSPF分组类型</h4><ol>
<li>问候(Hello)分组：用来发现和维护邻居路由器的可达性</li>
<li>数据库描述(Database Description)分组：向邻居路由器给出自己的链路状态数据库中的所有链路状态项目的摘要信息</li>
<li>链路状态请求(Link State Request)分组：向邻居路由器请求发送某些链路状态项目的详细信息</li>
<li>链路状态更新(Link State Update)分组：路由器使用这种分组将其链路状态进行洪泛发送，即用洪泛法对全网更新链路状态</li>
<li>链路状态确认(Link State Acknowledgment)分组：这是对链路状态更新分组的确认分组</li>
</ol>
<h4 id="4-6-3-2-OSPF的基本工作过程"><a href="#4-6-3-2-OSPF的基本工作过程" class="headerlink" title="4.6.3.2 OSPF的基本工作过程"></a>4.6.3.2 OSPF的基本工作过程</h4><img src="/posts/e255a10a/4.6.14.png" class="" title="OSPF的基本工作过程">
<p>主要可以看成三个部分：</p>
<ol>
<li><p>通过发送问候分组建立和维护邻居关系</p>
</li>
<li><p>链路状态数据库同步：</p>
<p>先发送数据库描述分组，将自己链路状态数据库中的所有链路状态项目的摘要信息发送给邻居路由。</p>
<p>路由器发送自己缺失某些链路状态摘要信息中的详细信息，就会向相邻路由发送链路状态请求分组。</p>
<p>相邻路由器收到链路更新请求后会返回路由状态更新分组。</p>
<p>发送请求的网络收到更新分组后会返回确认分组，一次更新数据过程结束。</p>
</li>
<li><p>同步状态后的链路状态数据库同步：<br>在30分钟后或者链路状态发生变化后，会进行新的更新状态过程。</p>
</li>
</ol>
<h4 id="4-6-3-3-OSPF在多点接入网络路由器中邻居关系的建立"><a href="#4-6-3-3-OSPF在多点接入网络路由器中邻居关系的建立" class="headerlink" title="4.6.3.3 OSPF在多点接入网络路由器中邻居关系的建立"></a>4.6.3.3 OSPF在多点接入网络路由器中邻居关系的建立</h4><img src="/posts/e255a10a/4.6.15.png" class="" title="OSPF邻居关系的建立">
<img src="/posts/e255a10a/4.6.16.png" class="" title="划分区域">
<p>区域之间分为主干区域和区域。在图中可以看到有4种路由器：</p>
<ol>
<li><strong>区域内路由器(IR)</strong>：只用于区域内通信。</li>
<li><strong>区域边界路由器(ABR)</strong>：用于区域间通信。</li>
<li><strong>自治系统边界路由器(ASBR)</strong>：用于和其他自治系统通信。</li>
<li><strong>主干路由器(BBR)</strong>：位于主干区域的路由器。</li>
</ol>
<p>使用分层次划分区域的方法，虽然使交换信息的种类变多了，也使OSPF协议更复杂了，但是能使区域内部交换信息量大大减少，使得OSPF能用于规模很大的自治系统中。</p>
<h3 id="4-6-4-边界网关协议-BGP-的基本工作原理"><a href="#4-6-4-边界网关协议-BGP-的基本工作原理" class="headerlink" title="4.6.4 边界网关协议(BGP)的基本工作原理"></a>4.6.4 边界网关协议(BGP)的基本工作原理</h3><img src="/posts/e255a10a/4.6.17.png" class="" title="边界网关协议">
<p>自治系统之间的路由选择必须考虑相关策略(政治、经济、安全等)。BGP只能是力求寻找一条能够到达目的网络且比较好的路由(不能兜圈子)，而并非要寻找一条最佳路由。</p>
<img src="/posts/e255a10a/4.6.18.png" class="" title="边界网关协议">
<img src="/posts/e255a10a/4.6.19.png" class="" title="边界网关协议">
<img src="/posts/e255a10a/4.6.20.png" class="" title="边界网关协议">
<img src="/posts/e255a10a/4.6.21.png" class="" title="边界网关协议">
<h4 id="4-6-4-1-四种BGP-4报文"><a href="#4-6-4-1-四种BGP-4报文" class="headerlink" title="4.6.4.1 四种BGP-4报文"></a>4.6.4.1 四种BGP-4报文</h4><ol>
<li>OPEN(打开)报文：用来与相邻的另一个BGP发言人建立关系，使通信初始化</li>
<li>UPDATE(更新)报文：用来通告某一路由的信息，以及列出要撤销的多条路由</li>
<li>KEEPALIVE(保活)报文：用来周期性地证实邻站的连通性</li>
<li>NOTIFICATION(通知)报文：用来发送检测到的差错</li>
</ol>
<p>BGP刚刚运行时，BGP的邻站会交换整个BGP路由表，以后只需要在路由情况发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。</p>
<img src="/posts/e255a10a/4.6.22.png" class="" title="习题">
<h2 id="4-7-IPv4数据报的首部格式"><a href="#4-7-IPv4数据报的首部格式" class="headerlink" title="4.7 IPv4数据报的首部格式"></a>4.7 IPv4数据报的首部格式</h2><img src="/posts/e255a10a/4.7.1.png" class="" title="IP数据报组成">
<p>在IP协议中分为两部分：</p>
<ul>
<li>固定部分：由20字节组成，是每个IP数据报都必须包含的部分。</li>
<li>可变部分：可选字段，由40个字节组成，用来增加IP数据报的功能。</li>
</ul>
<p>IP数据报的首部的每一行都由32个比特（4个字节）组成。在图中的每个小格子称为字段或者域。每个字段或者某个字段的组合用来表示IP协议的相关功能。</p>
<p><strong>相关字段功能解释</strong>：</p>
<ul>
<li><p>版本：占4比特，表示IP协议的版本。</p>
<p>通信双方使用的IP协议的版本必须一致，目前广泛使用的IP协议版本号为4(即IPv4)。</p>
</li>
<li><p>首部长度：占4比特，表示IP数据报首部的长度。</p>
<p>该字段的取值以4字节为单位。</p>
<p>最小十进制取值为5，表示IP数据报首部只有20字节固定部分；最大十进制取值为15，表示IP数据报首部包含20字节固定部分和最大40字节可变部分。</p>
</li>
<li><p>区分服务：占8比特，用来获得更好的服务。</p>
<p>该字段在旧标准中叫作服务类型，但实际上一直没有被使用过。</p>
<p>只有在使用区分服务时，该字段才起作用。利用该字段的不同数值可提供不同等级的服务质量。一般情况下都不使用该字段。</p>
</li>
<li><p>总长度：占16比特，表示IP数据报的总长度(首部+数据载荷)。</p>
<p>最大取值为十进制的65535，以字节为单位。</p>
</li>
<li><p>标识：占16比特。</p>
<p>属于同一个数据报的各分片数据报应该具有相同的标识。</p>
<p>IP软件维持一个计数器，每产生一个数据报，计数器值加1，并将此值赋给标识字段。</p>
</li>
<li><p>标志：占3比特，各比特含义如下：</p>
<p>​            DF位：1表示不允许分片；0表示允许分片</p>
<p>​            MF位：1表示“后面还有分片”，0表示“这是最后一个分片”</p>
<p>​            保留位：必须为0</p>
</li>
<li><p>片偏移：占13比特，指出分片数据报的数据载荷部分偏移其在原数据报的位置有多少个单位。</p>
<p>片偏移以8个字节为单位。</p>
</li>
<li><p>生存时间TTL：占8比特。</p>
<p>最初以秒为单位，最大生存周期为255秒。路由器转发IP数据报时，将IP数据报首部中的该字段的值减去IP数据报在本路由器上所耗费的时间，若不为0就转发，否则丢弃。</p>
<p>现在以“跳数”为单位，路由器转发IP数据报时，将IP数据报首部中的该字段的值减1，若不为0就转发，否则丢弃。</p>
</li>
<li><p>协议：占8比特，指明IPv4数据报的数据部分是何种协议数据单元。</p>
<p>常用的一些协议和相应的协议字段值如下：</p>
<p>| 协议名称   | ICMP | IGMP | TCP  | UDP  | IPv6 | OSPF |<br>| ————— | —— | —— | —— | —— | —— | —— |<br>| 协议字段值 | 1    | 2    | 6    | 17   | 41   | 89   |</p>
</li>
<li><p>首部校验和：占16比特，用来检测首部在传输过程中是否出现差错。比CRC校验码简单，称为因特网校验和。</p>
<p>IP数据报每经过一个路由器，路由器都要重新计算首部校验和，因为某些字段(生存时间、标志、片偏移等)的取值可能发生变化。</p>
<p>由于IP层本身并不提供可靠传输的服务，并且计算首部校验和是一项耗时的操作，因此在IPv6中，路由器不再计算首部校验和，从而更快转发IP数据报。</p>
</li>
<li><p>源IP地址和目的IP地址：各占32比特，用来填写发送该IP数据报的源主机的IP地址和接收该IP数据报的目的主机的IP地址。</p>
</li>
<li><p>可选字段：长度从1个字节到40个字节不等，用来支持排错、测量及安全等措施。</p>
<p>可选字段增加了IP数据报的功能，但这同时也使得IP数据报的首部长度成为可变的。这就增加了每一个路由器处理IP数据报的开销。实际上可选字段很少被使用。</p>
</li>
<li><p>填充字段：因为IP地址首部的可选字段的长度为1个字节到40个字节不等，为了确保首部长度整体为4字节的倍数，因此需要用首部填充字段进行填充。</p>
</li>
</ul>
<h3 id="4-7-1-数据载荷"><a href="#4-7-1-数据载荷" class="headerlink" title="4.7.1 数据载荷"></a>4.7.1 数据载荷</h3><img src="/posts/e255a10a/4.7.2.png" class="" title="数据载荷">
<h3 id="4-7-2-IP数据报分片"><a href="#4-7-2-IP数据报分片" class="headerlink" title="4.7.2 IP数据报分片"></a>4.7.2 IP数据报分片</h3><p>标识、标志、片偏移这三个字段共同用于数据报分片，此时就引起了数据报分片的概念。</p>
<p>简单来说，数据报分片就是数据报长度超过最大传输单元(MTU)时，将数据报进行分割的操作。</p>
<p>数据报长度超过最大传输单元(MTU)时将无法封装成帧，因此就将原IP数据报进行分片，使其成为更小的IP数据报。再逐个分配IP数据报封装成帧进行递交给物理层处理。</p>
<img src="/posts/e255a10a/4.7.3.png" class="" title="IP数据报分片">
<img src="/posts/e255a10a/4.7.4.png" class="" title="例子">
<img src="/posts/e255a10a/4.7.5.png" class="" title="例子">
<img src="/posts/e255a10a/4.7.7.png" class="" title="习题一">
<h3 id="4-7-3-TTL防止路由环路"><a href="#4-7-3-TTL防止路由环路" class="headerlink" title="4.7.3 TTL防止路由环路"></a>4.7.3 TTL防止路由环路</h3><img src="/posts/e255a10a/4.7.6.png" class="" title="TTL防止路由环路">
<img src="/posts/e255a10a/4.7.8.png" class="" title="习题二">
<img src="/posts/e255a10a/4.7.9.png" class="" title="习题二">
<img src="/posts/e255a10a/4.7.10.png" class="" title="习题二">
<h2 id="4-8-网际控制报文协议-ICMP"><a href="#4-8-网际控制报文协议-ICMP" class="headerlink" title="4.8 网际控制报文协议(ICMP)"></a>4.8 网际控制报文协议(ICMP)</h2><ul>
<li>ICMP是为了更有效地转发IP数据报和提高交付成功的机会，在网际层使用了网际控制报文协议(Internet Control Message Protocol，ICMP)。</li>
<li>主机或路由器使用ICMP来发送差错报文和询问报文。</li>
<li>ICMP报文被封装在IP数据报中发送。</li>
</ul>
<h3 id="4-8-1-ICMP中的差错报告报文"><a href="#4-8-1-ICMP中的差错报告报文" class="headerlink" title="4.8.1 ICMP中的差错报告报文"></a>4.8.1 ICMP中的差错报告报文</h3><p>ICMP中差错报告报文共有5种，分别是：终点不可达、源点抑制、时间超过、参数问题、改变路由(重定向)。</p>
<p>终点不可达：</p>
<img src="/posts/e255a10a/4.8.1.png" class="" title="终点不可达">
<p>源点抑制：</p>
<img src="/posts/e255a10a/4.8.3.png" class="" title="源点抑制">
<p>时间超过：</p>
<img src="/posts/e255a10a/4.8.2.png" class="" title="时间超过">
<p>另外，当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，也会向源点发送时间超过报文。</p>
<p>参数问题：</p>
<img src="/posts/e255a10a/4.8.4.png" class="" title="参数问题">
<p>改变路由：</p>
<img src="/posts/e255a10a/4.8.5.png" class="" title="改变路由">
<p>以下情况不应发送ICMP差错报告报文：</p>
<ul>
<li>对ICMP差错报告报文不再发送ICMP差错报告报文</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文</li>
<li>对具有多播地址的数据报都不发送ICMP差错报告报文</li>
<li>对具有特殊地址(如127.0.0.0或0.0.0.0)的数据报不发送ICMP差错报告报文</li>
</ul>
<h3 id="4-8-2-ICMP中的询问报文"><a href="#4-8-2-ICMP中的询问报文" class="headerlink" title="4.8.2 ICMP中的询问报文"></a>4.8.2 ICMP中的询问报文</h3><img src="/posts/e255a10a/4.8.6.png" class="" title="询问报文">
<h3 id="4-8-3-ICMP的应用"><a href="#4-8-3-ICMP的应用" class="headerlink" title="4.8.3 ICMP的应用"></a>4.8.3 ICMP的应用</h3><h4 id="4-8-3-1-分组网间探测PING"><a href="#4-8-3-1-分组网间探测PING" class="headerlink" title="4.8.3.1 分组网间探测PING"></a>4.8.3.1 分组网间探测PING</h4><p>分组网间探测（Packet InterNet Groper，PING）：</p>
<ul>
<li>用来测试主机或路由器之间的连通性</li>
<li>应用层直接使用网际层的ICMP(没有经过运输层的TCP或UDP)</li>
<li>使用ICMP回送请求和回答报文</li>
</ul>
<h4 id="4-8-3-2-跟踪路由traceroute"><a href="#4-8-3-2-跟踪路由traceroute" class="headerlink" title="4.8.3.2 跟踪路由traceroute"></a>4.8.3.2 跟踪路由traceroute</h4><ul>
<li>用来测试IP数据报从源主机到达目的主机要经过哪些路由器</li>
<li>Windows版本<ul>
<li>tracert命令</li>
<li>应用层直接使用网际层ICMP</li>
<li>使用了ICMP回送请求和回答报文以及差错报告报文</li>
</ul>
</li>
<li>Unix版本<ul>
<li>traceroute命令</li>
<li>在运输层使用UDP协议</li>
<li>仅使用ICMP差错报告报文</li>
</ul>
</li>
</ul>
<p>跟踪路由traceroute实现原理：简单来说，就是先发送一个TTL = 1的报文，当TTL到达第一个路由器后TTL变为0，此时路由器会回送时间超过差错报文，此时就能知道第一个路由信息。此时源主机再发送TTL = 2 的报文，当TTL到达第二个路由器后TTL变为0，此时路由器会回送时间超过差错报文，此时就能够知道第二个路由的地址。如此反复，直到到达最后一个路由。</p>
<img src="/posts/e255a10a/4.8.7.png" class="" title="traceroute实现原理">
<img src="/posts/e255a10a/4.8.8.png" class="" title="traceroute实现原理">
<img src="/posts/e255a10a/4.8.9.png" class="" title="traceroute实现原理">
<h2 id="4-9-虚拟专用网VPN和网络地址转换NAT"><a href="#4-9-虚拟专用网VPN和网络地址转换NAT" class="headerlink" title="4.9 虚拟专用网VPN和网络地址转换NAT"></a>4.9 虚拟专用网VPN和网络地址转换NAT</h2><h3 id="4-9-1-虚拟专用网VPN-Virtual-Private-Network"><a href="#4-9-1-虚拟专用网VPN-Virtual-Private-Network" class="headerlink" title="4.9.1 虚拟专用网VPN(Virtual Private Network)"></a>4.9.1 虚拟专用网VPN(Virtual Private Network)</h3><img src="/posts/e255a10a/4.9.1.png" class="" title="如何让两个专用网络进行通信">
<p>第一种方式就是采用电信公司的通信线路，这种方法简单方便，但是租金太贵。</p>
<p>第二种方式就是将两个网络通过因特网进行通信，但是他们之间的IP地址又如何分配？</p>
<p>首先明确一个概念：</p>
<ul>
<li><p>利用公用的因特网作为本机构各专用网之间的通信载体，这样的专用网称为虚拟专用网（VPN）</p>
</li>
<li><p>由于IPv4地址的紧缺，一个机构在因特网上能够申请到的IPv4的地址数量往往是小于本机构所拥有得到主机数量。因此，虚拟专用网中个主机所分配的地址应该是本机构可自由分配的专用地址，而不是需要申请的、在因特网上使用的公有地址。</p>
</li>
<li><p>在IPv4地址空间中就规定了这样的特殊地址分配方案：</p>
<blockquote>
<p>专用(私有)地址：</p>
<p>10.0.0.0~10.255.255.255(10/8地址块)</p>
<p>172.16.0.0~172.31.255.255(172.16/12地址块)</p>
<p>192.168.0.0~192.168.255.255(192.168/16地址块)</p>
</blockquote>
<p>这些地址可以在本地自由分配，不会在因特网中造成冲突。私有地址只能用作本地地址，不能用作全球地址。</p>
</li>
</ul>
<p>本地地址：仅在机构内部使用的 IP 地址，可以由本机构自行分配，而不需要向互联网的管理机构申请。</p>
<p>全球地址：全球唯一的 IP 地址，必须向互联网的管理机构申请。</p>
<p>在因特网中的所有路由器，对目的地址是私有地址的IP数据报一律不进行转发。</p>
<p>为了使两个部门的网络能够跟因特网连通，因此还需要两个路由器具有合法的全球IP地址，这样才能实现通过因特网通信。</p>
<img src="/posts/e255a10a/4.9.2.png" class="" title="通过因特网进行通信">
<p>虽然两个专用网内的主机间发送的数据报是通过了公用的因特网，但在逻辑上就好像是在本机构的专用网上传送一样。数据报在因特网中可能要经过多个网络和路由器，但从逻辑上看，R1和R2之间好像是一条直通的点对点链路，因此这种通信方式又称为IP隧道技术。</p>
<img src="/posts/e255a10a/4.9.3.png" class="" title="IP隧道技术">
<p>如上图所示，同一机构内不同部门的内部网络所构成的虚拟专用网VPN又称为内联网VPN。</p>
<p>有时一个机构的VPN需要有某些外部机构(通常就是合作伙伴)参加进来，这样的VPN就称为外联网VPN。</p>
<p>在外地工作的员工需要访问公司内部的专用网络时，只要在任何地点接入到因特网，运行驻留在员工PC中的VPN软件，在员工的PC和公司的主机之间建立VPN隧道，即可访问专用网络中的资源，这种VPN称为远程接入VPN。</p>
<h3 id="4-9-2-网络地址转换NAT-Network-Address-Translation"><a href="#4-9-2-网络地址转换NAT-Network-Address-Translation" class="headerlink" title="4.9.2 网络地址转换NAT(Network Address Translation)"></a>4.9.2 网络地址转换NAT(Network Address Translation)</h3><p>虽然因特网采用了无分类编址方式来减缓IPv4地址空间耗尽的速度，但由于因特网用户数目的激增，特别是大量小型办公室网络和家庭网络接入因特网的需求不断增加，IPv4地址空间即将面临耗尽的危险仍然没有解除。</p>
<p>1994年提出了一种网络地址转换NAT的方法再次缓解了IPv4地址空间即将耗尽的问题。NAT能使大量使用内部专用地址的专用网络用户共享少量外部全球地址来访问因特网上的主机和资源。</p>
<p>例如使用私有地址的主机要给因特网上使用全球IP地址的主机发送IP数据报：</p>
<img src="/posts/e255a10a/4.9.4.png" class="" title="私有地址给全球地址发送数据报">
<p>因特网上的全球IP地址主机给源主机发回数据报：</p>
<img src="/posts/e255a10a/4.9.5.png" class="" title="全球地址给私有地址发送数据报">
<p>NAT路由器接收到数据报后，根据首部的目的地址，查找NAT转换表后进行转换，转换成目的主机本地地址后进行传输。</p>
<p>当专用网中的这两台使用私有地址的主机都要给因特网使用全球地址的另一台主机发送数据报时，在NAT路由器的NAT转换表中就会产生两条记录，分别记录两个私有地址与全球地址的对应关系。</p>
<img src="/posts/e255a10a/4.9.6.png" class="" title="私有地址给全球地址发送数据报">
<p>该转换方法存在一个问题：如果NAT路由器具有N个全球IP地址，那么至多只能有N个内网主机能够同时和因特网上的主机通信。</p>
<p>解决方法：由于绝大多数的网络应用都是使用运输层协议TCP或UDP来传送数据，因此可以利用运输层的端口号和IP地址一起进行转换。这样，用一个全球IP地址就可以使多个拥有本地地址的主机同时和因特网上的主机进行通信。这种将端口号和IP地址一起进行转换的技术叫作网络地址与端口号转换NAPT(Network Address and Port Translation)。</p>
<img src="/posts/e255a10a/4.9.7.png" class="" title="采用NAPT解决">
<img src="/posts/e255a10a/4.9.8.png" class="" title="通信不能由外网主机首先发起">
<p>对于一些P2P网络应用，需要外网主机主动与内网主机进行通信，在通过NAT时会遇到问题，需要网络应用自己使用一些特殊的NAT穿越技术来解决问题。另外，由于NAT对外网屏蔽了内网主机的网络地址，能为内网的主机提供一定的安全保护。</p>
<h1 id="5-运输层"><a href="#5-运输层" class="headerlink" title="5. 运输层"></a>5. 运输层</h1><h2 id="5-1-运输层概述"><a href="#5-1-运输层概述" class="headerlink" title="5.1 运输层概述"></a>5.1 运输层概述</h2><img src="/posts/e255a10a/5.1.1.png" class="" title="引入">
<img src="/posts/e255a10a/5.1.2.png" class="" title="引入">
<p>假设进程1与进程4之间进行基于网络的通信，它们通信的简单过程如下：</p>
<ol>
<li>根据不同的进程，在运输层选择使用不同的端口</li>
<li>通过网络层及其下层来传输应用层报文</li>
<li>将收到的应用层报文到达接收方的运输层后，通过不同的端口，交付给应用层中相应的应用进程</li>
</ol>
<p>ps：这里端口并不是指看得见、摸得着的物理端口，而是指用来区分不同应用进程的标识符。</p>
<p>运输层向高层用户屏蔽了下面网络核心的细节(如网络拓扑、所采用的路由选择协议等)，它使应用进程看见的就好像是在两个运输层实体之间有一条端到端的逻辑通信信道。</p>
<p>根据应用需求的不同，因特网的运输层为应用层提供了两种不同的运输协议，即面向连接的TCP和无连接的UDP。</p>
<h2 id="5-2-运输层端口号、复用和分用的概念"><a href="#5-2-运输层端口号、复用和分用的概念" class="headerlink" title="5.2 运输层端口号、复用和分用的概念"></a>5.2 运输层端口号、复用和分用的概念</h2><ul>
<li>在操作系统中，运行在计算机上的进程使用进程标识符PID来标志，但是因特网上的计算机并不是使用统一的操作系统，不同的操作系统使用不同格式的进程标识符。</li>
<li>为了使运行不同系统的计算机的应用进程之间能够进行网络通信，就必须使用统一的方法来对TCP/IP体系的应用进程进行标识。</li>
<li>TCP/IP体系的运输层使用端口号来区分应用层的不同应用进程。</li>
<li>端口号使用16比特表示，取值范围0~65535<ul>
<li>熟知端口号：0~1023，IANA把这些端口号指派给了TCP/IP体系中最重要的一些应用协议，例如：FTP使用21/20，HTTP使用80，DNS使用53，HTTPS使用443</li>
<li>登记端口号：1024~49151，为没有熟知端口号的应用程序使用。使用这类端口号必须在IANA按照规定的手续登记，以防止重复。例如：Microsoft RDP微软远程桌面使用的端口是3389</li>
<li>短暂端口号：49152~65535，留给客户进程选择暂时使用。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后，这个端口号可供其它客户进程以后使用</li>
</ul>
</li>
<li>端口号只具有本地意义，即端口号只是为了标识本计算机应用层中的各进程，在因特网中，不同计算机中的相同端口号是没有联系的。</li>
</ul>
<h3 id="5-2-1-发送方的复用和接收方的分用"><a href="#5-2-1-发送方的复用和接收方的分用" class="headerlink" title="5.2.1 发送方的复用和接收方的分用"></a>5.2.1 发送方的复用和接收方的分用</h3><img src="/posts/e255a10a/5.2.1.png" class="" title="发送方的复用和接收方的分用">
<p>发送方的某些应用进程所发送的不同应用报文，在运输层使用UDP协议进行封装，称为UDP复用；而另一些应用进程所发送的不同应用报文，在运输层使用TCP协议进行封装，称为TCP复用。</p>
<h3 id="5-2-2-TCP-IP体系的应用层常用协议所使用的运输层熟知端口号"><a href="#5-2-2-TCP-IP体系的应用层常用协议所使用的运输层熟知端口号" class="headerlink" title="5.2.2 TCP/IP体系的应用层常用协议所使用的运输层熟知端口号"></a>5.2.2 TCP/IP体系的应用层常用协议所使用的运输层熟知端口号</h3><img src="/posts/e255a10a/5.2.2.png" class="" title="熟知端口号">
<p>举例：运输层端口号</p>
<img src="/posts/e255a10a/5.2.3.png" class="" title="运输层端口号">
<p>DNS服务器：记录有某域名所对应的IP地址，在输入网页域名后，在hosts中找不到网页对应的IP地址时，就要通过DNS服务器获取域名对应的IP地址。</p>
<p>Web服务器：某域名的服务器，也就是前面几章所说的目的主机，在访问域名时IP数据报最终到达Web服务器，服务器进行响应。</p>
<p>假如我们在浏览器中输入某域名访问，若此时在本地hosts缓存中有该域名的IP地址，直接发送带有目的地址的IP数据报；若计算机中没有该域名对应的IP地址，进行以下操作：</p>
<ol>
<li><p>构建DNS请求报文，将该UDP请求封装成IP数据报通过以太网发送给DNS服务器。DNS服务器将UDP用户响应数据报封装在IP数据报中发送给用户。此时会将数据载荷，也就是DNS响应报文交给DNS进程进行处理，DNS进程将其响应报文进行解析，就可知道自己之前所请求的Web服务器的IP地址。</p>
<img src="/posts/e255a10a/5.2.4.png" class="" title="DNS请求与响应">
</li>
<li><p>知道域名对应的IP地址后，可以开始构建HTTP请求，构建该请求需要TCP首部，封装在IP数据报中并发送该请求到Web服务器。Web服务器在接收到报文后会对其进行解析，在知道其端口为80后，会将数据载荷部分传输给本服务器中的HTTP服务器端进程进行解析。解析到内容后按照其要求查找首页内容，查找到后会给用户PC发送HTTP响应报文。</p>
<img src="/posts/e255a10a/5.2.5.png" class="" title="HTTP请求与响应">
</li>
<li><p>用户PC接收到报文后进行解封，解封后发现目的端口是49152，也就是用户PC内的HTTP进程。因此将数据载荷（HTTP报文）传输给HTTP进程进行处理。HTTP进程解析到其内容后，在网页浏览器中进行展示。</p>
<img src="/posts/e255a10a/5.2.6.png" class="" title="用户PC显示内容">
</li>
</ol>
<h2 id="5-3-UDP与TCP的对比"><a href="#5-3-UDP与TCP的对比" class="headerlink" title="5.3 UDP与TCP的对比"></a>5.3 UDP与TCP的对比</h2><ol>
<li><p>连接方式上：</p>
<img src="/posts/e255a10a/5.3.1.png" class="" title="UDP与TCP">
</li>
<li><p>传播方式上：</p>
<img src="/posts/e255a10a/5.3.2.png" class="" title="UDP与TCP">
</li>
<li><p>报文传输处理上：</p>
<img src="/posts/e255a10a/5.3.3.png" class="" title="UDP与TCP">
</li>
<li><p>给上层提供服务上：</p>
<img src="/posts/e255a10a/5.3.4.png" class="" title="UDP与TCP">
</li>
<li><p>协议首部对比上：</p>
<img src="/posts/e255a10a/5.3.5.png" class="" title="UDP与TCP">
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>UDP(User Datagram Protocol)</th>
<th>TCP(Transmission Control Protocol)</th>
</tr>
</thead>
<tbody>
<tr>
<td>无连接</td>
<td>面向连接</td>
</tr>
<tr>
<td>支持一对一、一对多、多对一、多对多交互通信</td>
<td>每一条TCP连接只能有两个端点，只能一对一通信</td>
</tr>
<tr>
<td>对应用层交付的报文直接打包</td>
<td>面向字节流</td>
</tr>
<tr>
<td>尽最大努力交付，也就是不可靠；不使用流量控制和拥塞控制</td>
<td>可靠传输，使用流量控制和拥塞控制</td>
</tr>
<tr>
<td>首部开销小，仅8个字节</td>
<td>首部最小20字节，最大60字节</td>
</tr>
</tbody>
</table>
</div>
<h2 id="5-4-TCP流量控制"><a href="#5-4-TCP流量控制" class="headerlink" title="5.4 TCP流量控制"></a>5.4 TCP流量控制</h2><ul>
<li>对于数据传输，我们希望传输得越快越好，但是若传输过快会导致接收方不够时间接收数据，造成数据丢失。</li>
<li>流量控制(flow control)就是为了让发送方速率不要太快，要让接收方来得及接收。</li>
<li>利用滑动窗口机制可以很方便地在TCP连接上实现对发送方的流量控制。</li>
</ul>
<img src="/posts/e255a10a/5.4.1.png" class="" title="TCP流量控制">
<p>ACK = 1：表示是一个TCP确认字段<br>ack = 201：201编号以前的数据全部确认收到<br>rwnd = 300：将接收窗口大小调整为300</p>
<img src="/posts/e255a10a/5.4.2.png" class="" title="TCP流量控制">
<img src="/posts/e255a10a/5.4.3.png" class="" title="TCP流量控制">
<p>此时由于窗口为0，不再发送数据。</p>
<img src="/posts/e255a10a/5.4.4.png" class="" title="TCP流量控制">
<p>为了解决这个问题，TCP为每一个连接设有一个持续计时器。在连接的一方接收到对方的零窗口通知后一段时间后，超时计时器到时，就会发送一个1字节的零窗口发送报文，在接收方接收到该信号后，就会通告自己的窗口大小。当知道窗口可以传输数据后，就会开始通信。</p>
<img src="/posts/e255a10a/5.4.5.png" class="" title="TCP流量控制">
<p>上图如果零窗口探测报文在发送过程中如果丢失，还是能打破死锁局面。因为零窗口探测报文段也有重传计时器，重传计时器超时后，零窗口探测报文段会被重传。</p>
<p>值得注意的是，TCP中规定不论接收方有没有空间，都必须接收发送方的3种报文：零窗口检测报文段、确认报文段、携带有紧急数据的报文段。</p>
<h2 id="5-5-TCP拥塞控制"><a href="#5-5-TCP拥塞控制" class="headerlink" title="5.5 TCP拥塞控制"></a>5.5 TCP拥塞控制</h2><ul>
<li><p>拥塞指的是某段时间内，若对网络中的某一资源的需求超过了该资源所能提供的可用部分，网络性能就要变坏。</p>
<ul>
<li>在计算机网络中的资源包括链路容量（即带宽）、交换节点中的缓存和处理机等。</li>
</ul>
</li>
<li>若出现拥塞而不进行控制，整个网络的吞吐量将随输入负载的增大而下降。</li>
</ul>
<img src="/posts/e255a10a/5.5.1.png" class="" title="TCP拥塞控制">
<p>在图中，绿色指的是理想情况下不发生拥塞的情况，此时吞吐量与输入负载相等。当网络资源数被全部利用时，吞吐量不再增长。</p>
<p>红色线指的是出现拥塞不进行处理，会导致吞吐量下降，直到吞吐量为零，产生死锁现象。</p>
<p>蓝色线是实际的拥塞控制曲线，在出现拥塞后采用拥塞控制措施，使吞吐量保持在一定水平。</p>
<p>拥塞控制的4种算法：慢开始(slow-start)、拥塞避免(congestion avoidance)、快重传(fast retransmit)、快恢复(fast recovery)。</p>
<p>在讨论4种算法前，假定如下条件：</p>
<ol>
<li>数据是单方向传送，而另一个方向只传送确认</li>
<li>接收方总是有足够大的缓存空间，因而发送方发送窗口的大小由网络的拥塞程度来决定</li>
<li>以最大报文段(MSS)的个数为讨论问题的单位，而不是以字节为单位</li>
</ol>
<img src="/posts/e255a10a/5.5.2.png" class="" title="TCP拥塞控制">
<h3 id="5-5-1-慢开始与拥塞避免"><a href="#5-5-1-慢开始与拥塞避免" class="headerlink" title="5.5.1 慢开始与拥塞避免"></a>5.5.1 慢开始与拥塞避免</h3><ul>
<li>慢开始算法是用来确定网络的负载能力或拥塞程度。</li>
<li>算法是实现是由小到大逐渐增大（以倍数增长）拥塞窗口数值。<br>以一次数据报文传输过程学习慢开始算法</li>
<li>慢开始指的是一开始网络注入的报文段少，并不是指拥塞窗口cwnd的增长速度慢。</li>
</ul>
<img src="/posts/e255a10a/5.5.3.png" class="" title="慢开始">
<p>拥塞窗口达到慢开始门限ssthresh后，慢开始算法使用阶段结束，开始拥塞避免算法阶段。</p>
<ul>
<li>拥塞避免算法让拥塞窗口 cwnd 缓慢地增大（每轮窗口大小+1），避免出现拥塞。</li>
<li>在拥塞避免阶段，具有 “加法增大” (Additive Increase) 的特点。</li>
<li>拥塞避免算法并不能完全避免拥塞，只是在拥塞避免阶段将容易拥塞的窗口控制为按线性规律增长，使网络比较不容易出现拥塞。</li>
</ul>
<img src="/posts/e255a10a/5.5.4.png" class="" title="拥塞避免">
<p>循环重复此传输过程，若传输过程中部分报文段丢失，在重传计时器时间内没有收到确认报文(即重传计时器超时)，则判断网络很可能出现了拥塞。进行以下工作：</p>
<ol>
<li>将ssthresh值更新为拥塞时cwnd值的一半</li>
<li>将cwnd值减少为1，重新开始执行慢开始算法</li>
</ol>
<img src="/posts/e255a10a/5.5.5.png" class="" title="拥塞避免">
<h3 id="5-5-2-快重传与快恢复"><a href="#5-5-2-快重传与快恢复" class="headerlink" title="5.5.2 快重传与快恢复"></a>5.5.2 快重传与快恢复</h3><img src="/posts/e255a10a/5.5.6.png" class="" title="快重传与快恢复">
<ul>
<li>采用快重传算法可以让发送方尽早知道发生了个别报文段的丢失。</li>
<li>所谓快重传，就是使发送方尽快进行重传，而不是等超过重传计时器超时再重传。<ul>
<li>要求接收方不要等待自己发送数据时才进行捎带确认，而是要立即发送确认。</li>
<li>即使收到了失序的报文段也要立即发出对已收到的报文段的重复确认。</li>
<li>发送方一旦收到了3个连续的重复确认，就将相应的报文段立即重传，而不是等该报文段的超时重传计时器超时再重传。</li>
<li>对于个别丢失的报文段，发送方不会出现超时重传，也就不会误认为出现了拥塞(进而降低拥塞窗口cwnd为1)。使用快重传可以使整个网络的吞吐量提高约20%。</li>
</ul>
</li>
</ul>
<img src="/posts/e255a10a/5.5.7.png" class="" title="快重传">
<ul>
<li>发送方一旦收到3个重复确认，就知道现在只是丢失了个别的报文段。于是不启动慢开始算法，而执行快恢复算法。<ul>
<li>发送方将慢开始门限ssthresh值和拥塞窗口cwnd值调整为当前窗口的一半，开始执行拥塞避免算法。</li>
<li>也有的快恢复实现是把快恢复开始时的拥塞窗口cwnd值再增大一些，即等于新的ssthresh+3。<ul>
<li>既然发送方收到了3个重复的确认，就表明有3个数据报文段已经离开了网络；</li>
<li>这3个报文段不再消耗网络资源而是停留在接收方的接收缓存中；</li>
<li>可见现在网络中不是堆积了报文段而是减少了3个报文段，因此可以适当把拥塞窗口扩大些。</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="/posts/e255a10a/5.5.8.png" class="" title="四种算法综合">
<h2 id="5-6-TCP超时重传时间的选择"><a href="#5-6-TCP超时重传时间的选择" class="headerlink" title="5.6 TCP超时重传时间的选择"></a>5.6 TCP超时重传时间的选择</h2><p>TCP超时重传时间的选择是TCP最复杂的问题之一，若超时重传时间(RTO)比往返时间(RTT)短会导致不必要的重传，使网络负荷增大；若RTO比RTT过长会导致网络的空闲时间增大，降低了传输效率。因此，RTO的设置应该略大于往返时间(RTT)。但是此时又会出现一个问题，由于网络传输环境的不同，导致接下来的RTT是不确定的，如此应该如何认定RTO？</p>
<img src="/posts/e255a10a/5.6.1.png" class="" title="TCP超时重传时间的选择">
<img src="/posts/e255a10a/5.6.2.png" class="" title="TCP超时重传时间的选择">
<img src="/posts/e255a10a/5.6.3.png" class="" title="TCP超时重传时间的选择">
<img src="/posts/e255a10a/5.6.4.png" class="" title="TCP超时重传时间的选择">
<img src="/posts/e255a10a/5.6.5.png" class="" title="TCP超时重传时间的选择">
<p>举例：</p>
<img src="/posts/e255a10a/5.6.6.png" class="" title="例子">
<h2 id="5-7-TCP可靠传输的实现"><a href="#5-7-TCP可靠传输的实现" class="headerlink" title="5.7 TCP可靠传输的实现"></a>5.7 TCP可靠传输的实现</h2><p>TCP基于以字节为单位的滑动窗口来实现可靠传输。</p>
<p>例如：接收方告诉发送方它的接收窗口为20字节，确认号字段的值为31，这表明接收方希望收到下一个数据的序号为31，序号为31前的数据已被正确接收。</p>
<img src="/posts/e255a10a/5.7.1.png" class="" title="TCP可靠传输">
<img src="/posts/e255a10a/5.7.2.png" class="" title="TCP可靠传输的例子">
<img src="/posts/e255a10a/5.7.3.png" class="" title="TCP可靠传输的例子">
<p>若接收方收到未按序到达的数据，如本例收到32、33编号字节数据，由于TCP的确认方式是只能发送按序收到的最高序号确认，因此发送一个ack = 31的确认信号，也就是表示现在需要发送方发送31号数据。</p>
<p>发送方收到ack = 31报文后，知道31号数据未按序到达，但是根据上面所学的知识，只有3次接收到同一个ack信号才会进行重传，此时不做处理，继续发送往下的数据。</p>
<img src="/posts/e255a10a/5.7.4.png" class="" title="TCP可靠传输的例子">
<p>此时若成功接收到31号数据，此时31到33号数据按序到达，此时接收方会择机将数据交给应用层，并且将窗口向后滑动3字节，同时发送确认报文。</p>
<img src="/posts/e255a10a/5.7.5.png" class="" title="TCP可靠传输的例子">
<p>在接收方发送的确认报文被发送方收到后，会将发送窗口向后滑动若干字节（此处为3字节）。发送方此时会将31、32、33字节数据从缓存中删除。此时若发送方又发送了3个未按序到达的数据，接收方接受数据后不做处理。</p>
<img src="/posts/e255a10a/5.7.6.png" class="" title="TCP可靠传输的例子">
<p>若发送方发送完全部的发送窗口数据，此时不能再发送数据。若迟迟等不到接收方确认信号，重传计时器超时，此时会重新发送发送窗口内已发送的数据，并重启重传计时器。</p>
<img src="/posts/e255a10a/5.7.7.png" class="" title="TCP可靠传输">
<img src="/posts/e255a10a/5.7.8.png" class="" title="习题一">
<img src="/posts/e255a10a/5.7.9.png" class="" title="习题二">
<h2 id="5-8-TCP的运输连接管理"><a href="#5-8-TCP的运输连接管理" class="headerlink" title="5.8 TCP的运输连接管理"></a>5.8 TCP的运输连接管理</h2><img src="/posts/e255a10a/5.8.1.png" class="" title="TCP的运输连接管理">
<h3 id="5-8-1-TCP的连接建立-三次握手"><a href="#5-8-1-TCP的连接建立-三次握手" class="headerlink" title="5.8.1 TCP的连接建立(三次握手)"></a>5.8.1 TCP的连接建立(三次握手)</h3><p>TCP的连接建立要解决以下三个问题：</p>
<ol>
<li>使TCP双方都能确知对方的存在</li>
<li>使TCP双方能够协商一些参数（如窗口最大值、是否使用窗口扩大选项和时间戳选项和服务质量等等）</li>
<li>使TCP双方能够对运输实体资源（如缓存大小、连接表中的项目等）进行分配</li>
</ol>
<p>使用三报文握手建立连接的具体过程：</p>
<p>在最开始，客户端和服务器都是处于关闭状态，此时双方的TCP进程都是关闭的。服务器在连接之前要进行准备，创建传输控制块，在块中有TCP连接表等一些TCP连接的重要信息。创建后便开始监听，准备接收来自客户端的连接请求。与服务器类似，客户端进程也需要进行准备，其准备过程只有创建传输数据块。准备完毕后开始“握手”。</p>
<img src="/posts/e255a10a/5.8.3.png" class="" title="TCP的运输连接管理">
<p>在打算建立TCP连接时，客户端向服务器进程发送TCP连接请求报文段，并进入同步已发送状态。TCP连接请求报文段首部中，有两个关键数据位：</p>
<ul>
<li>同步位SYN：被设置为1，表明这是一个TCP连接请求报文段</li>
<li>序号字段seq：被设置了一个初始值x，作为TCP客户端进程所选择的初始序号</li>
</ul>
<p>注意：TCP规定SYN被设置为1的报文段不能携带数据，但要消耗掉一个序号。</p>
<img src="/posts/e255a10a/5.8.4.png" class="" title="TCP的运输连接管理">
<p>TCP服务器进程收到客户端发送的TCP连接请求报文段后，如果同意建立连接，则向TCP客户进程发送TCP连接请求确认报文段，并进入同步已接收状态。TCP连接请求确认报文段首部中有几个关键数据位：</p>
<ul>
<li>同步位SYN和确认位ACK：都设置为1，表明这是一个TCP连接请求确认报文段</li>
<li>序号字段seq：设置了一个初始值y，作为TCP服务器进程所选择的初始序号</li>
<li>确认号字段ack：值被设置成了x+1，这是对TCP客户进程所选择的初始序号（seq）的确认</li>
</ul>
<p>注意：这个报文段也不能携带数据，因为它是SYN被设置为1的报文段，但同样要消耗掉一个序号。</p>
<img src="/posts/e255a10a/5.8.5.png" class="" title="TCP的运输连接管理">
<p>TCP客户进程收到TCP连接请求确认报文段后，还要向TCP服务器进程发送一个普通的TCP确认报文段，并进入连接已建立状态。普通的TCP确认报文段首部中有以下重点数据位：</p>
<ul>
<li>确认位ACK：设置为1，由于没有SYN同步字段，表明这是一个普通的TCP确认报文段，表示已确认收到建立连接报文</li>
<li>序号字段seq：设置为x+1，因为TCP客户进程发送的第一个TCP报文段的序号为x，所以TCP客户进程发送的第二个报文段的序号为x+1（SYN字段报文需要消耗一个序号）</li>
<li>确认号字段ack：设置为y+1，这是对TCP服务器进程所选择的初始序号的确认</li>
</ul>
<p>注意：TCP规定普通的TCP确认报文段(只有ACK没有SYN)可以携带数据，但如果不携带数据，则不消耗序号。</p>
<p>三次握手完毕后，服务器也进入连接已建立状态，此时双方连接已建立，可以开始进行数据传输。</p>
<img src="/posts/e255a10a/5.8.2.png" class="" title="TCP的运输连接管理">
<p>为什么TCP客户进程最后还要发送一个普通的TCP确认报文段呢？是否多余？</p>
<img src="/posts/e255a10a/5.8.6.png" class="" title="两次握手">
<p>三次握手并不多余，三次握手建立连接是为了防止已经失效的连接请求报文段突然又传到服务端，产生错误。</p>
<h3 id="5-8-2-TCP的连接释放-四次挥手"><a href="#5-8-2-TCP的连接释放-四次挥手" class="headerlink" title="5.8.2 TCP的连接释放(四次挥手)"></a>5.8.2 TCP的连接释放(四次挥手)</h3><p>TCP通过四报文挥手来释放连接：</p>
<p>在双方连接已建立后，此时客户端主动发出关闭信号。</p>
<img src="/posts/e255a10a/5.8.7.png" class="" title="TCP的连接释放">
<p>TCP客户进程会发送TCP连接释放报文段，并进入终止等待1状态。TCP连接释放报文段首部中有以下关键数据位：</p>
<ul>
<li>终止位FIN和确认位ACK：值都被设置为1，表明这是一个TCP连接释放报文段，同时也对之前收到的报文段进行确认</li>
<li>序号字段seq：值设置为u，表示TCP客户进程之前已传送过的、数据的最后一个字节的序号加1</li>
<li>确认号字段ack：值设置为v，表示TCP服务器进程之前已传送过的、数据的最后一个字节的序号加1</li>
</ul>
<p>注意：TCP规定终止位FIN等于1的报文段即使不携带数据，也要消耗掉一个序号。</p>
<img src="/posts/e255a10a/5.8.8.png" class="" title="TCP的连接释放">
<p>接收方在接收到连接释放报文后，会发送一个普通的TCP确认报文段并且进入关闭等待状态。普通的TCP确认报文段首部中有以下关键数据位：</p>
<ul>
<li>确认位ACK：值被设置为1，表明这是一个普通的TCP确认报文段</li>
<li>序号字段seq：值设置为v，v等于TCP服务器进程之前已传送过的、数据的最后一个字节的序号加1，与之前收到的TCP连接释放报文段中的确认号ack值匹配</li>
<li>确认号字段ack：值为u+1，这是对TCP连接释放报文段的确认，也就是为发送方连接释放报文中的seq的值+1</li>
</ul>
<p>在进行第二次挥手后，会产生以下过程：</p>
<p>TCP服务器进程通知高层应用进程，TCP客户进程要断开与自己的TCP连接，此时的TCP连接进入半关闭状态。</p>
<p>所谓半关闭状态可以认为，此时客户端与服务器的连接不再传输数据，也就是客户端没有数据发送。而此时服务器若有剩余数据要发送会继续发送。客户端到服务器的数据传输信道关闭了，而服务器到客户端这一半没有关闭，因此称为半关闭状态。这个半关闭状态可能会持续一段时间，直到发送方没有数据进行发送。</p>
<p>在以上等待过程中，客户端会进入终止等待2状态：</p>
<img src="/posts/e255a10a/5.8.9.png" class="" title="TCP的连接释放">
<p>当服务器没有数据要传输后，进行第三次挥手：</p>
<img src="/posts/e255a10a/5.8.10.png" class="" title="TCP的连接释放">
<p>此时TCP服务器进程会发送TCP连接释放报文段并进入最后确认状态。在该报文段中有以下关键数据段：</p>
<ul>
<li>终止位FIN和确认位ACK：值都被设置为1，表明这是一个TCP连接释放报文段，同时也对之前收到的报文段进行确认</li>
<li>序号seq：值为w，因为在半关闭状态下，TCP服务器进程可能又发送一段数据，因此w就是该段数据最后的序号</li>
<li>确认号ack：值为u+1，这是对之前收到的TCP连接释放报文段的重复确认，因此值为发送方第一次挥手发送的seq值+1</li>
</ul>
<p>TCP客户进程收到TCP连接释放报文段后开始第四次挥手：</p>
<img src="/posts/e255a10a/5.8.11.png" class="" title="TCP的连接释放">
<p>此时针对第三次挥手的报文段发送普通的TCP确认报文段，之后进入时间等待状态。该报文段首部中有以下关键数据位：</p>
<ul>
<li>确认位ACK：值被设置为1，表明这是一个普通的TCP确认报文段</li>
<li>序号字段seq：值设置为u+1，用来表示最后一个发送的字节序号，这是因为TCP客户进程之前发送的TCP连接释放报文段(带有FIN)虽然不携带数据，但要消耗掉一个序号</li>
<li>确认号ack：值设置为w+1，这是对所收到的TCP连接释放报文段的确认</li>
</ul>
<p>TCP服务器进程收到该报文段后就进入关闭状态，而TCP客户进程还要经过2倍的MSL后才能进入关闭状态：</p>
<img src="/posts/e255a10a/5.8.12.png" class="" title="TCP的连接释放">
<p>MSL具体的值可以根据TCP协议的不同实现进行设置。</p>
<p>为什么不发送报文段后直接关闭，而是要等待2MSL个时间后才关闭？是否有必要？</p>
<img src="/posts/e255a10a/5.8.13.png" class="" title="TCP的连接释放">
<p>若客户端发送完最后一次报文后，也就是第四次挥手后就直接进入关闭状态，此时若第四次挥手报文丢失，会导致服务器的超时重传。</p>
<p>此时客户端又已经关闭，导致不接受该报文，因此服务器会一直不断重传，并一直处于最后确认状态无法进入关闭状态。</p>
<p>因此，有以下结论：客户端进入时间等待状态以及处于该状态2MSL时长，可以确保TCP服务器进程可以收到最后一个TCP确认报文段而进入关闭状态。</p>
<p>TCP客户进程在发送完最后一个TCP确认报文段后，再经过2MSL时长，就可以使本次连接持续时间内所产生的所有报文段都从网络中消失，这样就可以使下一个新的TCP连接中，不会出现旧连接中的报文段。</p>
<p>若出现这样一种情况：</p>
<p>TCP双方已经建立了连接，但是传输过程中TCP客户进程所在的主机出现了故障，此时TCP服务器进程以后就不能再收到TCP客户进程发来的数据，这时服务器进程会一直处于等待状态。为了使TCP服务器进程不要再白白等待下去，出现了TCP保活计时器：</p>
<img src="/posts/e255a10a/5.8.14.png" class="" title="TCP保活计时器">
<h2 id="5-9-TCP报文的首部格式"><a href="#5-9-TCP报文的首部格式" class="headerlink" title="5.9 TCP报文的首部格式"></a>5.9 TCP报文的首部格式</h2><ul>
<li>为了实现可靠传输，TCP采用了面向字节流的方式。</li>
<li>TCP在发送数据时，从发送缓存中取出一部分或者全部字节，并给其添加一个首部使之成为TCP报文段后进行发送。<ul>
<li>一个TCP报文段由首部和数据载荷两部分构成；</li>
<li>TCP的全部功能都体现在它首部中各字段的作用。</li>
</ul>
</li>
</ul>
<img src="/posts/e255a10a/5.9.1.png" class="" title="TCP报文的首部格式">
<p>TCP首部和IP地址的首部类似，都由固定部分和扩展部分构成。</p>
<p><strong>相关字段功能解释</strong>：</p>
<ul>
<li>源端口和目的端口：各占16比特。</li>
<li>序号：占32比特，取值范围<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="10.211ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 4513.2 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mn" transform="translate(278,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(778,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1222.7,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(500,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(2735,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3735.2,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(4235.2,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container>，序号增加到最后一个后，下一个序号又从0开始。用来指出本TCP报文段数据载荷的第一个字节的序号。</li>
<li>确认号：占32比特，取值范围<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="10.211ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 4513.2 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mn" transform="translate(278,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(778,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1222.7,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(500,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(2735,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3735.2,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(4235.2,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container>，确认号增加到最后一个后，下一个确认号又从0开始。用来指出期望收到对方下一个TCP报文段的数据载荷的第一个字节的序号，同时也是对之前收到的所有数据的确认。若确认号=n，则表明到序号n-1为止的所有数据都已被正确接收，期望接受序号为n的数据。</li>
<li>数据偏移：占4比特，并以4字节为单位。用来指出TCP报文段的数据载荷部分的起始处距离TCP报文段的起始处有多远。这个字段实际上指出了TCP报文段的首部长度，最小为20字节，最大为60字节。</li>
<li>保留：占6比特，保留为今后使用，但目前应置为0。</li>
<li>紧急标志位URG：1表示紧急指针字段有效；0表示无效。</li>
<li>确认标志位ACK：1表示确认号字段有效；0表示无效。TCP规定在连接建立后所有传送的TCP报文段都必须把ACK置1。</li>
<li>推送标志位PSH：接收方的TCP收到该标志位为1的报文段会尽快上交应用进程，而不必等到接收缓存都填满后再向上交付。</li>
<li>复位标志位RST：用来复位TCP连接。当RST=1时，表示TCP连接出现了异常，必须释放连接，然后再重新建立连接。RST置1还用来拒绝一个非法的报文段或拒绝打开一个TCP连接。</li>
<li>同步标志位SYN：在TCP连接建立时用来同步序号。</li>
<li>终止标志位FIN：用来释放TCP连接。</li>
<li>窗口：占16比特，以字节为单位。指出发送本报文段的一方的接收窗口。窗口值作为接收方让发送方设置其发送窗口的依据。这是以接收方的接受能力来控制发送方的发送能力，称为流量控制。</li>
<li>校验和：占16比特，检查范围包括TCP报文段的首部和数据载荷两部分。在计算校验和时，要在TCP报文段的前面加上12字节的伪首部。</li>
<li>紧急指针：占16比特，以字节为单位，用来指明紧急数据的长度。当发送方有紧急数据时，可将紧急数据插队到发送缓存的最前面，并立刻封装到一个TCP报文段中进行发送。紧急指针会指出本报文段数据载荷部分包含了多长的紧急数据，紧急数据之后是普通数据。</li>
<li>选项：<ul>
<li>最大报文段长度MSS选项：TCP报文段数据载荷部分的最大长度。</li>
<li>窗口扩大选项：为了扩大窗口(提高吞吐率)。</li>
<li>时间戳选项：①用来计算往返时间(RTT)；②用于处理序号超范围的情况，又称为防止序号绕回(PAWS)。</li>
<li>选择确认选项</li>
</ul>
</li>
<li>填充：由于选项的长度可变，因此使用填充来确保报文段首部是4的整数倍。</li>
</ul>
<h3 id="5-9-1-序号、确认号、ACK字段"><a href="#5-9-1-序号、确认号、ACK字段" class="headerlink" title="5.9.1 序号、确认号、ACK字段"></a>5.9.1 序号、确认号、ACK字段</h3><img src="/posts/e255a10a/5.9.2.png" class="" title="序号、确认号、ACK字段">
<h1 id="6-应用层"><a href="#6-应用层" class="headerlink" title="6. 应用层"></a>6. 应用层</h1><h2 id="6-1-应用层概述"><a href="#6-1-应用层概述" class="headerlink" title="6.1 应用层概述"></a>6.1 应用层概述</h2><p>应用层解决通过应用进程的交互来实现特定网络应用的问题。</p>
<p>应用层是计算机网络体系结构的最顶层，是设计和建立计算机网络的最终目的，也是计算机网络中发展最快的部分。</p>
<ul>
<li>早期基于文本的应用(电子邮件、远程登录、文件传输、新闻组)</li>
<li>20世纪90年代将因特网带入千家万户的万维网(WWW)</li>
<li>当今流行的即时通信、P2P文件共享及各种音视频应用</li>
<li>计算设备的小型化和“无处不在”，宽带住宅接入和无线接入的日益普及和迅速发展，为未来更多的新型应用提供了广阔的舞台</li>
</ul>
<img src="/posts/e255a10a/6.1.1.png" class="" title="应用层概述">
<h2 id="6-2-客户-服务器-C-S-方式和对等-P2P-方式"><a href="#6-2-客户-服务器-C-S-方式和对等-P2P-方式" class="headerlink" title="6.2 客户/服务器(C/S)方式和对等(P2P)方式"></a>6.2 客户/服务器(C/S)方式和对等(P2P)方式</h2><ul>
<li><p>网络应用程序运行在处于网络边缘的不同的端系统上，通过彼此间的通信来完成某项任务。</p>
</li>
<li><p>开发一种新的网络应用给首先要考虑的问题就是网络应用程序在各种端系统上的组织方式和他们之间的关系。</p>
<p>目前流行的主要有以下两种：</p>
<p>客户/服务器(Client/Server，C/S)方式<br>对等方式(Peer-to-Peer，P2P)方式</p>
</li>
</ul>
<h3 id="6-2-1-客户-服务器方式"><a href="#6-2-1-客户-服务器方式" class="headerlink" title="6.2.1 客户/服务器方式"></a>6.2.1 客户/服务器方式</h3><img src="/posts/e255a10a/6.2.1.png" class="" title="客户/服务器方式">
<h3 id="6-2-2-对等方式"><a href="#6-2-2-对等方式" class="headerlink" title="6.2.2 对等方式"></a>6.2.2 对等方式</h3><img src="/posts/e255a10a/6.2.2.png" class="" title="对等方式">
<h2 id="6-3-动态主机配置协议-DHCP"><a href="#6-3-动态主机配置协议-DHCP" class="headerlink" title="6.3 动态主机配置协议(DHCP)"></a>6.3 动态主机配置协议(DHCP)</h2><p>互联网广泛使用的动态主机配置协议 DHCP (Dynamic Host Configuration Protocol) ，它提供了即插即用连网 (plug-and-play networking) 的机制。这种机制允许一台计算机加入新的网络和自动获取 IP 地址，而不用手工配置。</p>
<p>在没有DHCP时，我们需要手动给每台主机设计IP地址、子网掩码、默认网关等数据。</p>
<img src="/posts/e255a10a/6.3.1.png" class="" title="动态主机配置协议">
<p>当在网络中设置DHCP服务器后：</p>
<img src="/posts/e255a10a/6.3.2.png" class="" title="动态主机配置协议">
<h3 id="6-3-1-DHCP工作过程"><a href="#6-3-1-DHCP工作过程" class="headerlink" title="6.3.1 DHCP工作过程"></a>6.3.1 DHCP工作过程</h3><ul>
<li><p>DHCP 使用客户/服务器方式</p>
</li>
<li><p>DHCP在运输层使用UDP协议，DHCP 服务器运行在 67 号端口， DHCP客户运行在 68 号端口</p>
</li>
</ul>
<p>1.客户端广播DHCP发送报文：</p>
<img src="/posts/e255a10a/6.3.3.png" class="" title="DHCP工作过程">
<p>由于此时客户端还没有设置地址，所以将源地址设置为0.0.0.0，目的地址设置为广播地址255.255.255.255，目的端口设置为67（DHCP服务器端口）。除了DHCP服务器外，其他进程不能接收该UDP报文（其他接收端口不是67）。</p>
<p>在DHCP发送报文中格式比较复杂，只需要知道其内部有事务ID和DHCP客户端的MAC地址。</p>
<p>DHCP服务器进程是一直运行的，当收到DHCP发送报文后，会根据其MAC地址在自己的数据库查找，若数据库中有该MAC地址的配置信息，则用这些配置信息来构建发送报文。若没有，则采用默认信息来构建并发送DHCP报文。</p>
<p>2.DHCP服务器接收报文后返回DHCP提供报文：</p>
<img src="/posts/e255a10a/6.3.4.png" class="" title="DHCP工作过程">
<p>源地址设置为服务器地址，由于客户端还没有设置地址，所以将目的地址设置为广播地址255.255.255.255（只有广播地址能使其接收到），目的端口设置为68（DHCP客户端端口）。除了DHCP客户端外，其他进程不能接收该UDP报文（其他接收端口不是68）。</p>
<p>3.客户端发送选择服务器的发送请求报文：</p>
<img src="/posts/e255a10a/6.3.5.png" class="" title="DHCP工作过程">
<p>为了避免向网络中的每一个DHCP服务器单播发送DHCP请求报文，选择广播发送报文，来告知他们是不是自己选择的DHCP服务器。DPCH服务器根据报文中的内容，若发现其选择是本服务器，便将其接收，并给该客户端发送DHCP确认报文。</p>
<p>4.DHCP服务器发送确认报文：</p>
<img src="/posts/e255a10a/6.3.6.png" class="" title="DHCP工作过程">
<p>当到达租用期的一半时，会发送续约请求给服务器，根据服务器情况进行相应反馈。若没收到服务器反馈，会在0.875个租用期后再次发送并等待回应。若还是没有反应，会在租用期过期后立即放弃使用该IP地址。</p>
<p>注意：客户端可以随时终止使用该IP地址。</p>
<img src="/posts/e255a10a/6.3.7.png" class="" title="DHCP工作过程">
<h3 id="6-3-2-DHCP中继代理"><a href="#6-3-2-DHCP中继代理" class="headerlink" title="6.3.2 DHCP中继代理"></a>6.3.2 DHCP中继代理</h3><p>有路由器进行隔离的网络能使用DHCP吗？</p>
<img src="/posts/e255a10a/6.3.8.png" class="" title="DHCP中继代理">
<p>由于路由器隔离广播域，因此其DHCP请求报文不能发送到DHCP服务器中，所以其不能使用DHCP服务。解决方法是给路由器配置DHCP服务器的IP地址使其成为DHCP代理中继：</p>
<img src="/posts/e255a10a/6.3.9.png" class="" title="DHCP中继代理">
<p>这样做的原因是可以减少DHCP服务器的数量。通过中继代理进行转发来获取DHCP，而不用新增加一个DHCP服务器。</p>
<h2 id="6-4-域名系统-DNS"><a href="#6-4-域名系统-DNS" class="headerlink" title="6.4 域名系统(DNS)"></a>6.4 域名系统(DNS)</h2><p>域名系统(Domain Name System，DNS)的作用是将请求的域名转换为IP地址，给相关程序进行发送IP请求。DNS报文使用运输层的UDP协议进行封装，运输层端口号为53。</p>
<img src="/posts/e255a10a/6.4.1.png" class="" title="域名系统的作用">
<h3 id="6-4-1-域名空间"><a href="#6-4-1-域名空间" class="headerlink" title="6.4.1 域名空间"></a>6.4.1 域名空间</h3><img src="/posts/e255a10a/6.4.2.png" class="" title="层次结构的命名树">
<img src="/posts/e255a10a/6.4.3.png" class="" title="域名系统">
<img src="/posts/e255a10a/6.4.4.png" class="" title="顶级域名的分类">
<img src="/posts/e255a10a/6.4.5.png" class="" title="域名空间">
<h3 id="6-4-2-域名服务器"><a href="#6-4-2-域名服务器" class="headerlink" title="6.4.2 域名服务器"></a>6.4.2 域名服务器</h3><img src="/posts/e255a10a/6.4.6.png" class="" title="域名服务器">
<h3 id="6-4-3-域名解析过程"><a href="#6-4-3-域名解析过程" class="headerlink" title="6.4.3 域名解析过程"></a>6.4.3 域名解析过程</h3><img src="/posts/e255a10a/6.4.7.png" class="" title="域名解析过程">
<h3 id="6-4-4-高速缓存"><a href="#6-4-4-高速缓存" class="headerlink" title="6.4.4 高速缓存"></a>6.4.4 高速缓存</h3><img src="/posts/e255a10a/6.4.8.png" class="" title="高速缓存">
<img src="/posts/e255a10a/6.4.9.png" class="" title="高速缓存">
<h2 id="6-5-文件传送协议-FTP"><a href="#6-5-文件传送协议-FTP" class="headerlink" title="6.5 文件传送协议(FTP)"></a>6.5 文件传送协议(FTP)</h2><ul>
<li><p>文件传送是将某台计算机中的文件通过网络传送到可能相距很远的一台计算机中，是一项基本的网络应用。</p>
</li>
<li><p>文件传输协议(File Transfer Protocol，FTP)是因特网上使用的最广泛的文件传送协议。</p>
<ul>
<li><p>FTP提供交互式的访问，允许客户指明文件的类型和格式（如指明是否使用ASCII码），并允许文件具有存取权限（如访问文件必须经过授权，并输入有效的口令）。</p>
</li>
<li><p>FTP屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传输文件。</p>
</li>
</ul>
</li>
<li><p>在因特网发展早期阶段，用FTP传输占整个因特网通信量的三分之一，而电子邮件和域名系统所产生的通信量还要小于FTP所产生的通信量。到了1995年，万维网(WWW)的通信量才首次超过了FTP。</p>
</li>
</ul>
<h3 id="6-5-1-FTP的应用"><a href="#6-5-1-FTP的应用" class="headerlink" title="6.5.1 FTP的应用"></a>6.5.1 FTP的应用</h3><p>FTP使用C/S方式（用户/服务器方式），端口号为21/20。</p>
<p>FTP客户计算机可将各种类型的文件上传到FTP服务器计算机：</p>
<img src="/posts/e255a10a/6.5.1.png" class="" title="FTP的应用">
<p>FTP客户计算机可以从FTP服务器计算机下载文件：</p>
<img src="/posts/e255a10a/6.5.2.png" class="" title="FTP的应用">
<p>FTP服务器可以有专用的高速服务器组成，也可以是普通的个人计算机。在Windows中就可以使用自带的FTP服务创建FTP 服务器，或者使用第三方FTP软件创建客户端。</p>
<p>FTP的常见用途是在计算机之间传输文件，尤其是用于批量传输文件。FTP的另一个常见用途是让网站设计者将构成网站内容的大量文件批量上传到他们的Web服务器。</p>
<h3 id="6-5-2-FTP的基本工作原理"><a href="#6-5-2-FTP的基本工作原理" class="headerlink" title="6.5.2 FTP的基本工作原理"></a>6.5.2 FTP的基本工作原理</h3><img src="/posts/e255a10a/6.5.3.png" class="" title="FTP的基本工作原理">
<p>默认情况下，FTP使用TCP 21端口进行控制连接，TCP 20端口进行数据连接。</p>
<p>控制连接在整个会话期间一直保持打开，用于传送FTP相关的控制命令。</p>
<p>传输连接用于文件传输，每次文件传输时才建立，传输结束后就关闭。</p>
<h2 id="6-6-电子邮件"><a href="#6-6-电子邮件" class="headerlink" title="6.6 电子邮件"></a>6.6 电子邮件</h2><ul>
<li>电子邮件（E-mail）是因特网上最早流行的一种应用，并且仍是当今因特网上最重要、最实用的应用之一。</li>
<li>传统的电话通信属于实时通信，具有以下两个缺点：<ul>
<li>电话通信的主叫和被叫方必须同时在场</li>
<li>一些不是十分紧迫的电话也常常不必要地打断人们的工作或休息</li>
</ul>
</li>
<li>电子邮件和邮件系统的寄信相似，其工作过程如下：<ol>
<li>发件人将邮件发送到自己使用的邮件服务器</li>
<li>发件人的邮件服务器将收到的邮件按其目的地址转发到收件人邮件服务器中的收件人邮箱</li>
<li>收件人在方便的时候访问收件人邮件服务器中自己的邮箱，获取收到的电子邮件</li>
</ol>
</li>
<li>电子邮件使用方便、传递迅速而且费用低廉。它不仅可以传送文字信息，而且还可附上声音和图像。</li>
<li>由于电子邮件的广泛应用，现在许多国家已经正式取消了电报业务。在我国，电信局的电报业务也因电子邮件的普及而濒临消失。</li>
</ul>
<img src="/posts/e255a10a/6.6.1.png" class="" title="电子邮件">
<img src="/posts/e255a10a/6.6.2.png" class="" title="电子邮件">
<h3 id="6-6-1-SMTP基本工作原理"><a href="#6-6-1-SMTP基本工作原理" class="headerlink" title="6.6.1 SMTP基本工作原理"></a>6.6.1 SMTP基本工作原理</h3><p>简单邮件传送协议(Simple Mail Transfer Protocol， SMTP)</p>
<p>SMTP发送方的邮件服务器会周期性对邮件进行缓存扫描，若发现有邮件，会通过TCP协议，端口号25与接收方的邮件服务器建立连接。</p>
<p>建立这条连接后，STMP客户基于这条连接给SMTP服务器发送SMTP命令，共14条。SMTP服务器会给SMTP客户端发送相应的应答，共21种。</p>
<p>双方通过这种命令和应答的方式最终实现客户端发送邮件给SMTP服务器。</p>
<img src="/posts/e255a10a/6.6.3.png" class="" title="SMTP基本工作原理">
<h3 id="6-6-2-电子邮件格式"><a href="#6-6-2-电子邮件格式" class="headerlink" title="6.6.2 电子邮件格式"></a>6.6.2 电子邮件格式</h3><p>电子邮件的信息格式并不是由SMTP定义的，而是在RFC 822中单独定义的。这个RFC文档已在2008年更新为RFC 5322。一个电子邮件有信封和内容两部分。而内容又由首部和主体两部分构成。</p>
<img src="/posts/e255a10a/6.6.4.png" class="" title="电子邮件格式">
<h3 id="6-6-3-多用途因特网邮件扩展MIME"><a href="#6-6-3-多用途因特网邮件扩展MIME" class="headerlink" title="6.6.3 多用途因特网邮件扩展MIME"></a>6.6.3 多用途因特网邮件扩展MIME</h3><img src="/posts/e255a10a/6.6.5.png" class="" title="MIME">
<p>多用途因特网邮件扩展(Multipurpose Internet Mail Extension，MIME)增加了5个新的邮件首部字段，这些字段提供了有关邮件主体的信息。定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化。定义了传统编码，可对任何内容格式进行转换，而不会被邮件系统改变。</p>
<p>实际上，MIME不仅仅用于SMTP，也用于同样面向ASCII字符的HTTP。</p>
<h3 id="6-6-4-邮件读取协议"><a href="#6-6-4-邮件读取协议" class="headerlink" title="6.6.4 邮件读取协议"></a>6.6.4 邮件读取协议</h3><img src="/posts/e255a10a/6.6.6.png" class="" title="邮件读取协议">
<h3 id="6-6-5-基于万维网的电子邮件"><a href="#6-6-5-基于万维网的电子邮件" class="headerlink" title="6.6.5 基于万维网的电子邮件"></a>6.6.5 基于万维网的电子邮件</h3><img src="/posts/e255a10a/6.6.7.png" class="" title="基于万维网的电子邮件">
<h2 id="6-7-万维网-WWW"><a href="#6-7-万维网-WWW" class="headerlink" title="6.7 万维网(WWW)"></a>6.7 万维网(WWW)</h2><ul>
<li>万维网WWW(World Wide Web)并非某种特殊的计算机网络。它是一个规模很大、联机式的信息储藏所，是运行在因特网上的一个分布式应用。</li>
<li>万维网利用网页之间的超链接将不同网站的网页链接成一张逻辑上的信息网。万维网用链接的方法能非常方便地从互联网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息。</li>
</ul>
<img src="/posts/e255a10a/6.7.1.png" class="" title="浏览器">
<p>客户端向目的IP地址发送请求，服务器收到后会通过因特网发送响应报文，解析成万维网文档，显示在客户端上。</p>
<p>为了方便地访问在世界范围的文档，万维网使用统一资源定位符URL来指明因特网上任何种类“资源”的位置。</p>
<p>URL的一般格式由以下四个部分组成：</p>
<script type="math/tex; mode=display">
<协议>://<主机>:<端口>/<路径></script><h3 id="6-7-1-万维网文档"><a href="#6-7-1-万维网文档" class="headerlink" title="6.7.1 万维网文档"></a>6.7.1 万维网文档</h3><p>我们对浏览器的页面进行另存为到本地，其文件就是万维网的文档。</p>
<img src="/posts/e255a10a/6.7.2.png" class="" title="万维网文档">
<h3 id="6-7-2-超文本传输协议-HTTP"><a href="#6-7-2-超文本传输协议-HTTP" class="headerlink" title="6.7.2 超文本传输协议(HTTP)"></a>6.7.2 超文本传输协议(HTTP)</h3><p>HTTP定义了浏览器（万维网进行）怎样向万维网服务器请求万维网文档，以及万维网服务器怎么样把万维网文档传送给浏览器。</p>
<img src="/posts/e255a10a/6.7.3.png" class="" title="HTTP协议">
<p>首先客户进程会利用80端口和服务器建立TCP请求，然后通过该连接发送HTTP请求报文。服务器收到请求报文后也会通过该连接发送HTTP响应报文。</p>
<img src="/posts/e255a10a/6.7.4.png" class="" title="HTTP响应报文">
<img src="/posts/e255a10a/6.7.5.png" class="" title="HTTP响应报文">
<h3 id="6-7-3-HTTP报文格式"><a href="#6-7-3-HTTP报文格式" class="headerlink" title="6.7.3 HTTP报文格式"></a>6.7.3 HTTP报文格式</h3><img src="/posts/e255a10a/6.7.6.png" class="" title="HTTP请求报文格式">
<img src="/posts/e255a10a/6.7.7.png" class="" title="HTTP请求报文格式">
<img src="/posts/e255a10a/6.7.8.png" class="" title="HTTP响应报文格式">
<p>响应报文中常见的状态行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 202 Accepted		接受请求</span><br><span class="line">HTTP/1.1 400 Bad Request	错误的请求</span><br><span class="line">HTTP/1.1 404 Not Found		找不到页面</span><br></pre></td></tr></table></figure>
<h3 id="6-7-4-Cookie"><a href="#6-7-4-Cookie" class="headerlink" title="6.7.4 Cookie"></a>6.7.4 Cookie</h3><img src="/posts/e255a10a/6.7.9.png" class="" title="Cookie">
<img src="/posts/e255a10a/6.7.10.png" class="" title="Cookie">
<h3 id="6-7-5-万维网缓存与代理服务器"><a href="#6-7-5-万维网缓存与代理服务器" class="headerlink" title="6.7.5 万维网缓存与代理服务器"></a>6.7.5 万维网缓存与代理服务器</h3><ul>
<li>在万维网中还可以使用缓存机制以提高万维网的效率。</li>
<li>万维网缓存又称为Web缓存(Web Cache)，可位于客户机，也可位于中间系统上。位于中间系统上的Web缓存又称为代理服务器(Proxy Server)。</li>
<li>Web缓存把最近的一些请求和响应暂存在本地磁盘中。当新请求到达时，若发现这个请求与暂时存放的请求相同，就返回暂存的响应，而不需要按URL的地址再次去因特网访问该资源。</li>
</ul>
<p>当校园网中的某台主机要访问因特网上的原始服务器时，会先请求代理服务器，若代理服务器存放有所请求的对象，则代理服务器会向该主机发回所包含的请求对象的响应。</p>
<img src="/posts/e255a10a/6.7.11.png" class="" title="缓存与代理服务器">
<p>当校园网中的某台主机要访问因特网上的原始服务器时，请求代理服务器，若代理服务器没有所请求的对象，则代理服务器会向原始服务器发送请求。服务器响应后，代理服务器会将其放入自己的Web缓存，再将其发给用户主机。</p>
<img src="/posts/e255a10a/6.7.12.png" class="" title="缓存与代理服务器">
<img src="/posts/e255a10a/6.7.13.png" class="" title="缓存与代理服务器">
<p>有这样一种情况：若代理服务器存放该请求的缓存后，原始服务器该请求响应有所修改，此时若用户再次请求，在代理服务器的缓存中就是旧的响应报文了。所以原始服务器通常会为每个响应的对象设定一个修改时间字段和一个有效日期字段。</p>
<p>若修改时间字段未过期，则会之间将缓存中报文封装在响应报文中发回给主机。</p>
<img src="/posts/e255a10a/6.7.14.png" class="" title="缓存与代理服务器">
<p>若修改时间已过期，此时会向原始服务器发送一个if-modified-since信号，意思是询问是否发生响应文档改变。若没有改变，则原始服务器回送一个Not Modified信号，代理服务器接收到后会将修改时间改为当前时间，不修改缓存中的文档，并且将缓存中的文档包装在响应报文中发送给用户主机。</p>
<img src="/posts/e255a10a/6.7.15.png" class="" title="缓存与代理服务器">
<p>若修改时间已过期，此时会向原始服务器发送一个if-modified-since信号，意思是询问是否发生响应文档改变。若改变，则原始服务器会在响应报文中附带修改后的文档，代理服务器接收到后会将修改时间改为当前时间，并且缓存中的文档进行更新，更新后，将缓存中新的文档包装在响应报文中发送给用户主机。</p>
<img src="/posts/e255a10a/6.7.16.png" class="" title="缓存与代理服务器">

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="v5le0n9 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="v5le0n9 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/d04bd5bc.html" rel="prev" title="操作系统">
      <i class="fa fa-chevron-left"></i> 操作系统
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/5850d757.html" rel="next" title="2022DASCTF Apr X FATE 防疫挑战赛">
      2022DASCTF Apr X FATE 防疫挑战赛 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="nav-text">1. 计算机网络概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-%E7%BD%91%E7%BB%9C%E3%80%81%E4%BA%92%E8%BF%9E%E7%BD%91-%E4%BA%92%E8%81%94%E7%BD%91-%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="nav-text">1.1 网络、互连网(互联网)和因特网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E5%9B%A0%E7%89%B9%E7%BD%91%E5%8F%91%E5%B1%95%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="nav-text">1.2 因特网发展的三个阶段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90"><span class="nav-text">1.3 因特网的组成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%89%E7%A7%8D%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="nav-text">1.4 计算机网络三种数据交换方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-1-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="nav-text">1.4.1 电路交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-2-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="nav-text">1.4.2 分组交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-3-%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="nav-text">1.4.3 报文交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-4-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-text">1.4.4 三种交换方式的对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB"><span class="nav-text">1.5 计算机网络的定义和分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="nav-text">1.6 计算机网络的性能指标</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-1-%E9%80%9F%E7%8E%87"><span class="nav-text">1.6.1 速率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-2-%E5%B8%A6%E5%AE%BD"><span class="nav-text">1.6.2 带宽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-3-%E5%90%9E%E5%90%90%E9%87%8F"><span class="nav-text">1.6.3 吞吐量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-4-%E6%97%B6%E5%BB%B6"><span class="nav-text">1.6.4 时延</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-5-%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF"><span class="nav-text">1.6.5 时延带宽积</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-6-%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4-RTT"><span class="nav-text">1.6.6 往返时间(RTT)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-7-%E5%88%A9%E7%94%A8%E7%8E%87"><span class="nav-text">1.6.7 利用率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-8-%E4%B8%A2%E5%8C%85%E7%8E%87"><span class="nav-text">1.6.8 丢包率</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-text">1.7 计算机网络体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%AD%E7%9A%84%E4%B8%93%E7%94%A8%E6%9C%AF%E8%AF%AD"><span class="nav-text">1.7.1 计算机网络体系结构中的专用术语</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-1-1-%E5%AE%9E%E4%BD%93"><span class="nav-text">1.7.1.1 实体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-1-2-%E5%8D%8F%E8%AE%AE"><span class="nav-text">1.7.1.2 协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-1-3-%E6%9C%8D%E5%8A%A1"><span class="nav-text">1.7.1.3 服务</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E7%89%A9%E7%90%86%E5%B1%82"><span class="nav-text">2. 物理层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">2.1 基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="nav-text">2.2 物理层下面的传输媒体</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="nav-text">2.2.1 导引型传输媒体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="nav-text">2.2.2 非导引型传输媒体</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F"><span class="nav-text">2.3 物理层的传输方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-%E4%B8%B2%E8%A1%8C%E4%BC%A0%E8%BE%93%E5%92%8C%E5%B9%B6%E8%A1%8C%E4%BC%A0%E8%BE%93"><span class="nav-text">2.3.1 串行传输和并行传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-%E5%90%8C%E6%AD%A5%E4%BC%A0%E8%BE%93%E5%92%8C%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93"><span class="nav-text">2.3.2 同步传输和异步传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-3-%E5%8D%95%E5%B7%A5%E3%80%81%E5%8D%8A%E5%8F%8C%E5%B7%A5%E3%80%81%E5%85%A8%E5%8F%8C%E5%B7%A5%E9%80%9A%E4%BF%A1"><span class="nav-text">2.3.3 单工、半双工、全双工通信</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6"><span class="nav-text">2.4 编码与调制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-1-%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A0%81"><span class="nav-text">2.4.1 常用编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-2-%E5%9F%BA%E6%9C%AC%E8%B0%83%E5%88%B6"><span class="nav-text">2.4.2 基本调制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-3-%E6%B7%B7%E5%90%88%E8%B0%83%E5%88%B6"><span class="nav-text">2.4.3 混合调制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="nav-text">2.5 信道的极限容量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-1-%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99"><span class="nav-text">2.5.1 奈氏准则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-2-%E9%A6%99%E5%86%9C%E5%85%AC%E5%BC%8F"><span class="nav-text">2.5.2 香农公式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="nav-text">3. 数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="nav-text">3.1 数据链路层概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E4%B8%89%E4%B8%AA%E9%87%8D%E8%A6%81%E9%97%AE%E9%A2%98"><span class="nav-text">3.2 数据链路层的三个重要问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="nav-text">3.2.1 封装成帧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="nav-text">3.2.2 差错检测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-3-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="nav-text">3.2.3 可靠传输</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="nav-text">3.3 封装成帧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1-%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="nav-text">3.3.1 透明传输</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="nav-text">3.4 差错检测</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="nav-text">3.4.1 奇偶校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2-%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8C-CRC%EF%BC%8CCyclic-Redundancy-Check"><span class="nav-text">3.4.2 循环冗余校验(CRC，Cyclic Redundancy Check)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="nav-text">3.5 可靠传输</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-1-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">3.5.1 可靠传输基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-2-%E4%B8%89%E7%A7%8D%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6"><span class="nav-text">3.5.2 三种可靠传输实现机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-2-1-%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE-SW%EF%BC%8CStop-and-Wait"><span class="nav-text">3.5.2.1 停止-等待协议(SW，Stop and Wait)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-2-2-%E5%9B%9E%E9%80%80N%E5%B8%A7%E5%8D%8F%E8%AE%AE-GBN%EF%BC%8CGo-Back-N"><span class="nav-text">3.5.2.2 回退N帧协议(GBN，Go-Back-N)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-2-3-%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE-SR%EF%BC%8CSelective-Request"><span class="nav-text">3.5.2.3 选择重传协议(SR，Selective Request)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-PPP"><span class="nav-text">3.6 点对点协议(PPP)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-1-PPP%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="nav-text">3.6.1 PPP的帧格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-2-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="nav-text">3.6.2 点对点协议透明传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="nav-text">3.6.3 差错检测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-4-%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"><span class="nav-text">3.6.4 工作状态</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6-MAC"><span class="nav-text">3.7 媒体接入控制(MAC)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">3.7.1 基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-2-%E9%9D%99%E6%80%81%E5%88%92%E5%88%86%E4%BF%A1%E9%81%93"><span class="nav-text">3.7.2 静态划分信道</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-2-1-%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8FDM"><span class="nav-text">3.7.2.1 频分复用FDM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-2-2-%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8TDM"><span class="nav-text">3.7.2.2 时分复用TDM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-2-3-%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8WDM"><span class="nav-text">3.7.2.3 波分复用WDM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-2-4-%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8CDM"><span class="nav-text">3.7.2.4 码分复用CDM</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-3-%E5%8A%A8%E6%80%81%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6"><span class="nav-text">3.7.3 动态接入控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-3-1-CSMA-CD%E5%8D%8F%E8%AE%AE"><span class="nav-text">3.7.3.1 CSMA&#x2F;CD协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-3-2-CSMA-CA%E5%8D%8F%E8%AE%AE"><span class="nav-text">3.7.3.2 CSMA&#x2F;CA协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-8-MAC%E5%9C%B0%E5%9D%80%E3%80%81IP%E5%9C%B0%E5%9D%80%E5%8F%8AARP%E5%8D%8F%E8%AE%AE"><span class="nav-text">3.8 MAC地址、IP地址及ARP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-1-MAC%E5%9C%B0%E5%9D%80"><span class="nav-text">3.8.1 MAC地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-2-IP%E5%9C%B0%E5%9D%80"><span class="nav-text">3.8.2 IP地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-3-ARP%E5%8D%8F%E8%AE%AE"><span class="nav-text">3.8.3 ARP协议</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-9-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">3.9 集线器与交换机的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-1-%E4%BD%BF%E7%94%A8%E5%8F%8C%E7%BB%9E%E7%BA%BF%E5%92%8C%E9%9B%86%E7%BA%BF%E5%99%A8HUB%E7%9A%84%E6%98%9F%E5%9E%8B%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="nav-text">3.9.1 使用双绞线和集线器HUB的星型以太网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-2-%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8-HUB-%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="nav-text">3.9.2 使用集线器(HUB)在物理层扩展以太网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-3-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="nav-text">3.9.3 以太网交换机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-4-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-text">3.9.4 集线器与交换机的对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E6%8D%A2%E5%B8%A7%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="nav-text">3.10 以太网交换机自学习和转换帧的流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-11-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE-STP"><span class="nav-text">3.11 以太网交换机的生成树协议(STP)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-12-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91-VLAN"><span class="nav-text">3.12 虚拟局域网(VLAN)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-12-1-VLAN%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6"><span class="nav-text">3.12.1 VLAN的实现机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-12-1-1-IEEE-802-1Q%E5%B8%A7"><span class="nav-text">3.12.1.1 IEEE 802.1Q帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-12-1-2-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%AB%AF%E5%8F%A3%E7%B1%BB%E5%9E%8B"><span class="nav-text">3.12.1.2 交换机的端口类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-12-1-2-1-Access%E7%AB%AF%E5%8F%A3"><span class="nav-text">3.12.1.2.1 Access端口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-12-1-2-2-Trunk%E7%AB%AF%E5%8F%A3"><span class="nav-text">3.12.1.2.2 Trunk端口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-12-1-2-3-Hybrid%E7%AB%AF%E5%8F%A3"><span class="nav-text">3.12.1.2.3 Hybrid端口</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="nav-text">4. 网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="nav-text">4.1 网络层概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="nav-text">4.2 网络层提供的两种服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1-%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1"><span class="nav-text">4.2.1 面向连接的虚电路服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-2-%E9%9D%A2%E5%90%91%E6%97%A0%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%9C%8D%E5%8A%A1"><span class="nav-text">4.2.2 面向无连接的数据报服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-IPv4%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3 IPv4地址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1-IPv4%E5%9C%B0%E5%9D%80%E6%A6%82%E8%BF%B0"><span class="nav-text">4.3.1 IPv4地址概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2-%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84IPv4%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.2 分类编址的IPv4地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-1-A%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.2.1 A类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-2-B%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.2.2 B类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-3-C%E7%B1%BB%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.2.3 C类地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-4-%E4%B8%80%E8%88%AC%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E7%89%B9%E6%AE%8AIP%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.2.4 一般不使用的特殊IP地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-3-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E7%9A%84IPv4%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.3 划分子网的IPv4地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-4-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84IPv4%E5%9C%B0%E5%9D%80"><span class="nav-text">4.3.4 无分类编址的IPv4地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-5-IPv4%E5%9C%B0%E5%9D%80%E7%9A%84%E5%BA%94%E7%94%A8%E8%A7%84%E5%88%92"><span class="nav-text">4.3.5 IPv4地址的应用规划</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B"><span class="nav-text">4.4 IP数据报的发送和转发过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98"><span class="nav-text">4.5 静态路由配置及其可能产生的路由环路问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.6 路由选择协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-1-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="nav-text">4.6.1 路由选择协议概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-1-1-%E5%B8%B8%E8%A7%81%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.6.1.1 常见的路由选择协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-1-2-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="nav-text">4.6.1.2 路由器的基本结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-1-3-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-text">4.6.1.3 路由器的基本工作过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-2-%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-RIP-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">4.6.2 路由信息协议(RIP)的基本工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-2-1-RIP%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-text">4.6.2.1 RIP基本工作过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-2-2-RIP%E7%9A%84%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9B%AE%E7%9A%84%E6%9B%B4%E6%96%B0%E8%A7%84%E5%88%99"><span class="nav-text">4.6.2.2 RIP的路由条目的更新规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-2-3-RIP%E5%8D%8F%E8%AE%AE%E5%AD%98%E5%9C%A8%E2%80%9C%E5%9D%8F%E6%B6%88%E6%81%AF%E4%BC%A0%E5%BE%97%E6%85%A2%E2%80%9D%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">4.6.2.3 RIP协议存在“坏消息传得慢”的问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-3-%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88-OSPF-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">4.6.3 开放最短路径优先(OSPF)的基本工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-3-1-%E4%BA%94%E7%A7%8DOSPF%E5%88%86%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="nav-text">4.6.3.1 五种OSPF分组类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-3-2-OSPF%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-text">4.6.3.2 OSPF的基本工作过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-3-3-OSPF%E5%9C%A8%E5%A4%9A%E7%82%B9%E6%8E%A5%E5%85%A5%E7%BD%91%E7%BB%9C%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E9%82%BB%E5%B1%85%E5%85%B3%E7%B3%BB%E7%9A%84%E5%BB%BA%E7%AB%8B"><span class="nav-text">4.6.3.3 OSPF在多点接入网络路由器中邻居关系的建立</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-4-%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-BGP-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">4.6.4 边界网关协议(BGP)的基本工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-6-4-1-%E5%9B%9B%E7%A7%8DBGP-4%E6%8A%A5%E6%96%87"><span class="nav-text">4.6.4.1 四种BGP-4报文</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="nav-text">4.7 IPv4数据报的首部格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-7-1-%E6%95%B0%E6%8D%AE%E8%BD%BD%E8%8D%B7"><span class="nav-text">4.7.1 数据载荷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-7-2-IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="nav-text">4.7.2 IP数据报分片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-7-3-TTL%E9%98%B2%E6%AD%A2%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF"><span class="nav-text">4.7.3 TTL防止路由环路</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-8-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-ICMP"><span class="nav-text">4.8 网际控制报文协议(ICMP)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-8-1-ICMP%E4%B8%AD%E7%9A%84%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87"><span class="nav-text">4.8.1 ICMP中的差错报告报文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-8-2-ICMP%E4%B8%AD%E7%9A%84%E8%AF%A2%E9%97%AE%E6%8A%A5%E6%96%87"><span class="nav-text">4.8.2 ICMP中的询问报文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-8-3-ICMP%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-text">4.8.3 ICMP的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-8-3-1-%E5%88%86%E7%BB%84%E7%BD%91%E9%97%B4%E6%8E%A2%E6%B5%8BPING"><span class="nav-text">4.8.3.1 分组网间探测PING</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-8-3-2-%E8%B7%9F%E8%B8%AA%E8%B7%AF%E7%94%B1traceroute"><span class="nav-text">4.8.3.2 跟踪路由traceroute</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-9-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT"><span class="nav-text">4.9 虚拟专用网VPN和网络地址转换NAT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-9-1-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN-Virtual-Private-Network"><span class="nav-text">4.9.1 虚拟专用网VPN(Virtual Private Network)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-9-2-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT-Network-Address-Translation"><span class="nav-text">4.9.2 网络地址转换NAT(Network Address Translation)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E8%BF%90%E8%BE%93%E5%B1%82"><span class="nav-text">5. 运输层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="nav-text">5.1 运输层概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7%E3%80%81%E5%A4%8D%E7%94%A8%E5%92%8C%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-text">5.2 运输层端口号、复用和分用的概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-1-%E5%8F%91%E9%80%81%E6%96%B9%E7%9A%84%E5%A4%8D%E7%94%A8%E5%92%8C%E6%8E%A5%E6%94%B6%E6%96%B9%E7%9A%84%E5%88%86%E7%94%A8"><span class="nav-text">5.2.1 发送方的复用和接收方的分用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-2-TCP-IP%E4%BD%93%E7%B3%BB%E7%9A%84%E5%BA%94%E7%94%A8%E5%B1%82%E5%B8%B8%E7%94%A8%E5%8D%8F%E8%AE%AE%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%90%E8%BE%93%E5%B1%82%E7%86%9F%E7%9F%A5%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="nav-text">5.2.2 TCP&#x2F;IP体系的应用层常用协议所使用的运输层熟知端口号</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-UDP%E4%B8%8ETCP%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-text">5.3 UDP与TCP的对比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="nav-text">5.4 TCP流量控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="nav-text">5.5 TCP拥塞控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-1-%E6%85%A2%E5%BC%80%E5%A7%8B%E4%B8%8E%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D"><span class="nav-text">5.5.1 慢开始与拥塞避免</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-2-%E5%BF%AB%E9%87%8D%E4%BC%A0%E4%B8%8E%E5%BF%AB%E6%81%A2%E5%A4%8D"><span class="nav-text">5.5.2 快重传与快恢复</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-TCP%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="nav-text">5.6 TCP超时重传时间的选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-7-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">5.7 TCP可靠传输的实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="nav-text">5.8 TCP的运输连接管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-8-1-TCP%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="nav-text">5.8.1 TCP的连接建立(三次握手)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-8-2-TCP%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-text">5.8.2 TCP的连接释放(四次挥手)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-9-TCP%E6%8A%A5%E6%96%87%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="nav-text">5.9 TCP报文的首部格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-9-1-%E5%BA%8F%E5%8F%B7%E3%80%81%E7%A1%AE%E8%AE%A4%E5%8F%B7%E3%80%81ACK%E5%AD%97%E6%AE%B5"><span class="nav-text">5.9.1 序号、确认号、ACK字段</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="nav-text">6. 应用层</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="nav-text">6.1 应用层概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8-C-S-%E6%96%B9%E5%BC%8F%E5%92%8C%E5%AF%B9%E7%AD%89-P2P-%E6%96%B9%E5%BC%8F"><span class="nav-text">6.2 客户&#x2F;服务器(C&#x2F;S)方式和对等(P2P)方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-1-%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F"><span class="nav-text">6.2.1 客户&#x2F;服务器方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-2-%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F"><span class="nav-text">6.2.2 对等方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE-DHCP"><span class="nav-text">6.3 动态主机配置协议(DHCP)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-1-DHCP%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-text">6.3.1 DHCP工作过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-2-DHCP%E4%B8%AD%E7%BB%A7%E4%BB%A3%E7%90%86"><span class="nav-text">6.3.2 DHCP中继代理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F-DNS"><span class="nav-text">6.4 域名系统(DNS)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-1-%E5%9F%9F%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-text">6.4.1 域名空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-2-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">6.4.2 域名服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-3-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="nav-text">6.4.3 域名解析过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-4-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="nav-text">6.4.4 高速缓存</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE-FTP"><span class="nav-text">6.5 文件传送协议(FTP)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-5-1-FTP%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-text">6.5.1 FTP的应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-5-2-FTP%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">6.5.2 FTP的基本工作原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-text">6.6 电子邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-1-SMTP%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">6.6.1 SMTP基本工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-2-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="nav-text">6.6.2 电子邮件格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-3-%E5%A4%9A%E7%94%A8%E9%80%94%E5%9B%A0%E7%89%B9%E7%BD%91%E9%82%AE%E4%BB%B6%E6%89%A9%E5%B1%95MIME"><span class="nav-text">6.6.3 多用途因特网邮件扩展MIME</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-4-%E9%82%AE%E4%BB%B6%E8%AF%BB%E5%8F%96%E5%8D%8F%E8%AE%AE"><span class="nav-text">6.6.4 邮件读取协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-5-%E5%9F%BA%E4%BA%8E%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-text">6.6.5 基于万维网的电子邮件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-%E4%B8%87%E7%BB%B4%E7%BD%91-WWW"><span class="nav-text">6.7 万维网(WWW)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-1-%E4%B8%87%E7%BB%B4%E7%BD%91%E6%96%87%E6%A1%A3"><span class="nav-text">6.7.1 万维网文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-2-%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-HTTP"><span class="nav-text">6.7.2 超文本传输协议(HTTP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-3-HTTP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="nav-text">6.7.3 HTTP报文格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-4-Cookie"><span class="nav-text">6.7.4 Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-5-%E4%B8%87%E7%BB%B4%E7%BD%91%E7%BC%93%E5%AD%98%E4%B8%8E%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">6.7.5 万维网缓存与代理服务器</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="v5le0n9"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">v5le0n9</p>
  <div class="site-description" itemprop="description">v5le0n9's garden</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/Leong_Vinson" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;Leong_Vinson" rel="noopener" target="_blank"><i class="fab fa-cuttlefish fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/v5le0n9" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;v5le0n9" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:v5le0n9@163.com" title="E-Mail → mailto:v5le0n9@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">v5le0n9</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">863k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">13:04</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '7c58e80079a2457b610d',
      clientSecret: 'fc16b1b0fdfb278016ebe41c20f3743c3c927466',
      repo        : 'comments.github.io',
      owner       : 'v5le0n9',
      admin       : ['v5le0n9'],
      id          : '997e67cc277471acaba8ce82eed03190',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
